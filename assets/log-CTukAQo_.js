import{_ as Q,B as W,a as E,d as F,r as p,C as J,I as O,e as s,J as $,c as G,o as U,f as e,h as n,K as b,k as o,l as f,D as X,n as V,N,i as Z,m as w,A as I}from"./index-BXRoTRPN.js";import{u as ee}from"./useCopy-CSzW9GjL.js";import{e as le}from"./admin-DqibhfnH.js";import{u as oe}from"./useTableColumnWidth-CTSg-whZ.js";const ae={class:"app-container"},te=W({name:"User"}),ne=Object.assign(te,{setup(re){const{copyText:k}=ee(),{tableRef:D,handleHeaderDragend:x,applyStoredColumnWidths:C}=oe("log-table");E();const{proxy:R}=F(),h=p([]);p(!1),p(!1);const y=p(!0),A=p(!0);p([]),p(!0),p(!0);const _=p(0);p("");const m=p([]),S=J({form:{},formIv:{},queryParams:{pageNo:1,pageSize:10,userId:void 0,ip:void 0}}),{queryParams:t,form:se,rules:pe,rulesIv:de,formIv:ie}=O(S);function g(){y.value=!0,le(K(t.value,m.value)).then(c=>{y.value=!1,h.value=c.data.records,_.value=c.data.total,C()})}function K(c,l,u){let r=c;return r.params=typeof r.params=="object"&&r.params!==null&&!Array.isArray(r.params)?r.params:{},l=Array.isArray(l)?l:[],r.startTime=l[0]&&l[0]+" 00:00:00",r.endTime=l[1]&&l[1]+" 23:59:59",r}function d(){t.value.pageNo=1,g()}function P(){m.value=[],R.resetForm("queryRef"),t.value.userId=void 0,t.value.ip=void 0,d()}return g(),(c,l)=>{const u=s("el-input"),r=s("el-form-item"),T=s("el-date-picker"),v=s("el-button"),B=s("el-form"),i=s("el-table-column"),q=s("CopyDocument"),L=s("el-icon"),Y=s("el-table"),z=s("pagination"),H=s("el-col"),j=s("el-row"),M=$("loading");return U(),G("div",ae,[e(j,{gutter:20},{default:n(()=>[e(H,{xs:24},{default:n(()=>[b(e(B,{model:o(t),ref:"queryRef",inline:!0,"label-width":"68px"},{default:n(()=>[e(r,{label:"记录ID",prop:"id"},{default:n(()=>[e(u,{modelValue:o(t).id,"onUpdate:modelValue":l[0]||(l[0]=a=>o(t).id=a),type:"number",placeholder:"请输入记录ID",clearable:"",style:{width:"150px"},onKeyup:f(d,["enter"])},null,8,["modelValue"])]),_:1}),e(r,{"label-width":"120",label:"管理员ID查询",prop:"sysUserId"},{default:n(()=>[e(u,{modelValue:o(t).sysUserId,"onUpdate:modelValue":l[1]||(l[1]=a=>o(t).sysUserId=a),type:"number",placeholder:"请输入管理员ID",clearable:"",style:{width:"150px"},onKeyup:f(d,["enter"])},null,8,["modelValue"])]),_:1}),e(r,{"label-width":"120",label:"管理员账号查询",prop:"sysUserName"},{default:n(()=>[e(u,{modelValue:o(t).sysUserName,"onUpdate:modelValue":l[2]||(l[2]=a=>o(t).sysUserName=a),placeholder:"请输入管理员账号查询",clearable:"",style:{width:"180px"},onKeyup:f(d,["enter"])},null,8,["modelValue"])]),_:1}),e(r,{"label-width":"120",label:"管理员名称查询",prop:"sysRealName"},{default:n(()=>[e(u,{modelValue:o(t).sysRealName,"onUpdate:modelValue":l[3]||(l[3]=a=>o(t).sysRealName=a),placeholder:"请输入管理员名称查询",clearable:"",style:{width:"180px"},onKeyup:f(d,["enter"])},null,8,["modelValue"])]),_:1}),e(r,{label:"登录IP",prop:"loginIp"},{default:n(()=>[e(u,{modelValue:o(t).loginIp,"onUpdate:modelValue":l[4]||(l[4]=a=>o(t).loginIp=a),placeholder:"请输入登录IP",clearable:"",style:{width:"150px"},onKeyup:f(d,["enter"])},null,8,["modelValue"])]),_:1}),e(r,{label:"登录时间",style:{width:"308px"}},{default:n(()=>[e(T,{modelValue:o(m),"onUpdate:modelValue":l[5]||(l[5]=a=>X(m)?m.value=a:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),e(r,null,{default:n(()=>[e(v,{type:"primary",icon:"Search",onClick:d},{default:n(()=>[V("搜索")]),_:1}),e(v,{icon:"Refresh",onClick:P},{default:n(()=>[V("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[N,o(A)]]),b((U(),Z(Y,{border:"",data:o(h),onHeaderDragend:o(x),ref_key:"tableRef",ref:D},{default:n(()=>[e(i,{label:"记录ID",align:"center",key:"id",prop:"id",width:"90"}),e(i,{label:"管理员ID",align:"center",key:"sysUserId",prop:"sysUserId",width:"120","show-overflow-tooltip":!0},{default:n(a=>[w("span",null,I(a.row.sysUserId),1),e(L,{style:{cursor:"pointer","margin-left":"4px"},onClick:ue=>o(k)(a.row.sysUserId)},{default:n(()=>[e(q)]),_:2},1032,["onClick"])]),_:1}),e(i,{label:"管理员账号",align:"center",key:"sysUserName",prop:"sysUserName",width:"160"}),e(i,{label:"管理员名称",align:"center",key:"sysRealName",prop:"sysRealName",width:"160"}),e(i,{label:"登录IP",align:"center",key:"loginIp",prop:"loginIp","show-overflow-tooltip":!0,width:"160"},{default:n(a=>[w("span",null,I(a.row.loginIp),1)]),_:1}),e(i,{label:"IP地址详情",align:"center",key:"ipAddress",prop:"ipAddress",width:"160","show-overflow-tooltip":!0},{default:n(a=>[w("span",null,I(a.row.ipAddress),1)]),_:1}),e(i,{label:"登录时间",align:"center",key:"loginTime",prop:"loginTime",width:"160"})]),_:1},8,["data","onHeaderDragend"])),[[M,o(y)]]),b(e(z,{total:o(_),page:o(t).pageNo,"onUpdate:page":l[6]||(l[6]=a=>o(t).pageNo=a),onPagination:g,limit:o(t).pageSize,"onUpdate:limit":l[7]||(l[7]=a=>o(t).pageSize=a)},null,8,["total","page","limit"]),[[N,o(_)>0]])]),_:1})]),_:1})])}}}),_e=Q(ne,[["__scopeId","data-v-14a563c5"]]);export{_e as default};
