import{P as k,B as ve,d as he,r as g,C as be,I as we,e as a,J,c as B,o as d,K as b,f as t,N as M,k as n,h as l,l as G,L as P,M as q,i as y,n as c,D as H,m as W,A as X}from"./index-BXRoTRPN.js";function Ve(r){return k({url:"/system/notice/list",method:"get",params:r})}function Te(r){return k({url:"/system/notice/"+r,method:"get"})}function Ce(r){return k({url:"/system/notice",method:"post",data:r})}function Y(r){return k({url:"/system/notice",method:"put",data:r})}function ke(r){return k({url:"/system/notice/"+r,method:"delete"})}const Se={class:"app-container"},Ne={class:"dialog-footer"},Ue=ve({name:"Notice"}),Be=Object.assign(Ue,{setup(r){const{proxy:p}=he(),{sys_notice_status:Z,sys_notice_type:I}=p.useDict("sys_notice_status","sys_notice_type"),z=g([]),m=g(!1),D=g(!0),S=g(!0),N=g([]),F=g(!0),K=g(!0),R=g(0),$=g(""),ee=be({form:{},queryParams:{pageNum:1,pageSize:10,noticeTitle:void 0,createBy:void 0,status:void 0},rules:{noticeTitle:[{required:!0,message:"公告标题不能为空",trigger:"blur"}],noticeType:[{required:!0,message:"公告类型不能为空",trigger:"change"}]}}),{queryParams:s,form:u,rules:te}=we(ee);function f(){D.value=!0,Ve(s.value).then(i=>{z.value=i.rows,R.value=i.total,D.value=!1})}function le(){m.value=!1,U()}function U(){u.value={noticeId:void 0,noticeTitle:void 0,noticeType:void 0,noticeContent:void 0,status:"0"},p.resetForm("noticeRef")}function x(){s.value.pageNum=1,f()}function ne(){p.resetForm("queryRef"),x()}function oe(i){N.value=i.map(o=>o.noticeId),F.value=i.length!=1,K.value=!i.length}function ae(){U(),m.value=!0,$.value="添加公告"}function L(i){U();const o=i.noticeId||N.value;Te(o).then(V=>{u.value=V.data,m.value=!0,$.value="修改公告"})}function ie(i){U(),i.id||N.value,u.value=Object.assign({},i),Y(u.value).then(o=>{p.$modal.msgSuccess("修改成功"),m.value=!1,f()}).catch(o=>{f()})}function ue(){p.$refs.noticeRef.validate(i=>{i&&(u.value.noticeId!=null?Y(u.value).then(o=>{p.$modal.msgSuccess("修改成功"),m.value=!1,f()}):Ce(u.value).then(o=>{p.$modal.msgSuccess("新增成功"),m.value=!1,f()}))})}function E(i){const o=i.noticeId||N.value;p.$modal.confirm('是否确认删除公告编号为"'+o+'"的数据项？').then(function(){return ke(o)}).then(()=>{f(),p.$modal.msgSuccess("删除成功")}).catch(()=>{})}return f(),(i,o)=>{const V=a("el-input"),v=a("el-form-item"),Q=a("el-option"),j=a("el-select"),_=a("el-button"),A=a("el-form"),w=a("el-col"),se=a("right-toolbar"),O=a("el-row"),h=a("el-table-column"),de=a("dict-tag"),re=a("el-switch"),ce=a("el-table"),pe=a("pagination"),me=a("el-radio"),fe=a("el-radio-group"),_e=a("editor"),ge=a("el-dialog"),T=J("hasPermi"),ye=J("loading");return d(),B("div",Se,[b(t(A,{model:n(s),ref:"queryRef",inline:!0},{default:l(()=>[t(v,{label:"公告标题",prop:"noticeTitle"},{default:l(()=>[t(V,{modelValue:n(s).noticeTitle,"onUpdate:modelValue":o[0]||(o[0]=e=>n(s).noticeTitle=e),placeholder:"请输入公告标题",clearable:"",style:{width:"200px"},onKeyup:G(x,["enter"])},null,8,["modelValue"])]),_:1}),t(v,{label:"操作人员",prop:"createBy"},{default:l(()=>[t(V,{modelValue:n(s).createBy,"onUpdate:modelValue":o[1]||(o[1]=e=>n(s).createBy=e),placeholder:"请输入操作人员",clearable:"",style:{width:"200px"},onKeyup:G(x,["enter"])},null,8,["modelValue"])]),_:1}),t(v,{label:"类型",prop:"noticeType"},{default:l(()=>[t(j,{modelValue:n(s).noticeType,"onUpdate:modelValue":o[2]||(o[2]=e=>n(s).noticeType=e),placeholder:"公告类型",clearable:"",style:{width:"200px"}},{default:l(()=>[(d(!0),B(P,null,q(n(I),e=>(d(),y(Q,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(v,null,{default:l(()=>[t(_,{type:"primary",icon:"Search",onClick:x},{default:l(()=>[c("搜索")]),_:1}),t(_,{icon:"Refresh",onClick:ne},{default:l(()=>[c("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[M,n(S)]]),t(O,{gutter:10,class:"mb8"},{default:l(()=>[t(w,{span:1.5},{default:l(()=>[b((d(),y(_,{type:"primary",plain:"",icon:"Plus",onClick:ae},{default:l(()=>[c("新增")]),_:1})),[[T,["system:notice:add"]]])]),_:1}),t(w,{span:1.5},{default:l(()=>[b((d(),y(_,{type:"success",plain:"",icon:"Edit",disabled:n(F),onClick:L},{default:l(()=>[c("修改")]),_:1},8,["disabled"])),[[T,["system:notice:edit"]]])]),_:1}),t(w,{span:1.5},{default:l(()=>[b((d(),y(_,{type:"danger",plain:"",icon:"Delete",disabled:n(K),onClick:E},{default:l(()=>[c("删除")]),_:1},8,["disabled"])),[[T,["system:notice:remove"]]])]),_:1}),t(se,{showSearch:n(S),"onUpdate:showSearch":o[3]||(o[3]=e=>H(S)?S.value=e:null),onQueryTable:f},null,8,["showSearch"])]),_:1}),b((d(),y(ce,{data:n(z),onSelectionChange:oe},{default:l(()=>[t(h,{type:"selection",width:"55",align:"center"}),t(h,{label:"序号",align:"center",prop:"noticeId",width:"100"}),t(h,{label:"公告标题",align:"center",prop:"noticeTitle","show-overflow-tooltip":!0}),t(h,{label:"公告类型",align:"center",prop:"noticeType",width:"100"},{default:l(e=>[t(de,{options:n(I),value:e.row.noticeType},null,8,["options","value"])]),_:1}),t(h,{label:"状态",align:"center",prop:"status",width:"100"},{default:l(e=>[t(re,{size:"large",onChange:C=>ie(e.row,C),modelValue:e.row.status,"onUpdate:modelValue":C=>e.row.status=C},null,8,["onChange","modelValue","onUpdate:modelValue"])]),_:1}),t(h,{label:"创建者",align:"center",prop:"createBy",width:"100"}),t(h,{label:"创建时间",align:"center",prop:"createTime",width:"100"},{default:l(e=>[W("span",null,X(i.parseTime(e.row.createTime,"{y}-{m}-{d}")),1)]),_:1}),t(h,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:l(e=>[b((d(),y(_,{link:"",type:"primary",icon:"Edit",onClick:C=>L(e.row)},{default:l(()=>[c("修改")]),_:2},1032,["onClick"])),[[T,["system:notice:edit"]]]),b((d(),y(_,{link:"",type:"primary",icon:"Delete",onClick:C=>E(e.row)},{default:l(()=>[c("删除")]),_:2},1032,["onClick"])),[[T,["system:notice:remove"]]])]),_:1})]),_:1},8,["data"])),[[ye,n(D)]]),b(t(pe,{total:n(R),page:n(s).pageNum,"onUpdate:page":o[4]||(o[4]=e=>n(s).pageNum=e),limit:n(s).pageSize,"onUpdate:limit":o[5]||(o[5]=e=>n(s).pageSize=e),onPagination:f},null,8,["total","page","limit"]),[[M,n(R)>0]]),t(ge,{title:n($),modelValue:n(m),"onUpdate:modelValue":o[10]||(o[10]=e=>H(m)?m.value=e:null),width:"780px","append-to-body":""},{footer:l(()=>[W("div",Ne,[t(_,{type:"primary",onClick:ue},{default:l(()=>[c("确 定")]),_:1}),t(_,{onClick:le},{default:l(()=>[c("取 消")]),_:1})])]),default:l(()=>[t(A,{ref:"noticeRef",model:n(u),rules:n(te),"label-width":"80px"},{default:l(()=>[t(O,null,{default:l(()=>[t(w,{span:12},{default:l(()=>[t(v,{label:"公告标题",prop:"noticeTitle"},{default:l(()=>[t(V,{modelValue:n(u).noticeTitle,"onUpdate:modelValue":o[6]||(o[6]=e=>n(u).noticeTitle=e),placeholder:"请输入公告标题"},null,8,["modelValue"])]),_:1})]),_:1}),t(w,{span:12},{default:l(()=>[t(v,{label:"公告类型",prop:"noticeType"},{default:l(()=>[t(j,{modelValue:n(u).noticeType,"onUpdate:modelValue":o[7]||(o[7]=e=>n(u).noticeType=e),placeholder:"全部"},{default:l(()=>[(d(!0),B(P,null,q(n(I),e=>(d(),y(Q,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(w,{span:24},{default:l(()=>[t(v,{label:"状态"},{default:l(()=>[t(fe,{modelValue:n(u).status,"onUpdate:modelValue":o[8]||(o[8]=e=>n(u).status=e)},{default:l(()=>[(d(!0),B(P,null,q(n(Z),e=>(d(),y(me,{key:e.value,value:e.value},{default:l(()=>[c(X(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(w,{span:24},{default:l(()=>[t(v,{label:"内容"},{default:l(()=>[t(_e,{modelValue:n(u).noticeContent,"onUpdate:modelValue":o[9]||(o[9]=e=>n(u).noticeContent=e),"min-height":192},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{Be as default};
