import{_ as xe,d as be,y as pe,r as h,w as fe,e as b,J as me,i as S,o as n,h as a,m as s,K as F,f as e,c as d,A as u,k as t,j as m,n as p,N as ve,L as ge,M as we,D as _e,s as Ie,t as Se,B as Te,a as Pe,C as Ve,I as Ce,l as z}from"./index-BXRoTRPN.js";import{u as $e}from"./useCopy-CSzW9GjL.js";import{d as he,t as Re,l as Fe,p as De}from"./trust-CT_Dofg5.js";import{a as Le}from"./signal-BbaEzBPC.js";import{u as Ue}from"./useTableColumnWidth-CTSg-whZ.js";const v=j=>(Ie("data-v-fc0194d0"),j=j(),Se(),j),Ne={style:{"overflow-x":"auto","overflow-y":"hidden"}},Ke={style:{"border-collapse":"collapse",border:"1px solid #EEEEEE"}},Be=v(()=>s("tr",{class:"list-tab",style:{"background-color":"#f8f8f9","font-weight":"600",color:"rgb(81, 90, 110)"}},[s("td",{class:"title"},"导师信息"),s("td",{class:"title"},"信号仓位"),s("td",{class:"title"},"项目"),s("td",{class:"title"},"跟投股票"),s("td",{class:"title"},"跟投信号ID"),s("td",{class:"title"},"信号指导价"),s("td",{class:"title"},"信号类型"),s("td",{class:"title"},"每手股数"),s("td",{class:"title"},"显示开始时间")],-1)),He={class:"list-tab"},Ee={class:"ub-f1"},Oe={class:"ub-f1"},Me={key:0},ze={key:1},je={key:2},qe={class:"ub-f1"},We={class:"ub-f1"},Ae={class:"ub-f1"},Qe={class:"ub-f1"},Ye={key:0},Je={class:"ub-f1"},Ge={key:0,style:{color:"#63a103"}},Xe={key:1,style:{color:"#da0114"}},Ze={class:"ub-f1"},et={class:"ub-f1"},tt=v(()=>s("br",null,null,-1)),lt=v(()=>s("span",{style:{color:"red","margin-left":"10px","margin-right":"30px"}},"注：成交价格和成交时间是随机产生的，价格和时间为一组 ",-1)),ot={key:0,style:{color:"red","margin-left":"10px"}},at={key:1,style:{color:"red","margin-left":"10px"}},nt={key:0},it={key:0},st=v(()=>s("br",null,null,-1)),rt={key:1},dt=v(()=>s("br",null,null,-1)),ut={key:0},ct={key:0},pt=v(()=>s("br",null,null,-1)),_t={key:1},mt=v(()=>s("br",null,null,-1)),yt={key:0,style:{color:"red"}},ft={key:0},gt=v(()=>s("br",null,null,-1)),wt={key:1},ht=v(()=>s("br",null,null,-1)),bt={key:0},vt={key:0},kt=v(()=>s("br",null,null,-1)),xt={key:1},It=v(()=>s("br",null,null,-1)),St={key:0},Tt={key:0},Pt=v(()=>s("br",null,null,-1)),Vt={key:1},Ct=v(()=>s("br",null,null,-1)),$t={key:0},Rt={key:0},Ft=v(()=>s("br",null,null,-1)),Dt={key:1},Lt=v(()=>s("br",null,null,-1)),Ut={key:0},Nt={key:0},Kt=v(()=>s("br",null,null,-1)),Bt={key:1},Ht=v(()=>s("br",null,null,-1)),Et={key:0},Ot={key:0},Mt=v(()=>s("br",null,null,-1)),zt={key:1},jt=v(()=>s("br",null,null,-1)),qt={style:{color:"red"}},Wt={key:0,style:{color:"#63a103"}},At={key:1,style:{color:"#da0114"}},Qt={key:2,style:{}},Yt=v(()=>s("br",null,null,-1)),Jt=v(()=>s("div",{class:"title"},[s("div",{class:"time"},"时间"),s("div",{class:"price"},"成交价")],-1)),Gt={class:"time"},Xt={class:"price"},Zt=v(()=>s("br",null,null,-1)),el=v(()=>s("br",null,null,-1)),tl={style:{display:"flex","align-items":"center",gap:"10px"}},ll=v(()=>s("span",null,"-",-1)),ol=v(()=>s("span",{style:{color:"red","margin-left":"10px"}},"根据价格区间随机分配",-1)),al=v(()=>s("br",null,null,-1)),nl={class:"dialog-footer",style:{"text-align":"center"}},il={__name:"trustBuy",props:{visible:{type:Boolean,default:!1},title:{type:String,default:""},idList:{type:String,default:""},idStr:{type:String,default:""},signId:{type:String,default:""}},emits:["success","close"],setup(j,{expose:q,emit:se}){const{proxy:J}=be(),ee=se,B=j,P=pe({get(){return B.visible},set(w){ee("close",w)}}),H=h(!1),V=h(!1),x=h(!1);h();const W=h({price:"",sub:0,tradeDay:"",tradeTime:"",volume:""}),te=h([]),C=h([]),E=h(20),D=h(1),L=h(2e3),le=h(0),$=h(!0),G={0:"每日",1:"7日",2:"16日",3:"38日",4:"108日",5:"180日",6:"360日"},_=h({tutorName:"",tutorId:"",position:0,itemType:0,stockName:"",stockCode:"",id:"",price1:"",signType:0,sharesOfHand:"",displayReleaseTime:"",stockType:""}),N=h([]),f=h({price:"",tradingPosition:"",finishTime:"",floatingRate:"",minPrice:"",maxPrice:""}),y=pe(()=>{switch(_.value.stockType){case"hk":return"HK$";case"us":return"$";default:return"￥"}}),ye=pe(()=>{if(!f.value.price||!f.value.floatingRate)return{minPrice:"",maxPrice:""};const w=parseFloat(f.value.price),i=parseFloat(f.value.floatingRate);if(isNaN(w)||isNaN(i))return{minPrice:"",maxPrice:""};const r=w*(1-i/100),c=w*(1+i/100);return{minPrice:r.toFixed(3),maxPrice:c.toFixed(3)}});fe([()=>f.value.price,()=>f.value.floatingRate],w=>{const[i,r]=w;if(i&&r){const c=ye.value;f.value.minPrice=c.minPrice,f.value.maxPrice=c.maxPrice}},{immediate:!0}),fe([x],function(w,i){Z()});function O(w){let i=w.target;if(Math.ceil(i.scrollLeft+i.clientWidth)>=i.scrollWidth){if(console.log("滚动到了最右边"),Math.ceil(le.value/L.value)==D.value)return $.value=!1,!1;$.value&&(D.value++,X())}}function X(){if(!_.value.stockCode){V.value=!1;return}V.value=!0,Le({stockCode:_.value.stockCode,stockType:_.value.stockType,minPrice:f.value.minPrice,maxPrice:f.value.maxPrice,displayReleaseTime:N.value.length==1?N.value[0].finallyFinishTime:void 0,marketPrice:x.value,pageNo:D.value,pageSize:L.value}).then(w=>{V.value=!1;let i=w.data.dayTransactionData.stockDayTransactionDataPage;le.value=i.total,i.total||J.$modal.msgError("没有查询到成交记录~ 原因是显示开始时间或者价格"),W.value=w.data.dayTransactionData.randomStockDayTransactionDataPage,te.value.push(...i.records),T(i.records)}).catch(w=>{V.value=!1,console.error("获取股票数据失败:",w)})}function T(w){console.log("触发了",w);let i=0;for(let r=1;r<=L.value/E.value;r++){let c=w.slice(i,i+E.value);if(c.length)C.value.push(c),i+=E.value;else break}console.log("列表的值",C.value)}function re(){te.value=[],C.value=[],D.value=1,$.value=!0}function de(){if(!f.value.tradingPosition)return J.$modal.msgError("请选择仓位"),!1;Re({followPendingTransferDetailUserVOList:N.value,signId:_.value.id,buyingPrice:f.value.price,tradingPosition:f.value.tradingPosition}).then(w=>{J.$modal.msgSuccess("操作成功"),P.value=!1,ee("success")})}function Z(){C.value=[],D.value=1,oe(B.idStr,B.signId)}function oe(w,i){he({minPrice:f.value.minPrice,maxPrice:f.value.maxPrice,tradingPosition:f.value.tradingPosition,marketPrice:x.value,pendingIdList:w,signId:i}).then(r=>{_.value=r.data.signInfo,N.value=r.data.followPendingTransferDetailUserVO,X()})}return q({init:async function(w,i,r,c){H.value=!0,re(),f.value.price=c.price1,f.value.tradingPosition=c.position,f.value.floatingRate=2;let k=await he({buyingPrice:f.value.price,tradingPosition:f.value.tradingPosition,marketPrice:x.value,pendingIdList:w,signId:i});_.value=k.data.signInfo,N.value=k.data.followPendingTransferDetailUserVO,H.value=!1,X()}}),(w,i)=>{const r=b("el-form-item"),c=b("el-table-column"),k=b("el-table"),g=b("el-empty"),U=b("el-radio"),R=b("el-option"),ue=b("el-select"),M=b("el-input"),A=b("el-button"),I=b("el-form"),Q=b("el-dialog"),K=me("loading");return n(),S(Q,{title:B.title,width:"90%",modelValue:t(P),"onUpdate:modelValue":i[11]||(i[11]=l=>_e(P)?P.value=l:null),"append-to-body":""},{footer:a(()=>[s("div",nl,[e(A,{type:"primary",onClick:i[9]||(i[9]=l=>de())},{default:a(()=>[p("确 定")]),_:1}),e(A,{type:"",onClick:i[10]||(i[10]=l=>P.value=!1)},{default:a(()=>[p("取 消")]),_:1})])]),default:a(()=>[s("div",Ne,[F((n(),d("table",Ke,[Be,s("tr",He,[s("td",Ee,u(t(_).tutorName)+"("+u(t(_).tutorId)+")",1),s("td",Oe,[t(_).position==.25?(n(),d("span",Me,"1/4仓")):m("",!0),t(_).position==.5?(n(),d("span",ze,"1/2仓")):m("",!0),t(_).position==1?(n(),d("span",je,"全仓")):m("",!0)]),s("td",qe,u(G[t(_).itemType]),1),s("td",We,u(t(_).stockName)+"("+u(t(_).stockCode)+")",1),s("td",Ae,u(t(_).id),1),s("td",Qe,[t(_).price1?(n(),d("span",Ye,u(t(y))+u(t(_).price1),1)):m("",!0)]),s("td",Je,[t(_).signType==0?(n(),d("span",Ge,"买入")):m("",!0),t(_).signType==1?(n(),d("span",Xe,"卖出")):m("",!0)]),s("td",Ze,u(t(_).sharesOfHand),1),s("td",et,u(t(_).displayReleaseTime),1)])])),[[K,t(H)]]),tt,e(r,null,{default:a(()=>[lt,t(_).signType==0?(n(),d("span",ot,"买入预估盈亏=（实时价格-成交价格）x 交易股数 - 手续费 - 印花税 ")):m("",!0),t(_).signType==1?(n(),d("span",at,"卖出预估盈亏=（成交价格-买入成本价）x 交易股数 - 手续费 - 印花税 - 导师抽佣 - 平台抽佣 ")):m("",!0)]),_:1}),F((n(),S(k,{border:"",data:t(N)},{default:a(()=>[e(c,{label:"交易信息",align:"center"},{default:a(()=>[e(c,{label:"用户ID",align:"center",key:"id",prop:"id",width:"80","show-overflow-tooltip":!0}),t(_).signType==0?(n(),S(c,{key:0,label:"实时价格",align:"center",width:"100"},{default:a(l=>[l.row.exchangeRate&&l.row.nowPrice?(n(),d("span",nt,[t(_).stockType=="hk"?(n(),d("span",it,[p("HK$"+u(l.row.nowPrice),1),st])):t(_).stockType=="us"?(n(),d("span",rt,[p("$"+u(l.row.nowPrice),1),dt])):m("",!0),p(" ￥"+u((l.row.nowPrice/l.row.exchangeRate).toFixed(3)),1)])):m("",!0)]),_:1})):m("",!0),t(_).signType==1?(n(),S(c,{key:1,label:"买入成本价",align:"center",width:"100"},{default:a(l=>[l.row.buyingCostPrice?(n(),d("span",ut,[t(_).stockType=="hk"?(n(),d("span",ct,[p("HK$"+u((l.row.buyingCostPrice*l.row.exchangeRate).toFixed(3)||0),1),pt])):m("",!0),t(_).stockType=="us"?(n(),d("span",_t,[p("$"+u((l.row.buyingCostPrice*l.row.exchangeRate).toFixed(3)||0),1),mt])):m("",!0),p(" ￥"+u(l.row.buyingCostPrice),1)])):m("",!0)]),_:1})):m("",!0),e(c,{label:"成交价格",align:"center",width:"100"},{default:a(l=>[l.row.buyingPriceCNY?(n(),d("span",yt,[t(_).stockType=="hk"?(n(),d("span",ft,[p("HK$"+u(l.row.randomStockDayTransactionBuyingPrice),1),gt])):t(_).stockType=="us"?(n(),d("span",wt,[p("$"+u(l.row.randomStockDayTransactionBuyingPrice),1),ht])):m("",!0),p(" ￥"+u(l.row.buyingPriceCNY),1)])):m("",!0)]),_:1}),e(c,{label:"交易股数",align:"center",prop:"buyingShares"}),e(c,{label:"预估盈亏",align:"center",width:"120"},{default:a(l=>[l.row.predictProfitLoss?(n(),d("span",bt,[t(_).stockType=="hk"?(n(),d("span",vt,[p("HK$"+u((l.row.predictProfitLoss*l.row.exchangeRate).toFixed(2)),1),kt])):t(_).stockType=="us"?(n(),d("span",xt,[p("$"+u((l.row.predictProfitLoss*l.row.exchangeRate).toFixed(2)),1),It])):m("",!0),p(" ￥"+u(l.row.predictProfitLoss.toFixed(2)),1)])):m("",!0)]),_:1}),e(c,{label:"手续费",align:"center",prop:"operateFee"},{default:a(l=>[l.row.operateFee?(n(),d("span",St,[t(_).stockType=="hk"?(n(),d("span",Tt,[p("HK$"+u((l.row.operateFee*l.row.exchangeRate).toFixed(2)),1),Pt])):t(_).stockType=="us"?(n(),d("span",Vt,[p("$"+u((l.row.operateFee*l.row.exchangeRate).toFixed(2)),1),Ct])):m("",!0),p(" ￥"+u(l.row.operateFee.toFixed(2)),1)])):m("",!0)]),_:1}),e(c,{label:"印花税",align:"center",prop:"operateStampDuty"},{default:a(l=>[l.row.operateStampDuty?(n(),d("span",$t,[t(_).stockType=="hk"?(n(),d("span",Rt,[p("HK$"+u((l.row.operateStampDuty*l.row.exchangeRate).toFixed(2)),1),Ft])):t(_).stockType=="us"?(n(),d("span",Dt,[p("$"+u((l.row.operateStampDuty*l.row.exchangeRate).toFixed(2)),1),Lt])):m("",!0),p(" ￥"+u(l.row.operateStampDuty.toFixed(2)),1)])):m("",!0)]),_:1}),t(_).signType==1?(n(),S(c,{key:2,label:"导师抽佣",align:"center",width:"120"},{default:a(l=>[l.row.tutorCommission?(n(),d("span",Ut,[t(_).stockType=="hk"?(n(),d("span",Nt,[p("HK$"+u((l.row.tutorCommission*l.row.exchangeRate).toFixed(2)),1),Kt])):t(_).stockType=="us"?(n(),d("span",Bt,[p("$"+u((l.row.tutorCommission*l.row.exchangeRate).toFixed(2)),1),Ht])):m("",!0),p(" ￥"+u(l.row.tutorCommission.toFixed(2)),1)])):m("",!0)]),_:1})):m("",!0),t(_).signType==1?(n(),S(c,{key:3,label:"平台抽佣",align:"center",width:"120"},{default:a(l=>[l.row.platformCommission?(n(),d("span",Et,[t(_).stockType=="hk"?(n(),d("span",Ot,[p("HK$"+u((l.row.platformCommission*l.row.exchangeRate).toFixed(2)),1),Mt])):t(_).stockType=="us"?(n(),d("span",zt,[p("$"+u((l.row.platformCommission*l.row.exchangeRate).toFixed(2)),1),jt])):m("",!0),p(" ￥"+u(l.row.platformCommission.toFixed(2)),1)])):m("",!0)]),_:1})):m("",!0),e(c,{label:"成交时间",prop:"randomStockDayTransactionFinishTime",width:"100"})]),_:1}),e(c,{label:"用户信息",align:"center"},{default:a(()=>[e(c,{label:"用户等级",align:"center",key:"levelId",prop:"levelId","show-overflow-tooltip":!0,width:"80"}),e(c,{label:"累计转入金额",align:"center",key:"totalCashinSum",prop:"totalCashinSum",width:"80","show-overflow-tooltip":!0}),e(c,{label:"累计转出金额",align:"center",key:"totalCashoutSum",prop:"totalCashoutSum",width:"80","show-overflow-tooltip":!0}),e(c,{label:"当前账户余额",align:"center",key:"availableAmt",prop:"availableAmt"}),e(c,{label:"累计跟投资金",align:"center",key:"totalInitialFollowSum",prop:"totalInitialFollowSum"}),e(c,{label:"当前项目跟投资金",align:"center",key:"initialFollowSum",prop:"initialFollowSum"}),e(c,{label:"当前项目剩余跟投资金",align:"center",key:"currentFollowSum",prop:"currentFollowSum",width:"100"},{default:a(l=>[s("span",qt,u(l.row.currentFollowSum),1)]),_:1}),e(c,{label:"项目持仓总市值",align:"center",key:"positionFollowSum",prop:"positionFollowSum"}),e(c,{label:"项目盈亏",align:"center"},{default:a(l=>[p(u((l.row.currentFollowSum+l.row.positionFollowSum-l.row.initialFollowSum).toFixed(2)),1)]),_:1}),e(c,{label:"项目开始跟投时间",align:"center",key:"followStartTime",prop:"followStartTime",width:"100"}),e(c,{label:"剩余跟投天数",align:"center",key:"remainingDays",prop:"remainingDays",width:"80","show-overflow-tooltip":!0}),e(c,{label:"跟投状态",align:"center"},{default:a(l=>[l.row.followStatus==0?(n(),d("span",Wt,"进行中")):m("",!0),l.row.followStatus==1?(n(),d("span",At,"顺延")):m("",!0),l.row.followStatus==2?(n(),d("span",Qt,"已结束")):m("",!0)]),_:1}),e(c,{label:"创建时间",align:"center",key:"regTime",prop:"regTime",width:"100"}),e(c,{label:"最后登录时间",align:"center",key:"lastLoginTime",prop:"lastLoginTime",width:"100"}),e(c,{label:"最后完成时间",align:"center",key:"finallyFinishTime",prop:"finallyFinishTime",width:"100"})]),_:1})]),_:1},8,["data"])),[[K,t(H)]]),Yt,s("div",{class:"warp",ref:"scrollList",onScroll:i[0]||(i[0]=l=>O(l))},[F(e(g,{description:"暂无数据~",style:{width:"100%"}},null,512),[[ve,!t(C).length]]),(n(!0),d(ge,null,we(t(C),(l,ae)=>(n(),d("div",{class:"box",key:ae},[Jt,(n(!0),d(ge,null,we(l,(ne,ce)=>(n(),d("div",{class:"item",key:ce},[s("div",Gt,u(ne.tradeTime),1),s("div",Xt,u(ne.price),1)]))),128))]))),128))],544),Zt,F((n(),S(I,{model:t(f),ref:"tempRef",inline:!0},{default:a(()=>[e(r,{label:"价格模式",prop:"price"},{default:a(()=>[e(U,{modelValue:t(x),"onUpdate:modelValue":i[1]||(i[1]=l=>_e(x)?x.value=l:null),label:!1},{default:a(()=>[p("指定价格")]),_:1},8,["modelValue"]),e(U,{modelValue:t(x),"onUpdate:modelValue":i[2]||(i[2]=l=>_e(x)?x.value=l:null),label:!0},{default:a(()=>[p("市场价")]),_:1},8,["modelValue"])]),_:1}),el,e(r,{label:B.title+"仓位",prop:"tradingPosition"},{default:a(()=>[e(ue,{modelValue:t(f).tradingPosition,"onUpdate:modelValue":i[3]||(i[3]=l=>t(f).tradingPosition=l),style:{width:"150px"},placeholder:"请选择"},{default:a(()=>[e(R,{key:"1",label:"全仓",value:1}),e(R,{key:"2",label:"1/2仓",value:.5}),e(R,{key:"3",label:"1/4仓",value:.25})]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(r,{label:"参考价格",prop:"price"},{default:a(()=>[e(M,{modelValue:t(f).price,"onUpdate:modelValue":i[4]||(i[4]=l=>t(f).price=l),type:"number",placeholder:"请输入参考价",clearable:"",style:{width:"150px"}},{suffix:a(()=>[p(u(t(y)),1)]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"浮动率",prop:"floatingRate"},{default:a(()=>[e(M,{modelValue:t(f).floatingRate,"onUpdate:modelValue":i[5]||(i[5]=l=>t(f).floatingRate=l),type:"number",placeholder:"请输入浮动率",clearable:"",style:{width:"150px"}},{suffix:a(()=>[p("%")]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"价格浮动区间",prop:"minPrice"},{default:a(()=>[s("div",tl,[e(M,{modelValue:t(f).minPrice,"onUpdate:modelValue":i[6]||(i[6]=l=>t(f).minPrice=l),type:"number",placeholder:"最小值",clearable:"",style:{width:"120px"},disabled:""},{suffix:a(()=>[p(u(t(y)),1)]),_:1},8,["modelValue"]),ll,e(M,{modelValue:t(f).maxPrice,"onUpdate:modelValue":i[7]||(i[7]=l=>t(f).maxPrice=l),type:"number",placeholder:"最大值",clearable:"",style:{width:"120px"},disabled:""},{suffix:a(()=>[p(u(t(y)),1)]),_:1},8,["modelValue"])])]),_:1}),e(r,null,{default:a(()=>[e(A,{type:"primary",plain:"",icon:"Refresh",onClick:i[8]||(i[8]=l=>Z()),style:{"margin-left":"20px"}},{default:a(()=>[p("获取价格")]),_:1}),ol]),_:1}),al]),_:1},8,["model"])),[[K,t(V)]])])]),_:1},8,["title","modelValue"])}}},sl=xe(il,[["__scopeId","data-v-fc0194d0"]]),rl={class:"app-container"},dl=s("span",{style:{color:"red","font-size":"12px",display:"flex","justify-content":"center","align-items":"center","margin-left":"10px"}},"注：仅可对同信号用户进行批量操作",-1),ul={key:0},cl=s("br",null,null,-1),pl=s("br",null,null,-1),_l={key:1},ml={key:0,style:{color:"#63a103"}},yl={key:1,style:{color:"#da0114"}},fl={key:2,style:{}},gl=s("br",null,null,-1),wl={key:0,style:{color:"#63a103"}},hl={key:1,style:{color:"#da0114"}},bl=s("br",null,null,-1),vl={key:2},kl={key:3},xl=s("br",null,null,-1),Il={key:4},Sl={key:5},Tl={key:6},Pl={key:7},Vl={key:0},Cl={key:0,style:{color:"#da0114"}},$l={key:1,style:{color:"#63a103"}},Rl=Te({name:"User"}),Kl=Object.assign(Rl,{setup(j){var oe,w;const{copyText:q}=$e(),{tableRef:se,handleHeaderDragend:J,applyStoredColumnWidths:ee}=Ue("trust-table"),B=Pe(),{proxy:P}=be(),H=h([]),V=h(!1),x=h(!0),W=h([]),te=h(),C=h(0),E=h(""),D=h(),L=h(),le=h([]),$=h([]),G=h();function _(i){$.value=i}const N={0:"每日",1:"7日",2:"16日",3:"38日",4:"108日",5:"180日",6:"360日"},f=Ve({form:{},queryParams:{pageNo:1,pageSize:10,signTraceStatus:1,signId:((w=(oe=B.currentRoute.value)==null?void 0:oe.query)==null?void 0:w.signId)||void 0}}),{queryParams:y,form:ye}=Ce(f);function O(){x.value=!0,Fe(y.value,le.value).then(i=>{x.value=!1,H.value=i.data.records,C.value=i.data.total,ee()})}function X(i){const r=i.id;P.$modal.confirm("您确定要撤单吗？").then(function(){return De({pendingIdList:r})}).then(()=>{O(),P.$modal.msgSuccess("操作成功")}).catch(()=>{})}function T(){y.value.pageNo=1,O()}function re(){P.resetForm("queryRef"),T()}function de(i){W.value=[],L.value=$.value[0].signId;for(let c=0;c<$.value.length;c++){if($.value[c].signId!=L.value)return P.$modal.msgError("只能对同信号ID的数据批量操作，请重新选择"),!1;W.value.push($.value[c].id)}let r=W.value.join(",");D.value=r,E.value=i,G.value.init(r,L.value,i,$.value[0]),V.value=!0}function Z(i,r){x.value=!0,W.value=[i.id],te.value=i,D.value=i.id,L.value=i.signId,E.value=r,G.value.init(i.id,i.signId,r,i),V.value=!0,x.value=!1}return O(),(i,r)=>{const c=b("el-input"),k=b("el-form-item"),g=b("el-option"),U=b("el-select"),R=b("el-button"),ue=b("el-form"),M=b("el-col"),A=b("el-row"),I=b("el-table-column"),Q=b("CopyDocument"),K=b("el-icon"),l=b("el-tag"),ae=b("el-tooltip"),ne=b("el-table"),ce=b("pagination"),ie=me("hasPermi"),ke=me("loading");return n(),d("div",rl,[e(A,{gutter:20},{default:a(()=>[e(M,{xs:24},{default:a(()=>[e(ue,{model:t(y),ref:"queryRef",inline:!0},{default:a(()=>[e(k,{label:"委托ID",prop:"id"},{default:a(()=>[e(c,{modelValue:t(y).id,"onUpdate:modelValue":r[0]||(r[0]=o=>t(y).id=o),modelModifiers:{number:!0},type:"number",placeholder:"请输入委托ID",clearable:"",style:{width:"150px"},onKeyup:z(T,["enter"])},null,8,["modelValue"])]),_:1}),e(k,{label:"持仓ID",prop:"positionId"},{default:a(()=>[e(c,{modelValue:t(y).positionId,"onUpdate:modelValue":r[1]||(r[1]=o=>t(y).positionId=o),modelModifiers:{number:!0},type:"number",placeholder:"请输入持仓ID",clearable:"",style:{width:"150px"},onKeyup:z(T,["enter"])},null,8,["modelValue"])]),_:1}),e(k,{label:"用户查询",prop:"userId"},{default:a(()=>[e(c,{modelValue:t(y).userId,"onUpdate:modelValue":r[2]||(r[2]=o=>t(y).userId=o),modelModifiers:{number:!0},type:"number",placeholder:"请输入用户ID",clearable:"",style:{width:"150px"},onKeyup:z(T,["enter"])},null,8,["modelValue"])]),_:1}),e(k,{label:"用户等级",prop:"levelId"},{default:a(()=>[e(U,{modelValue:t(y).levelId,"onUpdate:modelValue":r[3]||(r[3]=o=>t(y).levelId=o),style:{width:"150px"},placeholder:"全部"},{default:a(()=>[e(g,{key:"0",label:"全部",value:""}),e(g,{key:"1",label:"L1-普通会员",value:1}),e(g,{key:"2",label:"L2-银牌",value:2}),e(g,{key:"3",label:"L3-金牌",value:3}),e(g,{key:"4",label:"L4-钻石",value:4}),e(g,{key:"5",label:"L5-皇冠",value:5})]),_:1},8,["modelValue"])]),_:1}),e(k,{label:"导师查询",prop:"tutorId"},{default:a(()=>[e(c,{modelValue:t(y).tutorId,"onUpdate:modelValue":r[4]||(r[4]=o=>t(y).tutorId=o),placeholder:"请输入导师ID",clearable:"",style:{width:"150px"},onKeyup:z(T,["enter"])},null,8,["modelValue"])]),_:1}),e(k,{label:"跟投信号ID",prop:"signId"},{default:a(()=>[e(c,{modelValue:t(y).signId,"onUpdate:modelValue":r[5]||(r[5]=o=>t(y).signId=o),modelModifiers:{number:!0},type:"number",placeholder:"请输入跟投记录ID",clearable:"",style:{width:"150px"},onKeyup:z(T,["enter"])},null,8,["modelValue"])]),_:1}),e(k,{label:"跟投ID",prop:"followRecordId"},{default:a(()=>[e(c,{modelValue:t(y).followRecordId,"onUpdate:modelValue":r[6]||(r[6]=o=>t(y).followRecordId=o),modelModifiers:{number:!0},type:"number",placeholder:"请输入跟投记录ID",clearable:"",style:{width:"150px"},onKeyup:z(T,["enter"])},null,8,["modelValue"])]),_:1}),e(k,{label:"交易单号",prop:"tradingOrderSn"},{default:a(()=>[e(c,{modelValue:t(y).tradingOrderSn,"onUpdate:modelValue":r[7]||(r[7]=o=>t(y).tradingOrderSn=o),placeholder:"请输入交易单号",clearable:"",style:{width:"150px"},onKeyup:z(T,["enter"])},null,8,["modelValue"])]),_:1}),e(k,{label:"公域/私域",prop:"domainType"},{default:a(()=>[e(U,{modelValue:t(y).domainType,"onUpdate:modelValue":r[8]||(r[8]=o=>t(y).domainType=o),style:{width:"150px"},placeholder:"全部"},{default:a(()=>[e(g,{key:"0",label:"全部",value:""}),e(g,{key:"1",label:"公域",value:0}),e(g,{key:"2",label:"私域",value:1})]),_:1},8,["modelValue"])]),_:1}),e(k,{label:"项目",prop:"itemType"},{default:a(()=>[e(U,{modelValue:t(y).itemType,"onUpdate:modelValue":r[9]||(r[9]=o=>t(y).itemType=o),style:{width:"150px"},placeholder:"全部"},{default:a(()=>[e(g,{key:"0",label:"全部",value:""}),e(g,{key:"1",label:"1日跟投",value:0}),e(g,{key:"2",label:"7日跟投",value:1}),e(g,{key:"3",label:"16日跟投",value:2}),e(g,{key:"4",label:"38日跟投",value:3}),e(g,{key:"5",label:"108日跟投",value:4}),e(g,{key:"6",label:"180日跟投",value:5}),e(g,{key:"7",label:"360日跟投",value:6})]),_:1},8,["modelValue"])]),_:1}),e(k,{label:"信号类型",prop:"signType"},{default:a(()=>[e(U,{modelValue:t(y).signType,"onUpdate:modelValue":r[10]||(r[10]=o=>t(y).signType=o),style:{width:"150px"},placeholder:"全部"},{default:a(()=>[e(g,{key:"0",label:"全部",value:""}),e(g,{key:"1",label:"买入",value:0}),e(g,{key:"2",label:"卖出",value:1})]),_:1},8,["modelValue"])]),_:1}),e(k,{label:"跟投状态",prop:"followStatus"},{default:a(()=>[e(U,{modelValue:t(y).followStatus,"onUpdate:modelValue":r[11]||(r[11]=o=>t(y).followStatus=o),style:{width:"150px"},placeholder:"全部"},{default:a(()=>[e(g,{key:"0",label:"全部",value:""}),e(g,{key:"1",label:"进行中",value:0}),e(g,{key:"2",label:"顺延",value:1}),e(g,{key:"3",label:"已结束",value:2})]),_:1},8,["modelValue"])]),_:1}),e(k,{label:"审核状态",prop:"pendingStatus"},{default:a(()=>[e(U,{modelValue:t(y).pendingStatus,"onUpdate:modelValue":r[12]||(r[12]=o=>t(y).pendingStatus=o),style:{width:"150px"},placeholder:"全部"},{default:a(()=>[e(g,{key:"0",label:"全部",value:""}),e(g,{key:"1",label:"待成交",value:0}),e(g,{key:"2",label:"已完成",value:1})]),_:1},8,["modelValue"])]),_:1}),e(k,null,{default:a(()=>[e(R,{type:"primary",icon:"Search",onClick:T},{default:a(()=>[p("查询")]),_:1}),e(R,{icon:"Refresh",onClick:re},{default:a(()=>[p("重置")]),_:1})]),_:1})]),_:1},8,["model"]),F((n(),S(A,{gutter:10,class:"mb8"},{default:a(()=>[e(M,{span:1.5},{default:a(()=>[e(R,{type:"primary",onClick:r[13]||(r[13]=o=>de("批量操作"))},{default:a(()=>[p("批量操作")]),_:1})]),_:1}),dl]),_:1})),[[ie,["handleBuy"]]]),F((n(),S(ne,{border:"",data:t(H),onSelectionChange:_,onHeaderDragend:t(J),ref_key:"tableRef",ref:se},{default:a(()=>[e(I,{type:"selection",width:"50",align:"center"}),e(I,{label:"委托ID",align:"center",width:"100","show-overflow-tooltip":!0},{default:a(o=>[s("span",null,u(o.row.id),1),e(K,{style:{cursor:"pointer","margin-left":"4px"},onClick:Y=>t(q)(o.row.id)},{default:a(()=>[e(Q)]),_:2},1032,["onClick"])]),_:1}),e(I,{label:"持仓ID",align:"center",key:"positionId",prop:"positionId",width:"80","show-overflow-tooltip":!0}),e(I,{label:"用户信息",align:"center",width:"150","show-overflow-tooltip":!0},{default:a(o=>[o.row.userId?(n(),d("span",ul,[p(u(o.row.realName?o.row.realName:o.row.nickname),1),cl,p(" "+u(o.row.userId),1),e(K,{style:{cursor:"pointer","margin-left":"4px"},onClick:Y=>t(q)(o.row.userId)},{default:a(()=>[e(Q)]),_:2},1032,["onClick"]),pl,p(" L"+u(o.row.levelId)+"-"+u(o.row.levelName),1)])):(n(),d("span",_l,"-"))]),_:1}),e(I,{label:"跟投状态",align:"center",width:"80"},{default:a(o=>[o.row.followStatus==0?(n(),d("span",ml,"进行中")):m("",!0),o.row.followStatus==1?(n(),d("span",yl,"顺延")):m("",!0),o.row.followStatus==2?(n(),d("span",fl,"已结束")):m("",!0)]),_:1}),e(I,{label:"导师信息",align:"center",width:"150","show-overflow-tooltip":!0},{default:a(o=>[p(u(o.row.tutorName)+"（"+u(o.row.tutorId)+"） ",1),gl,e(l,{type:"success"},{default:a(()=>[p(u(N[o.row.itemType]),1)]),_:2},1024)]),_:1}),e(I,{label:"跟投ID",align:"center",key:"followRecordId",prop:"followRecordId",width:"100"},{default:a(o=>[s("span",null,u(o.row.followRecordId),1),e(K,{style:{cursor:"pointer","margin-left":"4px"},onClick:Y=>t(q)(o.row.followRecordId)},{default:a(()=>[e(Q)]),_:2},1032,["onClick"])]),_:1}),e(I,{label:"跟投信号ID",align:"center",key:"signId",prop:"signId",width:"100"},{default:a(o=>[s("span",null,u(o.row.signId),1),e(K,{style:{cursor:"pointer","margin-left":"4px"},onClick:Y=>t(q)(o.row.signId)},{default:a(()=>[e(Q)]),_:2},1032,["onClick"])]),_:1}),e(I,{label:"信号信息",align:"center",width:"160","show-overflow-tooltip":!0},{default:a(o=>[p(" 类型："),o.row.signType==0?(n(),d("span",wl,"买入")):m("",!0),o.row.signType==1?(n(),d("span",hl,"卖出")):m("",!0),bl,p(" 指导价："),o.row.price1?(n(),d("span",vl,u(o.row.price1),1)):(n(),d("span",kl,"-")),xl,p(" 仓位："),o.row.position==.25?(n(),d("span",Il,"1/4仓")):o.row.position==.5?(n(),d("span",Sl,"1/2仓")):o.row.position==1?(n(),d("span",Tl,"全仓")):(n(),d("span",Pl,"-"))]),_:1}),e(I,{label:"跟投股票",align:"center",width:"180"},{default:a(o=>[o.row.stockCode?(n(),d("span",Vl,u(o.row.stockName)+"("+u(o.row.stockCode)+")",1)):m("",!0)]),_:1}),e(I,{label:"状态",align:"center",width:"80"},{default:a(o=>[o.row.pendingStatus==0?(n(),d("span",Cl,"待成交")):m("",!0),o.row.pendingStatus==1?(n(),d("span",$l,"已完成")):m("",!0)]),_:1}),e(I,{fixed:"right",label:"操作",align:"center",width:"150","class-name":"small-padding fixed-width"},{default:a(o=>[o.row.followStatus!=2&&o.row.isConfigured&&o.row.pendingStatus==0&&o.row.signType==0?(n(),S(ae,{key:0,content:"买入",placement:"top"},{default:a(()=>[F((n(),S(R,{type:"success",onClick:Y=>Z(o.row,"买入")},{default:a(()=>[p("买入")]),_:2},1032,["onClick"])),[[ie,["handleBuy"]]])]),_:2},1024)):m("",!0),o.row.followStatus!=2&&o.row.isConfigured&&o.row.pendingStatus==0&&o.row.signType==1?(n(),S(ae,{key:1,content:"卖出",placement:"top"},{default:a(()=>[F((n(),S(R,{type:"primary",onClick:Y=>Z(o.row,"卖出")},{default:a(()=>[p("卖出")]),_:2},1032,["onClick"])),[[ie,["handleBuy"]]])]),_:2},1024)):m("",!0),o.row.pendingStatus==0?F((n(),S(R,{key:2,type:"danger",onClick:Y=>X(o.row)},{default:a(()=>[p("撤单")]),_:2},1032,["onClick"])),[[ie,["revoke"]]]):m("",!0)]),_:1})]),_:1},8,["data","onHeaderDragend"])),[[ke,t(x)]]),F(e(ce,{total:t(C),onPagination:O,page:t(y).pageNo,"onUpdate:page":r[14]||(r[14]=o=>t(y).pageNo=o),limit:t(y).pageSize,"onUpdate:limit":r[15]||(r[15]=o=>t(y).pageSize=o)},null,8,["total","page","limit"]),[[ve,t(C)>0]])]),_:1})]),_:1}),e(sl,{visible:t(V),title:t(E),idStr:t(D),signId:t(L),onClose:r[16]||(r[16]=o=>V.value=!1),onSuccess:O,ref_key:"trustBuyRef",ref:G},null,8,["visible","title","idStr","signId"])])}}});export{Kl as default};
