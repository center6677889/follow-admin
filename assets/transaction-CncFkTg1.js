import{P as ie,_ as se,B as pe,a as me,d as fe,r as D,C as j,H as ye,I as ce,e as m,J as _e,c as w,o as y,f as e,h as t,K as E,k as o,l as b,D as z,n as u,i as we,A as i,j as v,N as be,m as c,s as ge,t as ke}from"./index-BXRoTRPN.js";import{u as he}from"./useCopy-CSzW9GjL.js";import{u as ve}from"./useTableColumnWidth-CTSg-whZ.js";function Ie(I){return ie({url:"/follow/trading/list",method:"post",data:I})}const _=I=>(ge("data-v-a498f6a0"),I=I(),ke(),I),Ve={class:"app-container"},Ce=_(()=>c("br",null,null,-1)),xe=_(()=>c("br",null,null,-1)),Te={key:0},De=_(()=>c("br",null,null,-1)),Se=_(()=>c("br",null,null,-1)),Ue={key:1},Ne=_(()=>c("br",null,null,-1)),Oe=_(()=>c("br",null,null,-1)),Pe=_(()=>c("br",null,null,-1)),Ke=_(()=>c("br",null,null,-1)),Re=_(()=>c("br",null,null,-1)),$e={key:0,style:{color:"#63a103"}},qe={key:1,style:{color:"#da0114"}},Be={key:0},Me={key:1},Ye={key:2},Ae={key:0},Fe=_(()=>c("br",null,null,-1)),Le={key:1},He=_(()=>c("br",null,null,-1)),je=pe({name:"User"}),Ee=Object.assign(je,{setup(I){var R,$,q,B,M,Y,A,F;const{copyText:g}=he(),{tableRef:Q,handleHeaderDragend:W,applyStoredColumnWidths:J}=ve("transaction-table"),S=me(),{proxy:G}=fe(),K=D([]),N=D(!0),O=D(0),C=D([]),x=D([]);j(ye().listBank);const X={0:"每日",1:"7日",2:"16日",3:"38日",4:"108日",5:"180日",6:"360日"},Z=j({form:{},queryParams:{pageNo:1,pageSize:10,followRecordId:(($=(R=S.currentRoute.value)==null?void 0:R.query)==null?void 0:$.followRecordId)||void 0,positionId:((B=(q=S.currentRoute.value)==null?void 0:q.query)==null?void 0:B.positionId)||void 0,userId:((Y=(M=S.currentRoute.value)==null?void 0:M.query)==null?void 0:Y.userId)||void 0,tradingOrderSn:((F=(A=S.currentRoute.value)==null?void 0:A.query)==null?void 0:F.tradingOrderSn)||void 0},tempInfo:{}}),{queryParams:a,form:ze,rules:Qe,tempInfo:We,bankrules:Je,bankform:Ge}=ce(Z);function P(){N.value=!0,Ie(ee(a.value,C.value,x.value)).then(T=>{N.value=!1,K.value=T.data.records,O.value=T.data.total,J()})}function ee(T,r,s){let n=T;return n.params=typeof n.params=="object"&&n.params!==null&&!Array.isArray(n.params)?n.params:{},r=Array.isArray(r)?r:[],n.tradingTimeStart=r[0]&&r[0]+" 00:00:00",n.tradingTimeEnd=r[1]&&r[1]+" 23:59:59",s=Array.isArray(s)?s:[],n.finishTimeStart=s[0]&&s[0]+" 00:00:00",n.finishTimeEnd=s[1]&&s[1]+" 23:59:59",n}function f(){a.value.pageNo=1,P()}function le(){C.value=[],x.value=[],G.resetForm("queryRef"),f()}return P(),(T,r)=>{const s=m("el-input"),n=m("el-form-item"),p=m("el-option"),U=m("el-select"),L=m("el-date-picker"),H=m("el-button"),oe=m("el-form"),k=m("CopyDocument"),h=m("el-icon"),d=m("el-table-column"),te=m("el-tag"),re=m("el-table"),ae=m("pagination"),ne=m("el-col"),de=m("el-row"),ue=_e("loading");return y(),w("div",Ve,[e(de,{gutter:20},{default:t(()=>[e(ne,{xs:24},{default:t(()=>[e(oe,{model:o(a),ref:"queryRef",inline:!0},{default:t(()=>[e(n,{label:"交易记录",prop:"tradingIdOrOrderSn"},{default:t(()=>[e(s,{modelValue:o(a).tradingIdOrOrderSn,"onUpdate:modelValue":r[0]||(r[0]=l=>o(a).tradingIdOrOrderSn=l),placeholder:"请输入交易记录",clearable:"",style:{width:"150px"},onKeyup:b(f,["enter"])},null,8,["modelValue"])]),_:1}),e(n,{label:"用户查询",prop:"userId"},{default:t(()=>[e(s,{modelValue:o(a).userId,"onUpdate:modelValue":r[1]||(r[1]=l=>o(a).userId=l),modelModifiers:{number:!0},type:"number",placeholder:"请输入用户ID",clearable:"",style:{width:"150px"},onKeyup:b(f,["enter"])},null,8,["modelValue"])]),_:1}),e(n,{label:"持仓ID",prop:"positionId"},{default:t(()=>[e(s,{modelValue:o(a).positionId,"onUpdate:modelValue":r[2]||(r[2]=l=>o(a).positionId=l),modelModifiers:{number:!0},type:"number",placeholder:"请输入持仓ID",clearable:"",style:{width:"150px"},onKeyup:b(f,["enter"])},null,8,["modelValue"])]),_:1}),e(n,{label:"跟投ID",prop:"followRecordId"},{default:t(()=>[e(s,{modelValue:o(a).followRecordId,"onUpdate:modelValue":r[3]||(r[3]=l=>o(a).followRecordId=l),modelModifiers:{number:!0},type:"number",placeholder:"请输入跟投ID",clearable:"",style:{width:"150px"},onKeyup:b(f,["enter"])},null,8,["modelValue"])]),_:1}),e(n,{label:"交易单号",prop:"tradingOrderSn"},{default:t(()=>[e(s,{modelValue:o(a).tradingOrderSn,"onUpdate:modelValue":r[4]||(r[4]=l=>o(a).tradingOrderSn=l),placeholder:"请输入交易单号",clearable:"",style:{width:"150px"},onKeyup:b(f,["enter"])},null,8,["modelValue"])]),_:1}),e(n,{label:"导师查询",prop:"tutor"},{default:t(()=>[e(s,{modelValue:o(a).tutor,"onUpdate:modelValue":r[5]||(r[5]=l=>o(a).tutor=l),placeholder:"请输入导师ID或导师名称",clearable:"",style:{width:"180px"},onKeyup:b(f,["enter"])},null,8,["modelValue"])]),_:1}),e(n,{label:"跟投信号ID",prop:"signId"},{default:t(()=>[e(s,{modelValue:o(a).signId,"onUpdate:modelValue":r[6]||(r[6]=l=>o(a).signId=l),modelModifiers:{number:!0},ype:"number",placeholder:"请输入跟投信号ID",clearable:"",style:{width:"150px"},onKeyup:b(f,["enter"])},null,8,["modelValue"])]),_:1}),e(n,{label:"信号类型",prop:"signType"},{default:t(()=>[e(U,{modelValue:o(a).signType,"onUpdate:modelValue":r[7]||(r[7]=l=>o(a).signType=l),style:{width:"150px"},placeholder:"全部"},{default:t(()=>[e(p,{key:"0",label:"全部",value:""}),e(p,{key:"1",label:"买入",value:0}),e(p,{key:"2",label:"卖出",value:1})]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"交易类型",prop:"transferType"},{default:t(()=>[e(U,{modelValue:o(a).transferType,"onUpdate:modelValue":r[8]||(r[8]=l=>o(a).transferType=l),style:{width:"150px"},placeholder:"全部"},{default:t(()=>[e(p,{key:"0",label:"全部",value:""}),e(p,{key:"1",label:"买入",value:0}),e(p,{key:"2",label:"卖出",value:1})]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"跟投股票",prop:"stockCodeOrName"},{default:t(()=>[e(s,{modelValue:o(a).stockCodeOrName,"onUpdate:modelValue":r[9]||(r[9]=l=>o(a).stockCodeOrName=l),placeholder:"请输入股票名称或代码",clearable:"",onKeyup:b(f,["enter"])},null,8,["modelValue"])]),_:1}),e(n,{label:"实际成交时间",style:{width:"308px"}},{default:t(()=>[e(L,{modelValue:o(C),"onUpdate:modelValue":r[10]||(r[10]=l=>z(C)?C.value=l:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),e(n,{label:"显示成交时间",style:{width:"308px"}},{default:t(()=>[e(L,{modelValue:o(x),"onUpdate:modelValue":r[11]||(r[11]=l=>z(x)?x.value=l:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),e(n,{label:"公域/私域",prop:"domainType"},{default:t(()=>[e(U,{modelValue:o(a).domainType,"onUpdate:modelValue":r[12]||(r[12]=l=>o(a).domainType=l),style:{width:"150px"},placeholder:"全部"},{default:t(()=>[e(p,{key:"0",label:"全部",value:""}),e(p,{key:"1",label:"公域",value:0}),e(p,{key:"2",label:"私域",value:1})]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"项目",prop:"itemType"},{default:t(()=>[e(U,{modelValue:o(a).itemType,"onUpdate:modelValue":r[13]||(r[13]=l=>o(a).itemType=l),style:{width:"150px"},placeholder:"全部"},{default:t(()=>[e(p,{key:"0",label:"全部",value:""}),e(p,{key:"1",label:"1日跟投",value:0}),e(p,{key:"2",label:"7日跟投",value:1}),e(p,{key:"3",label:"16日跟投",value:2}),e(p,{key:"4",label:"38日跟投",value:3}),e(p,{key:"5",label:"108日跟投",value:4}),e(p,{key:"6",label:"180日跟投",value:5}),e(p,{key:"7",label:"360日跟投",value:6})]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"操作人",prop:"operator"},{default:t(()=>[e(s,{modelValue:o(a).operator,"onUpdate:modelValue":r[14]||(r[14]=l=>o(a).operator=l),placeholder:"请输入管理员后台账号",clearable:"",onKeyup:b(f,["enter"])},null,8,["modelValue"])]),_:1}),e(n,null,{default:t(()=>[e(H,{type:"primary",icon:"Search",onClick:f},{default:t(()=>[u("查询")]),_:1}),e(H,{icon:"Refresh",onClick:le},{default:t(()=>[u("重置")]),_:1})]),_:1})]),_:1},8,["model"]),E((y(),we(re,{border:"",data:o(K),onHeaderDragend:o(W),ref_key:"tableRef",ref:Q},{default:t(()=>[e(d,{label:"交易记录",width:"300",align:"center"},{default:t(l=>[u(" ID: "+i(l.row.id)+" ",1),e(h,{style:{cursor:"pointer","margin-left":"4px"},onClick:V=>o(g)(l.row.id)},{default:t(()=>[e(k)]),_:2},1032,["onClick"]),Ce,u(" 交易单号: "+i(l.row.tradingOrderSn)+" ",1),e(h,{style:{cursor:"pointer","margin-left":"4px"},onClick:V=>o(g)(l.row.tradingOrderSn)},{default:t(()=>[e(k)]),_:2},1032,["onClick"]),xe]),_:1}),e(d,{label:"用户信息",align:"center",width:"150","show-overflow-tooltip":!0},{default:t(l=>[l.row.userId?(y(),w("span",Te,[u(i(l.row.realName?l.row.realName:l.row.nickname),1),De,u(" "+i(l.row.userId),1),e(h,{style:{cursor:"pointer","margin-left":"4px"},onClick:V=>o(g)(l.row.userId)},{default:t(()=>[e(k)]),_:2},1032,["onClick"]),Se,u(" L"+i(l.row.levelId)+"-"+i(l.row.levelName),1)])):(y(),w("span",Ue,"-"))]),_:1}),e(d,{label:"关联数据",width:"170",align:"center"},{default:t(l=>[u(" 持仓ID: "+i(l.row.positionId)+" ",1),e(h,{style:{cursor:"pointer","margin-left":"4px"},onClick:V=>o(g)(l.row.positionId)},{default:t(()=>[e(k)]),_:2},1032,["onClick"]),Ne,u(" 委托ID: "+i(l.row.pendingId)+" ",1),e(h,{style:{cursor:"pointer","margin-left":"4px"},onClick:V=>o(g)(l.row.pendingId)},{default:t(()=>[e(k)]),_:2},1032,["onClick"]),Oe,u(" 跟投ID: "+i(l.row.followRecordId)+" ",1),e(h,{style:{cursor:"pointer","margin-left":"4px"},onClick:V=>o(g)(l.row.followRecordId)},{default:t(()=>[e(k)]),_:2},1032,["onClick"]),Pe,u(" 信号ID: "+i(l.row.signId)+" ",1),e(h,{style:{cursor:"pointer","margin-left":"4px"},onClick:V=>o(g)(l.row.signId)},{default:t(()=>[e(k)]),_:2},1032,["onClick"]),Ke]),_:1}),e(d,{label:"导师信息",align:"center",width:"120"},{default:t(l=>[u(i(l.row.tutorName)+"（"+i(l.row.tutorId)+"） ",1),Re,e(te,{type:"success"},{default:t(()=>[u(i(X[l.row.itemType]),1)]),_:2},1024)]),_:1}),e(d,{label:"信号类型",width:"80",align:"center"},{default:t(l=>[l.row.signType==0?(y(),w("span",$e,"买入")):v("",!0),l.row.signType==1?(y(),w("span",qe,"卖出")):v("",!0)]),_:1}),e(d,{label:"仓位",width:"60",align:"center"},{default:t(l=>[l.row.tradingPosition==.25?(y(),w("span",Be,"1/4仓")):v("",!0),l.row.tradingPosition==.5?(y(),w("span",Me,"1/2仓")):v("",!0),l.row.tradingPosition==1?(y(),w("span",Ye,"全仓")):v("",!0)]),_:1}),e(d,{label:"跟投股票",width:"160",align:"center","show-overflow-tooltip":!0},{default:t(l=>[u(i(l.row.stockName+"("+l.row.stockCode+")"),1)]),_:1}),e(d,{label:"交易价格",align:"center","show-overflow-tooltip":!0},{default:t(l=>[l.row.stockType=="hk"?(y(),w("span",Ae,[u("HK$"+i(l.row.originalTradingPrice),1),Fe])):v("",!0),l.row.stockType=="us"?(y(),w("span",Le,[u("$"+i(l.row.originalTradingPrice),1),He])):v("",!0),u(" ￥"+i(l.row.buyingPrice.toFixed(2)),1)]),_:1}),e(d,{label:"交易股数",align:"center",key:"buyingShares",prop:"buyingShares","show-overflow-tooltip":!0}),e(d,{label:"交易金额",align:"center","show-overflow-tooltip":!0},{default:t(l=>[u(i((l.row.afCurrentFollowSum-l.row.beCurrentFollowSum).toFixed(2)),1)]),_:1}),e(d,{label:"成本价格",width:"100",align:"center",key:"thenBuyingCostPrice",prop:"thenBuyingCostPrice","show-overflow-tooltip":!0}),e(d,{label:"卖出盈亏",width:"100",align:"center",key:"saleProfitLoss",prop:"saleProfitLoss","show-overflow-tooltip":!0}),e(d,{label:"手续费",align:"center",key:"buyingFee",prop:"buyingFee","show-overflow-tooltip":!0}),e(d,{label:"印花税",align:"center",key:"buyingStampDuty",prop:"buyingStampDuty","show-overflow-tooltip":!0}),e(d,{label:"导师抽佣",align:"center",key:"tutorCommission",prop:"tutorCommission","show-overflow-tooltip":!0}),e(d,{label:"平台抽佣",align:"center",key:"platformCommission",prop:"platformCommission","show-overflow-tooltip":!0}),e(d,{label:"实际成交时间",align:"center",width:"160",key:"tradingTime",prop:"tradingTime","show-overflow-tooltip":!0}),e(d,{label:"显示成交时间",align:"center",width:"160",key:"finishTime",prop:"finishTime","show-overflow-tooltip":!0}),e(d,{label:"操作人",align:"center",width:"160",key:"operator",prop:"operator","show-overflow-tooltip":!0})]),_:1},8,["data","onHeaderDragend"])),[[ue,o(N)]]),E(e(ae,{total:o(O),onPagination:P,page:o(a).pageNo,"onUpdate:page":r[15]||(r[15]=l=>o(a).pageNo=l),limit:o(a).pageSize,"onUpdate:limit":r[16]||(r[16]=l=>o(a).pageSize=l)},null,8,["total","page","limit"]),[[be,o(O)>0]])]),_:1})]),_:1})])}}}),ll=se(Ee,[["__scopeId","data-v-a498f6a0"]]);export{ll as default};
