import{_ as Te,B as Pe,a as Se,d as Ne,r as V,C as Q,H as Re,I as Ae,e as i,J as W,c,o as s,f as e,h as t,K as E,k as o,l as G,D as X,n as y,N as Z,i as T,j as P,L as z,M as ee,A as q,m,s as De,t as Ie}from"./index-BXRoTRPN.js";import{u as Me}from"./useTableColumnWidth-CTSg-whZ.js";import{l as qe,u as $e,t as Ke,a as Le,b as Ye,c as ze}from"./list-DQG7AV__.js";import{i as Be}from"./index.full.common-CSg8mdfz.js";const S=A=>(De("data-v-1cb3c6ca"),A=A(),Ie(),A),Fe={class:"app-container"},Je={key:0},Oe={key:1},je=["src"],He={class:"table-agent"},Qe=S(()=>m("td",null," 项目名称 ",-1)),We=S(()=>m("td",null," 最小跟投资金 ",-1)),Ge=S(()=>m("td",null," 最大跟投资金 ",-1)),Xe=S(()=>m("td",null," 导师抽佣 ",-1)),Ze=S(()=>m("td",null," 平台抽佣 ",-1)),el=S(()=>m("td",null," 状态 ",-1)),ll={key:0,style:{"min-width":"100px"}},tl={key:1,style:{"min-width":"100px"}},al={key:0,style:{"text-align":"center"}},ol={key:1,style:{"text-align":"center"}},nl={class:"dialog-footer"},rl=Pe({name:"User"}),dl=Object.assign(rl,{setup(A){const{tableRef:le,handleHeaderDragend:te,applyStoredColumnWidths:ae}=Me("mentor/list-table");new Be.EluiChinaAreaDht.ChinaArea().chinaAreaflat,Se();const{proxy:w}=Ne(),B=V([]),g=V(!1),N=V(!0),oe=V(!0);V([]);const $=V(0),k=V(""),R=V([]);Q(Re().listCountry);const K={0:"每日",1:"7日",2:"16日",3:"38日",4:"108日",5:"180日",6:"360日"};var D=[];for(let d in K)D.push({itemType:Number(d),minAmount:void 0,maxAmount:void 0,tutorCommissionRatio:void 0,platformCommissionRatio:void 0,isEnabled:!1});const ne=Q({form:{avatarPic:void 0,tutorName:void 0,tutorProfile:void 0,domainType:void 0,privateInvitationCode:void 0,sort:void 0,experience:void 0,label:void 0,configuration:JSON.parse(JSON.stringify(D))},queryParams:{pageNo:1,pageSize:10,creator:void 0,domainType:void 0,isEnabled:void 0,tutor:void 0},tempInfo:{},rules:{accountType:[{required:!0,message:"请选择账号类型",trigger:"change"}],avatarPic:[{required:!0,message:"",trigger:"change"}],tutorName:[{required:!0,message:"导师名称不能为空",trigger:"blur"},{min:2,max:20,message:"导师名称长度必须介于 2 和 20 之间",trigger:"blur"}],tutorProfile:[{required:!0,message:"简介不能为空",trigger:"blur"}],experience:[{required:!0,message:"从业年限不能为空",trigger:"blur"}],domainType:[{required:!0,message:"请选择公域/私域",trigger:"change"}],label:[{required:!0,message:"标签不能为空",trigger:"blur"},{validator:ie,trigger:"blur"}]}}),re=V(""),{queryParams:p,form:r,rules:de,tempInfo:ul,bankform:il}=Ae(ne);function ue(d){return new Promise((a,n)=>{let u=new FileReader;u.readAsDataURL(d),u.onload=function(){r.value.avatarPic=u.result},u.onerror=function(f){n(f)},u.onloadend=function(){a(re.value)}})}function I(d){(d.key==="-"||d.key==="+")&&d.preventDefault()}function ie(d,a,n){a&&a.trim()&&a.split(",").map(f=>f.trim()).filter(f=>f.length>0).length>3?n(new Error("标签最多只能输入三个词")):n()}function x(){N.value=!0,qe(se(p.value,R.value)).then(d=>{N.value=!1,B.value=d.data.records,$.value=d.data.total,ae()})}function se(d,a){let n=d;return n.params=typeof n.params=="object"&&n.params!==null&&!Array.isArray(n.params)?n.params:{},a=Array.isArray(a)?a:[],n.createTimeStart=a[0]&&a[0]+" 00:00:00",n.createTimeEnd=a[1]&&a[1]+" 23:59:59",n}function pe(d){$e({id:d.id,status:d.isEnabled?1:0}).then(a=>{w.$modal.msgSuccess("修改成功"),g.value=!1,x()}).catch(a=>{x()})}function M(){p.value.pageNo=1,x()}function me(){R.value=[],w.resetForm("queryRef"),M()}function F(){r.value={avatarPic:void 0,tutorName:void 0,tutorProfile:void 0,domainType:void 0,privateInvitationCode:void 0,sort:void 0,experience:void 0,label:void 0,configuration:JSON.parse(JSON.stringify(D))},w.resetForm("mentorRef")}function fe(){F(),k.value="添加导师",g.value=!0}function ce(){g.value=!1}function _e(d){const a=d.id;w.$modal.confirm("是否确定删除导师？该操作不可撤回").then(function(){return Le({id:a})}).then(()=>{x(),w.$modal.msgSuccess("删除成功")}).catch(()=>{})}function be(d){N.value=!0,F(),d.id,Ke({id:d.id}).then(a=>{N.value=!1,r.value=a.data,r.value.id=a.data.id;for(let n=r.value.configuration.length;n<D.length;n++)r.value.configuration.push({itemType:Number(n),minAmount:void 0,maxAmount:void 0,tutorCommissionRatio:void 0,platformCommissionRatio:void 0,isEnabled:!1});g.value=!0,k.value="编辑导师"})}function ye(){w.$refs.mentorRef.validate(d=>{d&&(r.value.id!=null?Ye(r.value).then(a=>{w.$modal.msgSuccess("修改成功"),g.value=!1,x()}):ze(r.value).then(a=>{w.$modal.msgSuccess("新增成功"),g.value=!1,x()}))})}return x(),(d,a)=>{const n=i("el-input"),u=i("el-form-item"),f=i("el-option"),L=i("el-select"),ge=i("el-date-picker"),U=i("el-button"),J=i("el-form"),_=i("el-col"),C=i("el-row"),b=i("el-table-column"),he=i("el-tag"),O=i("el-switch"),j=i("el-tooltip"),ve=i("el-table"),Ve=i("pagination"),we=i("Plus"),ke=i("el-icon"),xe=i("el-upload"),H=i("el-tab-pane"),Ce=i("el-tabs"),Ue=i("el-dialog"),Y=W("hasPermi"),Ee=W("loading");return s(),c("div",Fe,[e(C,{gutter:20},{default:t(()=>[e(_,{xs:24},{default:t(()=>[E(e(J,{model:o(p),ref:"queryRef",inline:!0},{default:t(()=>[e(u,{label:"导师查询",prop:"tutor"},{default:t(()=>[e(n,{modelValue:o(p).tutor,"onUpdate:modelValue":a[0]||(a[0]=l=>o(p).tutor=l),placeholder:"请输入ID或名称",clearable:"",onKeyup:G(M,["enter"])},null,8,["modelValue"])]),_:1}),e(u,{label:"公域/私域",prop:"domainType"},{default:t(()=>[e(L,{modelValue:o(p).domainType,"onUpdate:modelValue":a[1]||(a[1]=l=>o(p).domainType=l),style:{width:"150px"},placeholder:"全部"},{default:t(()=>[e(f,{key:"0",label:"全部",value:""}),e(f,{key:"1",label:"公域",value:0}),e(f,{key:"2",label:"私域",value:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"导师状态",prop:"isEnabled"},{default:t(()=>[e(L,{modelValue:o(p).isEnabled,"onUpdate:modelValue":a[2]||(a[2]=l=>o(p).isEnabled=l),style:{width:"150px"},placeholder:"全部"},{default:t(()=>[e(f,{key:"0",label:"全部",value:""}),e(f,{key:"1",label:"可跟投",value:1}),e(f,{key:"2",label:"禁止跟投",value:0})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"创建人",prop:"creator"},{default:t(()=>[e(n,{modelValue:o(p).creator,"onUpdate:modelValue":a[3]||(a[3]=l=>o(p).creator=l),placeholder:"请输入管理员账号",clearable:"",onKeyup:G(M,["enter"])},null,8,["modelValue"])]),_:1}),e(u,{label:"创建时间",style:{width:"308px"}},{default:t(()=>[e(ge,{modelValue:o(R),"onUpdate:modelValue":a[4]||(a[4]=l=>X(R)?R.value=l:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),e(u,null,{default:t(()=>[e(U,{type:"primary",icon:"Search",onClick:M},{default:t(()=>[y("查询")]),_:1}),e(U,{icon:"Refresh",onClick:me},{default:t(()=>[y("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[Z,o(oe)]]),E((s(),T(C,{gutter:10,class:"mb8"},{default:t(()=>[e(_,{span:1.5},{default:t(()=>[e(U,{type:"primary",plain:"",icon:"Plus",onClick:a[5]||(a[5]=l=>fe("添加导师"))},{default:t(()=>[y("添加导师")]),_:1})]),_:1})]),_:1})),[[Y,["addMentor"]]]),E((s(),T(ve,{border:"",data:o(B),onHeaderDragend:o(te),ref_key:"tableRef",ref:le},{default:t(()=>[e(b,{label:"导师ID",align:"center",width:"80",key:"id",prop:"id","show-overflow-tooltip":!0}),e(b,{label:"导师名称",align:"center",width:"130",key:"tutorName",prop:"tutorName","show-overflow-tooltip":!0}),e(b,{label:"公域/私域",align:"center",width:"80"},{default:t(l=>[l.row.domainType==0?(s(),c("span",Je,"公域")):l.row.domainType==1?(s(),c("span",Oe,"私域")):P("",!0)]),_:1}),e(b,{label:"简介",align:"center",key:"tutorProfile",prop:"tutorProfile","show-overflow-tooltip":!0}),e(b,{label:"排序",align:"center",width:"80",key:"sort",prop:"sort","show-overflow-tooltip":!0}),e(b,{label:"开启项目",align:"center",width:"480",key:"itemType",prop:"itemType","show-overflow-tooltip":!0},{default:t(l=>[(s(!0),c(z,null,ee(l.row.configuration,h=>(s(),c(z,{key:h.id},[h.isEnabled?(s(),T(he,{key:0,type:"success",style:{margin:"0 3px"}},{default:t(()=>[y(q(K[h.itemType]),1)]),_:2},1024)):P("",!0)],64))),128))]),_:1}),e(b,{label:"跟投状态",align:"center",width:"80",key:"isEnabled",prop:"isEnabled"},{default:t(l=>[e(O,{size:"large",onChange:h=>pe(l.row),modelValue:l.row.isEnabled,"onUpdate:modelValue":h=>l.row.isEnabled=h},null,8,["onChange","modelValue","onUpdate:modelValue"])]),_:1}),e(b,{label:"创建时间",align:"center",width:"160",key:"createTime",prop:"createTime","show-overflow-tooltip":!0}),e(b,{label:"创建人",align:"center",width:"80",key:"creator",prop:"creator","show-overflow-tooltip":!0}),e(b,{fixed:"right",label:"操作",align:"center",width:"150","class-name":"small-padding fixed-width"},{default:t(l=>[e(j,{disabled:"true",content:"编辑",placement:"top"},{default:t(()=>[E((s(),T(U,{type:"primary",onClick:h=>be(l.row)},{default:t(()=>[y("编辑")]),_:2},1032,["onClick"])),[[Y,["editMentor"]]])]),_:2},1024),e(j,{disabled:"true",content:"删除",placement:"top"},{default:t(()=>[E((s(),T(U,{type:"danger",onClick:h=>_e(l.row)},{default:t(()=>[y("删除")]),_:2},1032,["onClick"])),[[Y,["delMentor"]]])]),_:2},1024)]),_:1})]),_:1},8,["data","onHeaderDragend"])),[[Ee,o(N)]]),E(e(Ve,{total:o($),onPagination:x,page:o(p).pageNo,"onUpdate:page":a[6]||(a[6]=l=>o(p).pageNo=l),limit:o(p).pageSize,"onUpdate:limit":a[7]||(a[7]=l=>o(p).pageSize=l)},null,8,["total","page","limit"]),[[Z,o($)>0]])]),_:1})]),_:1}),e(Ue,{title:o(k),modelValue:o(g),"onUpdate:modelValue":a[15]||(a[15]=l=>X(g)?g.value=l:null),width:o(k)=="编辑导师"?"1100px":"840px","append-to-body":""},{footer:t(()=>[m("div",nl,[e(U,{type:"primary",onClick:ye},{default:t(()=>[y("确 定")]),_:1}),e(U,{onClick:ce},{default:t(()=>[y("取 消")]),_:1})])]),default:t(()=>[e(J,{model:o(r),rules:o(de),ref:"mentorRef","label-width":"90px"},{default:t(()=>[e(Ce,{type:"border-card"},{default:t(()=>[e(H,{label:"导师头像"},{default:t(()=>[e(C,null,{default:t(()=>[e(_,{span:24},{default:t(()=>[e(u,{label:"导师头像",prop:"avatarPic"},{default:t(()=>[e(xe,{class:"avatar-uploader",style:{"background-color":"#EEEEEE"},action:"/","show-file-list":!1,"before-upload":ue},{default:t(()=>[o(r).avatarPic?(s(),c("img",{key:0,style:{width:"200px"},src:o(r).avatarPic,class:"avatar"},null,8,je)):(s(),T(ke,{key:1,class:"avatar-uploader-icon"},{default:t(()=>[e(we)]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(_,{span:24},{default:t(()=>[e(u,{label:"导师名称",prop:"tutorName"},{default:t(()=>[e(n,{modelValue:o(r).tutorName,"onUpdate:modelValue":a[8]||(a[8]=l=>o(r).tutorName=l),placeholder:"请输入导师名称",maxlength:"100"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(_,{span:24},{default:t(()=>[e(u,{label:"简介",prop:"tutorProfile"},{default:t(()=>[e(n,{type:"textarea",placeholder:"请输入内容",modelValue:o(r).tutorProfile,"onUpdate:modelValue":a[9]||(a[9]=l=>o(r).tutorProfile=l),maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(_,{span:12},{default:t(()=>[e(u,{label:"公域/私域",prop:"domainType"},{default:t(()=>[e(L,{modelValue:o(r).domainType,"onUpdate:modelValue":a[10]||(a[10]=l=>o(r).domainType=l),placeholder:"请选择"},{default:t(()=>[e(f,{key:"1",label:"公域",value:0}),e(f,{key:"2",label:"私域",value:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(_,{span:12},{default:t(()=>[e(u,{label:"私域邀请码","label-width":"100px",prop:"privateInvitationCode"},{default:t(()=>[e(n,{modelValue:o(r).privateInvitationCode,"onUpdate:modelValue":a[11]||(a[11]=l=>o(r).privateInvitationCode=l),placeholder:"请输入私域邀请码",maxlength:"100"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(_,{span:12},{default:t(()=>[e(u,{label:"排序",prop:"sort"},{default:t(()=>[e(n,{modelValue:o(r).sort,"onUpdate:modelValue":a[12]||(a[12]=l=>o(r).sort=l),modelModifiers:{number:!0},placeholder:"请输入排序",type:"number",maxlength:"100"},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{span:12},{default:t(()=>[e(u,{label:"从业年限","label-width":"100px",prop:"experience"},{default:t(()=>[e(n,{modelValue:o(r).experience,"onUpdate:modelValue":a[13]||(a[13]=l=>o(r).experience=l),modelModifiers:{number:!0},placeholder:"请输入从业年限",type:"number",maxlength:"100"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(_,{span:24},{default:t(()=>[e(u,{label:"标签",prop:"label"},{default:t(()=>[e(n,{modelValue:o(r).label,"onUpdate:modelValue":a[14]||(a[14]=l=>o(r).label=l),placeholder:"金牌导师,专业操盘手,最多三个标签",maxlength:"500"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(H,{label:"项目配置"},{default:t(()=>[m("table",He,[m("tr",null,[Qe,We,Ge,Xe,Ze,el,o(k)=="编辑导师"?(s(),c("td",ll," 上月收益 ")):P("",!0),o(k)=="编辑导师"?(s(),c("td",tl," 上月胜率 ")):P("",!0)]),(s(!0),c(z,null,ee(o(r).configuration,(l,h)=>(s(),c("tr",{key:l.itemType},[m("td",null,q(K[l.itemType]),1),m("td",null,[e(n,{placeholder:"请输入",type:"number",style:{width:"100px"},modelValue:l.minAmount,"onUpdate:modelValue":v=>l.minAmount=v,modelModifiers:{number:!0},onKeypress:I},null,8,["modelValue","onUpdate:modelValue"])]),m("td",null,[e(n,{placeholder:"请输入",type:"number",style:{width:"100px"},modelValue:l.maxAmount,"onUpdate:modelValue":v=>l.maxAmount=v,modelModifiers:{number:!0},onKeypress:I},null,8,["modelValue","onUpdate:modelValue"])]),m("td",null,[e(n,{placeholder:"请输入",type:"number",style:{width:"140px"},modelValue:l.tutorCommissionRatio,"onUpdate:modelValue":v=>l.tutorCommissionRatio=v,modelModifiers:{number:!0},onKeypress:I},{append:t(()=>[y("%")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),m("td",null,[e(n,{placeholder:"请输入",type:"number",style:{width:"140px"},modelValue:l.platformCommissionRatio,"onUpdate:modelValue":v=>l.platformCommissionRatio=v,modelModifiers:{number:!0},onKeypress:I},{append:t(()=>[y("%")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),m("td",null,[e(O,{size:"large",modelValue:l.isEnabled,"onUpdate:modelValue":v=>l.isEnabled=v},null,8,["modelValue","onUpdate:modelValue"])]),o(k)=="编辑导师"?(s(),c("td",al,q(l.monthYield||l.monthYield==0?l.monthYield:"-"),1)):P("",!0),o(k)=="编辑导师"?(s(),c("td",ol,q(l.winRate||l.winRate==0?l.winRate+"%":"-"),1)):P("",!0)]))),128))])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue","width"])])}}}),cl=Te(dl,[["__scopeId","data-v-1cb3c6ca"]]);export{cl as default};
