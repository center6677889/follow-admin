import{P as O,_ as G,B as X,a as Z,d as $,r as m,C as V,H as ee,I as te,e as d,J as oe,c as T,o as f,f as e,h as n,K as b,k as o,l as h,L as ae,M as le,i as D,D as ne,n as x,N,m as S}from"./index-BXRoTRPN.js";import{u as re}from"./useTableColumnWidth-CTSg-whZ.js";function de(w){return O({url:"/tutor/changeRecord/list",method:"post",data:w})}const ue={class:"app-container"},pe=["innerHTML"],se=["innerHTML"],ie=X({name:"User"}),ce=Object.assign(ie,{setup(w){const{tableRef:H,handleHeaderDragend:L,applyStoredColumnWidths:M}=re("mentor/changeRecord-table");Z();const{proxy:U}=$(),v=m([]),_=m(!0),R=m(!0),g=m(0),i=m([]),B=V(ee().tutorInfoChangeType),K=V({form:{},queryParams:{pageNo:1,pageSize:10,tutorId:void 0,operator:void 0,dataChangeTypeCode:void 0},tempInfo:{}}),{queryParams:l,form:me,rules:fe,tempInfo:_e,bankrules:ge,bankform:ye}=te(K);function y(){_.value=!0,de(q(l.value,i.value)).then(u=>{_.value=!1,v.value=u.data.records,g.value=u.data.total,M()})}function q(u,t){let r=u;return r.params=typeof r.params=="object"&&r.params!==null&&!Array.isArray(r.params)?r.params:{},t=Array.isArray(t)?t:[],r.timeStart=t[0]&&t[0]+" 00:00:00",r.timeEnd=t[1]&&t[1]+" 23:59:59",r}function c(){l.value.pageNo=1,y()}function z(){i.value=[],U.resetForm("queryRef"),l.value={pageNo:1,pageSize:10,tutorId:void 0,operator:void 0,dataChangeTypeCode:void 0},c()}function C(u){return console.log(u),u?u.replace(/\n/g,"<br>"):""}return y(),(u,t)=>{const r=d("el-input"),s=d("el-form-item"),k=d("el-option"),A=d("el-select"),P=d("el-date-picker"),I=d("el-button"),Y=d("el-form"),p=d("el-table-column"),E=d("el-table"),j=d("pagination"),F=d("el-col"),Q=d("el-row"),W=oe("loading");return f(),T("div",ue,[e(Q,{gutter:20},{default:n(()=>[e(F,{xs:24},{default:n(()=>[b(e(Y,{model:o(l),ref:"queryRef",inline:!0,"label-width":"68px"},{default:n(()=>[e(s,{label:"记录ID",prop:"id"},{default:n(()=>[e(r,{modelValue:o(l).id,"onUpdate:modelValue":t[0]||(t[0]=a=>o(l).id=a),modelModifiers:{number:!0},type:"number",placeholder:"请输入记录ID",clearable:"",style:{width:"160px"},onKeyup:h(c,["enter"])},null,8,["modelValue"])]),_:1}),e(s,{label:"导师查询",prop:"tutorId"},{default:n(()=>[e(r,{modelValue:o(l).tutorId,"onUpdate:modelValue":t[1]||(t[1]=a=>o(l).tutorId=a),placeholder:"请输入导师ID或导师名称",clearable:"",onKeyup:h(c,["enter"])},null,8,["modelValue"])]),_:1}),e(s,{label:"操作类型",prop:"dataChangeTypeCode"},{default:n(()=>[e(A,{modelValue:o(l).dataChangeTypeCode,"onUpdate:modelValue":t[2]||(t[2]=a=>o(l).dataChangeTypeCode=a),style:{width:"150px"},placeholder:"全部"},{default:n(()=>[e(k,{key:"0",label:"全部",value:""}),(f(!0),T(ae,null,le(o(B),(a,J)=>(f(),D(k,{key:J,label:a.name,value:a.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"修改人",prop:"operator"},{default:n(()=>[e(r,{modelValue:o(l).operator,"onUpdate:modelValue":t[3]||(t[3]=a=>o(l).operator=a),placeholder:"请输入修改人管理员账号",clearable:"",onKeyup:h(c,["enter"])},null,8,["modelValue"])]),_:1}),e(s,{label:"申请时间",style:{width:"308px"}},{default:n(()=>[e(P,{modelValue:o(i),"onUpdate:modelValue":t[4]||(t[4]=a=>ne(i)?i.value=a:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),e(s,null,{default:n(()=>[e(I,{type:"primary",icon:"Search",onClick:c},{default:n(()=>[x("查询")]),_:1}),e(I,{icon:"Refresh",onClick:z},{default:n(()=>[x("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[N,o(R)]]),b((f(),D(E,{border:"",data:o(v),onHeaderDragend:o(L),ref_key:"tableRef",ref:H},{default:n(()=>[e(p,{label:"记录ID",align:"center",key:"id",prop:"id",width:"80","show-overflow-tooltip":!0}),e(p,{label:"导师ID",align:"center",key:"tutorId",prop:"tutorId",width:"80","show-overflow-tooltip":!0}),e(p,{label:"操作类型",align:"center",key:"dataChangeTypeName",prop:"dataChangeTypeName",width:"140","show-overflow-tooltip":!0}),e(p,{label:"原始值",align:"center"},{default:n(a=>[S("div",{innerHTML:C(a.row.oldContent)},null,8,pe)]),_:1}),e(p,{label:"修改值",align:"center",key:"newContent",prop:"newContent","show-overflow-tooltip":!0},{default:n(a=>[S("div",{innerHTML:C(a.row.newContent)},null,8,se)]),_:1}),e(p,{label:"修改时间",align:"center",key:"createTime",prop:"createTime",width:"160","show-overflow-tooltip":!0}),e(p,{label:"修改人",align:"center",key:"operator",prop:"operator",width:"80","show-overflow-tooltip":!0})]),_:1},8,["data","onHeaderDragend"])),[[W,o(_)]]),b(e(j,{total:o(g),onPagination:y,page:o(l).pageNo,"onUpdate:page":t[5]||(t[5]=a=>o(l).pageNo=a),limit:o(l).pageSize,"onUpdate:limit":t[6]||(t[6]=a=>o(l).pageSize=a)},null,8,["total","page","limit"]),[[N,o(g)>0]])]),_:1})]),_:1})])}}}),we=G(ce,[["__scopeId","data-v-cbb01077"]]);export{we as default};
