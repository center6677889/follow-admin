import{_ as De,B as xe,a as Te,d as Ne,r as h,C as b,G as Re,H as re,I as qe,e as d,J as ne,c as w,o as p,f as l,h as o,K as S,k as a,l as Y,D as ue,n as i,N as ie,i as T,A as n,j as N,m as f,s as Ue,t as Ae}from"./index-BXRoTRPN.js";import{u as Fe}from"./useCopy-CSzW9GjL.js";import{l as Oe,c as Be}from"./record-CzaFZNul.js";import{u as Ye}from"./useTableColumnWidth-CTSg-whZ.js";const y=C=>(Ue("data-v-910be047"),C=C(),Ae(),C),$e={class:"app-container"},Ke=y(()=>f("br",null,null,-1)),Le=y(()=>f("br",null,null,-1)),Pe=y(()=>f("br",null,null,-1)),We=y(()=>f("br",null,null,-1)),je=y(()=>f("br",null,null,-1)),ze={key:0,style:{color:"#63a103"}},Ee={key:1,style:{color:"#63a103"}},He={key:2,style:{color:"#da0114"}},Me={key:0},Qe={key:1},Ge={key:2},Je={key:0},Xe={key:1},Ze={key:2},el=y(()=>f("br",null,null,-1)),ll=y(()=>f("br",null,null,-1)),ol=y(()=>f("br",null,null,-1)),tl=y(()=>f("br",null,null,-1)),al=y(()=>f("br",null,null,-1)),rl=y(()=>f("br",null,null,-1)),nl=xe({name:"User"}),ul=Object.assign(nl,{setup(C){var K,L,P,W,j,z,E,H,M,Q,G,J,X,Z,ee,le;const{copyText:R}=Fe(),{tableRef:de,handleHeaderDragend:se,applyStoredColumnWidths:pe}=Ye("record-table"),v=Te(),{proxy:q}=Ne(),me={0:"每日",1:"7日",2:"16日",3:"38日",4:"108日",5:"180日",6:"360日"},$=h([]),U=h(!0),ce=h(!0),A=h(0),g=h([]),I=h([]);b({open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Re()},url:"/prod-api/system/user/importData"});function _e(c){v.push({path:"/follow/transaction",query:{followRecordId:c.id}})}b([{label:"实盘",value:0},{label:"模拟",value:1}]),b([{label:"可登录",value:!0},{label:"不可登录",value:!1}]),b([{label:"可交易",value:!0},{label:"不可交易",value:!1}]),b([{label:"顶级代理",value:0}]),b(re().listCountry),b(re().listBank);const fe=b({form:{},queryParams:{pageNo:1,pageSize:10,id:void 0,accountType:(L=(K=v.currentRoute.value)==null?void 0:K.query)!=null&&L.accountType?Number((W=(P=v.currentRoute.value)==null?void 0:P.query)==null?void 0:W.accountType):void 0,tutorId:(z=(j=v.currentRoute.value)==null?void 0:j.query)!=null&&z.tutorId?Number((H=(E=v.currentRoute.value)==null?void 0:E.query)==null?void 0:H.tutorId):void 0,userId:(Q=(M=v.currentRoute.value)==null?void 0:M.query)!=null&&Q.userId?Number((J=(G=v.currentRoute.value)==null?void 0:G.query)==null?void 0:J.userId):void 0,agentId:void 0,descOrAsc:void 0,email:void 0,fundingStatus:void 0,invitationCode:(Z=(X=v.currentRoute.value)==null?void 0:X.query)!=null&&Z.invite?(le=(ee=v.currentRoute.value)==null?void 0:ee.query)==null?void 0:le.invite:void 0,loginEnable:void 0,orderBy:void 0,phone:void 0,realAuthStatus:void 0,realName:void 0,searchChildOfAgent:void 0,tradeEnable:void 0}}),{queryParams:u}=qe(fe);function V(){U.value=!0,Oe(ve(u.value,g.value,I.value)).then(c=>{U.value=!1,$.value=c.data.records,A.value=c.data.total,pe()})}function ye(c){q.$modal.confirm("确定要强制结束吗？").then(function(){return we(c)}).then(()=>{}).catch(()=>{})}function we(c){Be({followRecordId:c.id}).then(t=>{q.$modal.msgSuccess("操作成功"),V()})}function ve(c,t,_){let r=c;return r.params=typeof r.params=="object"&&r.params!==null&&!Array.isArray(r.params)?r.params:{},t=Array.isArray(t)?t:[],_=Array.isArray(_)?_:[],r.startFollowStartTime=t[0]&&t[0]+" 00:00:00",r.endFollowStartTime=t[1]&&t[1]+" 23:59:59",r.startFollowClosingTime=_[0]&&_[0]+" 00:00:00",r.endFollowClosingTime=_[1]&&_[1]+" 23:59:59",r}function k(){u.value.pageNo=1,V()}function be(){g.value=[],q.resetForm("queryRef"),k()}return V(),(c,t)=>{const _=d("el-input"),r=d("el-form-item"),s=d("el-option"),F=d("el-select"),oe=d("el-date-picker"),D=d("el-button"),he=d("el-form"),O=d("CopyDocument"),B=d("el-icon"),m=d("el-table-column"),ge=d("el-tag"),te=d("el-tooltip"),ke=d("el-table"),Se=d("pagination"),Ce=d("el-col"),Ie=d("el-row"),ae=ne("hasPermi"),Ve=ne("loading");return p(),w("div",$e,[l(Ie,{gutter:20},{default:o(()=>[l(Ce,{xs:24},{default:o(()=>[S(l(he,{model:a(u),ref:"queryRef",inline:!0},{default:o(()=>[l(r,{label:"跟投记录查询",prop:"followRecordIdOrderSn"},{default:o(()=>[l(_,{modelValue:a(u).followRecordIdOrderSn,"onUpdate:modelValue":t[0]||(t[0]=e=>a(u).followRecordIdOrderSn=e),placeholder:"请输入跟投记录ID或订单号",clearable:"",style:{width:"190px"},onKeyup:Y(k,["enter"])},null,8,["modelValue"])]),_:1}),l(r,{label:"用户查询",prop:"userId"},{default:o(()=>[l(_,{modelValue:a(u).userId,"onUpdate:modelValue":t[1]||(t[1]=e=>a(u).userId=e),type:"number",placeholder:"请输入用户ID",clearable:"",style:{width:"150px"},onKeyup:Y(k,["enter"])},null,8,["modelValue"])]),_:1}),l(r,{label:"导师查询",prop:"tutor"},{default:o(()=>[l(_,{modelValue:a(u).tutor,"onUpdate:modelValue":t[2]||(t[2]=e=>a(u).tutor=e),placeholder:"请输入导师ID或导师名称",clearable:"",style:{width:"180px"},onKeyup:Y(k,["enter"])},null,8,["modelValue"])]),_:1}),l(r,{label:"当前跟投状态",prop:"followStatus"},{default:o(()=>[l(F,{modelValue:a(u).followStatus,"onUpdate:modelValue":t[3]||(t[3]=e=>a(u).followStatus=e),style:{width:"150px"},placeholder:"全部"},{default:o(()=>[l(s,{key:"0",label:"全部",value:""}),l(s,{key:"1",label:"进行中",value:"0"}),l(s,{key:"2",label:"顺延",value:"1"}),l(s,{key:"3",label:"已结束",value:"2"})]),_:1},8,["modelValue"])]),_:1}),l(r,{label:"公域/私域",prop:"domainType"},{default:o(()=>[l(F,{modelValue:a(u).domainType,"onUpdate:modelValue":t[4]||(t[4]=e=>a(u).domainType=e),style:{width:"150px"},placeholder:"全部"},{default:o(()=>[l(s,{key:"0",label:"全部",value:""}),l(s,{key:"1",label:"公域",value:"0"}),l(s,{key:"2",label:"私域",value:"1"})]),_:1},8,["modelValue"])]),_:1}),l(r,{label:"项目",prop:"itemType"},{default:o(()=>[l(F,{modelValue:a(u).itemType,"onUpdate:modelValue":t[5]||(t[5]=e=>a(u).itemType=e),style:{width:"150px"},placeholder:"全部"},{default:o(()=>[l(s,{key:"0",label:"全部",value:""}),l(s,{key:"1",label:"1日跟投",value:0}),l(s,{key:"2",label:"7日跟投",value:1}),l(s,{key:"3",label:"16日跟投",value:2}),l(s,{key:"4",label:"38日跟投",value:3}),l(s,{key:"5",label:"108日跟投",value:4}),l(s,{key:"6",label:"180日跟投",value:5}),l(s,{key:"7",label:"360日跟投",value:6})]),_:1},8,["modelValue"])]),_:1}),l(r,{label:"跟投开始时间",style:{width:"308px"}},{default:o(()=>[l(oe,{modelValue:a(g),"onUpdate:modelValue":t[6]||(t[6]=e=>ue(g)?g.value=e:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),l(r,{label:"跟投结算时间",style:{width:"308px"}},{default:o(()=>[l(oe,{modelValue:a(I),"onUpdate:modelValue":t[7]||(t[7]=e=>ue(I)?I.value=e:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),l(r,null,{default:o(()=>[l(D,{type:"primary",icon:"Search",onClick:k},{default:o(()=>[i("查询")]),_:1}),l(D,{icon:"Refresh",onClick:be},{default:o(()=>[i("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[ie,a(ce)]]),S((p(),T(ke,{border:"",data:a($),onHeaderDragend:a(se),ref_key:"tableRef",ref:de},{default:o(()=>[l(m,{label:"跟投记录",width:"260",align:"center"},{default:o(e=>[i(" ID: "+n(e.row.id)+" ",1),l(B,{style:{cursor:"pointer","margin-left":"4px"},onClick:x=>a(R)(e.row.id)},{default:o(()=>[l(O)]),_:2},1032,["onClick"]),Ke,i(" 订单号: "+n(e.row.followOrderSn)+" ",1),l(B,{style:{cursor:"pointer","margin-left":"4px"},onClick:x=>a(R)(e.row.followOrderSn)},{default:o(()=>[l(O)]),_:2},1032,["onClick"]),Le]),_:1}),l(m,{label:"用户信息",width:"110",align:"center"},{default:o(e=>[i(n(e.row.realName?e.row.realName:e.row.nickname),1),Pe,i(" "+n(e.row.userId),1),l(B,{style:{cursor:"pointer","margin-left":"4px"},onClick:x=>a(R)(e.row.userId)},{default:o(()=>[l(O)]),_:2},1032,["onClick"]),We,i(" L"+n(e.row.levelId)+"-"+n(e.row.levelName),1)]),_:1}),l(m,{label:"导师信息",align:"center",width:"120","show-overflow-tooltip":!0},{default:o(e=>[i(n(e.row.tutorName)+"（"+n(e.row.tutorId)+"） ",1),je,l(ge,{type:"success"},{default:o(()=>[i(n(me[e.row.itemType]),1)]),_:2},1024)]),_:1}),l(m,{label:"开始跟投时间",align:"center",key:"followStartTime",prop:"followStartTime",width:"160"}),l(m,{label:"当前跟投状态",align:"center",width:"110"},{default:o(e=>[e.row.followStatus==0?(p(),w("span",ze,"进行中")):N("",!0),e.row.followStatus==1?(p(),w("span",Ee,"顺延")):N("",!0),e.row.followStatus==2?(p(),w("span",He,"已结束")):N("",!0)]),_:1}),l(m,{label:"剩余跟投天数(自然日)",align:"center",width:"120"},{default:o(e=>[e.row.followStatus==2?(p(),w("span",Me,"0")):e.row.remainingDays<=0?(p(),w("span",Qe,"0(已顺延"+n(e.row.remainingDays*-1)+"天）",1)):(p(),w("span",Ge,n(e.row.remainingDays),1))]),_:1}),l(m,{label:"剩余跟投天数(工作日)",align:"center",width:"120"},{default:o(e=>[e.row.followStatus==2?(p(),w("span",Je,"0")):e.row.remainingWorkDays<=0?(p(),w("span",Xe,"0(已顺延"+n(e.row.remainingWorkDays*-1)+"天）",1)):(p(),w("span",Ze,n(e.row.remainingWorkDays),1))]),_:1}),l(m,{label:"跟投结算时间",align:"center",key:"followClosingTime",prop:"followClosingTime",width:"160"}),l(m,{label:"跟投资金",width:"140",align:"center","show-overflow-tooltip":!0},{default:o(e=>[i(" 初始: "+n(e.row.initialFollowSum),1),el,i(" 当前: "+n(e.row.currentFollowSum),1),ll,i(" 退还: "+n(e.row.returnFollowSum),1),ol]),_:1}),l(m,{label:"抽佣",width:"140",align:"center","show-overflow-tooltip":!0},{default:o(e=>[i(" 导师: "+n(e.row.tutorCommission||"-"),1),tl,i(" 平台: "+n(e.row.platformCommission||"-"),1),al,i(" 总抽佣: "+n(e.row.platformCommission+e.row.tutorCommission||"-"),1),rl]),_:1}),l(m,{label:"系统盈亏",align:"center"},{default:o(e=>[i(n((e.row.initialFollowSum-e.row.returnFollowSum).toFixed(2)),1)]),_:1}),l(m,{fixed:"right",label:"操作",align:"center",width:"220","class-name":"small-padding fixed-width"},{default:o(e=>[l(te,{disabled:"true",content:"交易详情",placement:"top"},{default:o(()=>[S((p(),T(D,{type:"primary",onClick:x=>_e(e.row)},{default:o(()=>[i("交易详情")]),_:2},1032,["onClick"])),[[ae,["transaction"]]])]),_:2},1024),e.row.followStatus!=2?(p(),T(te,{key:0,disabled:"true",content:"强制结束",placement:"top"},{default:o(()=>[S((p(),T(D,{type:"danger",onClick:x=>ye(e.row)},{default:o(()=>[i("强制结束")]),_:2},1032,["onClick"])),[[ae,["onOver"]]])]),_:2},1024)):N("",!0)]),_:1})]),_:1},8,["data","onHeaderDragend"])),[[Ve,a(U)]]),S(l(Se,{total:a(A),onPagination:V,page:a(u).pageNo,"onUpdate:page":t[8]||(t[8]=e=>a(u).pageNo=e),limit:a(u).pageSize,"onUpdate:limit":t[9]||(t[9]=e=>a(u).pageSize=e)},null,8,["total","page","limit"]),[[ie,a(A)>0]])]),_:1})]),_:1})])}}}),ml=De(ul,[["__scopeId","data-v-910be047"]]);export{ml as default};
