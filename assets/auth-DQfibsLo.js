import{_ as we,B as xe,a as ke,d as Ie,r as n,C as J,G as Ce,I as Se,O as Ae,e as u,J as X,c as f,o as c,f as e,h as o,K as S,k as t,l as Z,D as H,n as g,j as x,A as p,N as ee,i as A,m as l,L as Ve,s as De,t as Ne}from"./index-BXRoTRPN.js";import{u as Te}from"./useTableColumnWidth-CTSg-whZ.js";import{r as Ee,h as Ue,g as qe}from"./user-Dhl3jA1d.js";import{i as Re}from"./index.full.common-CSg8mdfz.js";import{u as $e}from"./useCopy-CSzW9GjL.js";const r=T=>(De("data-v-c9989a3a"),T=T(),Ne(),T),Be={class:"app-container"},Fe={key:0,style:{"margin-left":"8px",color:"#409EFF"}},Le={key:0},Pe=r(()=>l("br",null,null,-1)),He=r(()=>l("br",null,null,-1)),ze={key:1},Ke={key:0,class:"red"},Me={key:1,class:"gra"},Ye={key:2,class:"green"},je={style:{"overflow-x":"auto","overflow-y":"hidden"}},Oe={style:{"border-collapse":"collapse",border:"1px solid #EEEEEE"}},Qe={key:0,class:"list-tab"},We=r(()=>l("td",{class:"title",style:{height:"160px","line-height":"160px"}},"正面",-1)),Ge={class:"ub ub-ver ub-ac ub-pc",style:{height:"160px",width:"460px"}},Je=r(()=>l("span",{style:{"margin-top":"10px"}},"点击查看",-1)),Xe=r(()=>l("td",{class:"title",style:{height:"160px","line-height":"160px"}},"背面",-1)),Ze={class:"ub ub-ver ub-ac ub-pc",style:{height:"160px",width:"460px"}},et=r(()=>l("span",{style:{"margin-top":"10px"}},"点击查看",-1)),tt={key:1,class:"list-tab"},lt=r(()=>l("td",{class:"title",style:{height:"160px","line-height":"160px"}},"手持证件",-1)),at={class:"ub ub-ver ub-ac ub-pc",style:{height:"160px",width:"460px"}},st=r(()=>l("span",{style:{"margin-top":"10px"}},"点击查看",-1)),ot=r(()=>l("td",{class:"title",style:{height:"160px","line-height":"160px"}},"签名",-1)),it={class:"ub ub-ver ub-ac ub-pc",style:{height:"160px",width:"460px"}},nt=r(()=>l("span",{style:{"margin-top":"10px"}},"点击查看",-1)),rt={class:"list-tab"},dt=r(()=>l("td",{class:"title ub-box",style:{padding:"0"}},"姓名",-1)),ut={class:"ub ub-ver ub-ac ub-pc",style:{height:"40px",width:"460px","line-height":"40px"}},ct=r(()=>l("td",{class:"title ub-box",style:{padding:"0"}},"性别",-1)),pt={class:"ub ub-ver ub-ac ub-pc",style:{height:"40px",width:"460px","line-height":"40px"}},ht={class:"list-tab"},_t=r(()=>l("td",{class:"title ub-box",style:{padding:"0"}},"姓(英文)",-1)),mt={class:"ub ub-ver ub-ac ub-pc",style:{height:"40px",width:"460px","line-height":"40px"}},bt=r(()=>l("td",{class:"title ub-box",style:{padding:"0"}},"名(英文)",-1)),gt={class:"ub ub-ver ub-ac ub-pc",style:{height:"40px",width:"460px","line-height":"40px"}},ft={class:"list-tab"},yt=r(()=>l("td",{class:"title ub-box",style:{padding:"0"}},"报税地区",-1)),vt={class:"ub ub-ver ub-ac ub-pc",style:{height:"40px",width:"460px","line-height":"40px"}},wt=r(()=>l("td",{class:"title ub-box",style:{padding:"0"}},"证件号码",-1)),xt={class:"ub ub-ver ub-ac ub-pc",style:{height:"40px",width:"460px","line-height":"40px"}},kt={class:"list-tab"},It=r(()=>l("td",{class:"title ub-box",style:{padding:"0"}},"出生日期",-1)),Ct={class:"ub ub-ver ub-ac ub-pc",style:{height:"40px",width:"460px","line-height":"40px"}},St=r(()=>l("td",{class:"title ub-box",style:{padding:"0"}},"有效期",-1)),At={class:"ub ub-ver ub-ac ub-pc",style:{height:"40px",width:"460px","line-height":"40px"}},Vt={class:"list-tab"},Dt=r(()=>l("td",{class:"title",style:{height:"160px","line-height":"160px","border-top":"none"}},"护照",-1)),Nt={class:"ub ub-ver ub-ac ub-pc",style:{height:"160px",width:"460px","border-top":"none"}},Tt=r(()=>l("span",{style:{"margin-top":"10px"}},"点击查看",-1)),Et=r(()=>l("td",{class:"title",style:{height:"160px","line-height":"160px"}},"签名",-1)),Ut={class:"ub ub-ver ub-ac ub-pc",style:{height:"160px",width:"460px","border-top":"none"}},qt=r(()=>l("span",{style:{"margin-top":"10px"}},"点击查看",-1)),Rt={class:"dialog-footer",style:{"text-align":"center"}},$t=xe({name:"User"}),Bt=Object.assign($t,{setup(T){var Y,j,O,Q;const{tableRef:te,handleHeaderDragend:le,applyStoredColumnWidths:ae}=Te("system/user/auth-table");new Re.EluiChinaAreaDht.ChinaArea().chinaAreaflat;const z=ke(),{proxy:E}=Ie(),{copyText:R}=$e(),K=n([]);n(!1),n(!1),n(!1);const se=n(!1);n(!1);const $=n(!0),oe=n(!0);n([]),n(!0),n(!0);const V=n(!1),B=n(0);n("");const D=n([]),ie=n([]);n(void 0),n([]),n([]),n([]),J({open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Ce()},url:"/prod-api/system/user/importData"});const ne=J({form:{},queryParams:{pageNo:1,pageSize:10,userId:(j=(Y=z.currentRoute.value)==null?void 0:Y.query)!=null&&j.id?(Q=(O=z.currentRoute.value)==null?void 0:O.query)==null?void 0:Q.id:void 0},tempInfo:{},bankform:{}}),{queryParams:h,form:Ft,tempInfo:i,bankform:Lt}=Se(ne);function y(){$.value=!0,Ee(re(h.value,D.value)).then(m=>{$.value=!1,K.value=m.data.records,B.value=m.data.total,ae()})}function re(m,s,q){let d=m;return d.params=typeof d.params=="object"&&d.params!==null&&!Array.isArray(d.params)?d.params:{},s=Array.isArray(s)?s:[],d.requestTimeStart=s[0]&&s[0]+" 00:00:00",d.requestTimeEnd=s[1]&&s[1]+" 23:59:59",d.operateTimeStart=s[0]&&s[0]+" 00:00:00",d.operateTimeEnd=s[1]&&s[1]+" 23:59:59",d}function U(){h.value.pageNo=1,y()}function de(){D.value=[],ie.value=[],E.resetForm("queryRef"),U()}function ue(m){Ue({id:m.id}).then(s=>{V.value=!0,i.value=s.data})}function M(m,s){E.$modal.confirm(s==2?"是否确定通过该用户实名审核？此操作不可恢复":"是否确定拒绝该用户实名审核？").then(function(){return ce(s,m)}).then(()=>{y(),E.$modal.msgSuccess("操作成功")}).catch(()=>{})}function ce(m,s){qe({id:s.id,realAuthStatus:m}).then(q=>{E.$modal.msgSuccess("操作成功"),se.value=!1,y()})}const v=n(null);let k=null;const w=n(0);function pe(){k&&(clearInterval(k),k=null),v.value?(w.value=v.value/1e3,k=setInterval(()=>{w.value>0&&w.value--,w.value===0&&(y(),w.value=v.value/1e3)},1e3),y()):w.value=0}return Ae(()=>{k&&clearInterval(k)}),y(),(m,s)=>{const q=u("el-input"),d=u("el-form-item"),he=u("el-date-picker"),b=u("el-option"),W=u("el-select"),I=u("el-button"),_e=u("el-form"),_=u("el-table-column"),F=u("CopyDocument"),L=u("el-icon"),G=u("el-tooltip"),me=u("el-table"),be=u("pagination"),ge=u("el-col"),fe=u("el-row"),C=u("el-image"),ye=u("el-dialog"),P=X("hasPermi"),ve=X("loading");return c(),f("div",Be,[e(fe,{gutter:20},{default:o(()=>[e(ge,{xs:24},{default:o(()=>[S(e(_e,{model:t(h),ref:"queryRef",inline:!0,"label-width":"68px"},{default:o(()=>[e(d,{label:"记录ID",prop:"id"},{default:o(()=>[e(q,{oninput:"if(value.length>6)value=value.slice(0,6)",type:"number",modelValue:t(h).id,"onUpdate:modelValue":s[0]||(s[0]=a=>t(h).id=a),modelModifiers:{number:!0},placeholder:"请输入记录ID",clearable:"",style:{width:"150px"},onKeyup:Z(U,["enter"])},null,8,["modelValue"])]),_:1}),e(d,{label:"会员查询",prop:"userId"},{default:o(()=>[e(q,{oninput:"if(value.length>6)value=value.slice(0,6)",type:"number",modelValue:t(h).userId,"onUpdate:modelValue":s[1]||(s[1]=a=>t(h).userId=a),modelModifiers:{number:!0},placeholder:"请输入会员id",clearable:"",style:{width:"150px"},onKeyup:Z(U,["enter"])},null,8,["modelValue"])]),_:1}),e(d,{label:"申请时间",style:{width:"308px"}},{default:o(()=>[e(he,{modelValue:t(D),"onUpdate:modelValue":s[2]||(s[2]=a=>H(D)?D.value=a:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),e(d,{label:"审核状态",prop:"realAuthStatus"},{default:o(()=>[e(W,{modelValue:t(h).realAuthStatus,"onUpdate:modelValue":s[3]||(s[3]=a=>t(h).realAuthStatus=a),style:{width:"150px"},placeholder:"全部"},{default:o(()=>[e(b,{key:"0",label:"全部",value:""}),e(b,{key:"1",label:"审核中",value:"1"}),e(b,{key:"2",label:"已通过",value:"2"}),e(b,{key:"3",label:"不通过",value:"3"})]),_:1},8,["modelValue"])]),_:1}),e(d,null,{default:o(()=>[e(I,{type:"primary",icon:"Search",onClick:U},{default:o(()=>[g("搜索")]),_:1}),e(I,{icon:"Refresh",onClick:de},{default:o(()=>[g("重置")]),_:1})]),_:1}),e(d,{label:"自动刷新"},{default:o(()=>[e(W,{modelValue:t(v),"onUpdate:modelValue":s[4]||(s[4]=a=>H(v)?v.value=a:null),onChange:pe,style:{width:"120px"},placeholder:"关闭"},{default:o(()=>[e(b,{label:"关闭",value:null}),e(b,{label:"5秒",value:5e3}),e(b,{label:"10秒",value:1e4}),e(b,{label:"30秒",value:3e4}),e(b,{label:"1分钟",value:6e4}),e(b,{label:"3分钟",value:18e4}),e(b,{label:"5分钟",value:3e5})]),_:1},8,["modelValue"]),t(v)?(c(),f("span",Fe,p(t(w))+" 秒后自动刷新",1)):x("",!0)]),_:1})]),_:1},8,["model"]),[[ee,t(oe)]]),S((c(),A(me,{border:"",data:t(K),onHeaderDragend:t(le),ref_key:"tableRef",ref:te},{default:o(()=>[e(_,{label:"记录ID",align:"center",key:"id",prop:"id",width:"80","show-overflow-tooltip":!0}),e(_,{label:"用户信息",align:"center",width:"150","show-overflow-tooltip":!0},{default:o(a=>[a.row.userId?(c(),f("span",Le,[g(p(a.row.userRealName?a.row.userRealName:a.row.nickname),1),Pe,g(" "+p(a.row.userId),1),e(L,{style:{cursor:"pointer","margin-left":"4px"},onClick:N=>t(R)(a.row.userId)},{default:o(()=>[e(F)]),_:2},1032,["onClick"]),He,g(" L"+p(a.row.levelId)+"-"+p(a.row.levelName),1)])):(c(),f("span",ze,"-"))]),_:1}),e(_,{label:"证件号码",align:"center",width:"230","show-overflow-tooltip":!0},{default:o(a=>[g(p(a.row.certificateNumber)+" ",1),e(L,{style:{cursor:"pointer","margin-left":"4px"},onClick:N=>t(R)(a.row.certificateNumber)},{default:o(()=>[e(F)]),_:2},1032,["onClick"])]),_:1}),e(_,{label:"注册IP",align:"center",key:"regIp",prop:"regIp",width:"130","show-overflow-tooltip":!0}),e(_,{label:"注册地址",align:"center",key:"regAddress",width:"200",prop:"regAddress","show-overflow-tooltip":!0}),e(_,{label:"注册时间",align:"center",key:"regTime",prop:"regTime",width:"120"}),e(_,{label:"真实姓名",align:"center",width:"120"},{default:o(a=>[g(p(a.row.realName)+" ",1),e(L,{style:{cursor:"pointer","margin-left":"4px"},onClick:N=>t(R)(a.row.realName)},{default:o(()=>[e(F)]),_:2},1032,["onClick"])]),_:1}),e(_,{label:"证件信息",align:"center",width:"120"},{default:o(a=>[S((c(),A(I,{type:"primary",onClick:N=>ue(a.row)},{default:o(()=>[g("查看")]),_:2},1032,["onClick"])),[[P,["certificate"]]])]),_:1}),e(_,{label:"申请时间",align:"center",key:"requestTime",prop:"requestTime",width:"200"}),e(_,{label:"审核时间",align:"center",key:"operateTime",prop:"operateTime",width:"200"}),e(_,{label:"操作人",align:"center",key:"operator",prop:"operator",width:"120"}),e(_,{label:"状态",align:"center",width:"120"},{default:o(a=>[a.row.realAuthStatus==3?(c(),f("span",Ke,"审核拒绝")):x("",!0),a.row.realAuthStatus==1?(c(),f("span",Me,"审核中")):x("",!0),a.row.realAuthStatus==2?(c(),f("span",Ye,"审核通过")):x("",!0)]),_:1}),e(_,{fixed:"right",label:"操作",align:"center",width:"150","class-name":"small-padding fixed-width"},{default:o(a=>[a.row.realAuthStatus==1?(c(),A(G,{key:0,disabled:"true",content:"通过",placement:"top"},{default:o(()=>[S((c(),A(I,{type:"primary",onClick:N=>M(a.row,2)},{default:o(()=>[g("通过")]),_:2},1032,["onClick"])),[[P,["updateRealAuthStatus"]]])]),_:2},1024)):x("",!0),a.row.realAuthStatus==1?(c(),A(G,{key:1,disabled:"true",content:"拒绝",placement:"top"},{default:o(()=>[S((c(),A(I,{type:"danger",onClick:N=>M(a.row,3)},{default:o(()=>[g("拒绝")]),_:2},1032,["onClick"])),[[P,["updateRealAuthStatus"]]])]),_:2},1024)):x("",!0)]),_:1})]),_:1},8,["data","onHeaderDragend"])),[[ve,t($)]]),S(e(be,{total:t(B),onPagination:y,page:t(h).pageNo,"onUpdate:page":s[5]||(s[5]=a=>t(h).pageNo=a),limit:t(h).pageSize,"onUpdate:limit":s[6]||(s[6]=a=>t(h).pageSize=a)},null,8,["total","page","limit"]),[[ee,t(B)>0]])]),_:1})]),_:1}),e(ye,{title:"证件类型："+(t(i).certificateType==0?"身份证":"护照"),width:"1240px",modelValue:t(V),"onUpdate:modelValue":s[8]||(s[8]=a=>H(V)?V.value=a:null),"append-to-body":""},{footer:o(()=>[l("div",Rt,[e(I,{type:"primary",onClick:s[7]||(s[7]=a=>V.value=!1)},{default:o(()=>[g("确 定")]),_:1})])]),default:o(()=>[l("div",je,[l("table",Oe,[t(i).certificateType==0?(c(),f("tr",Qe,[We,l("td",Ge,[e(C,{style:{width:"210px",height:"100px"},"preview-src-list":[t(i).idFrontImg],src:t(i).idFrontImg,fit:"scale-down"},null,8,["preview-src-list","src"]),Je]),Xe,l("td",Ze,[e(C,{style:{width:"210px",height:"100px"},"preview-src-list":[t(i).idBackImg],src:t(i).idBackImg,fit:"scale-down"},null,8,["preview-src-list","src"]),et])])):x("",!0),t(i).certificateType==0?(c(),f("tr",tt,[lt,l("td",at,[e(C,{style:{width:"210px",height:"100px"},"preview-src-list":[t(i).idHandImg],src:t(i).idHandImg,fit:"scale-down"},null,8,["preview-src-list","src"]),st]),ot,l("td",it,[e(C,{style:{width:"210px",height:"100px"},"preview-src-list":[t(i).signature],src:t(i).signature,fit:"scale-down"},null,8,["preview-src-list","src"]),nt])])):(c(),f(Ve,{key:2},[l("tr",rt,[dt,l("td",ut,p(t(i).realName),1),ct,l("td",pt,p(t(i).gender==0?"男":"女"),1)]),l("tr",ht,[_t,l("td",mt,p(t(i).enLastName),1),bt,l("td",gt,p(t(i).enFirstName),1)]),l("tr",ft,[yt,l("td",vt,p(t(i).taxFilingArea),1),wt,l("td",xt,p(t(i).certificateNumber),1)]),l("tr",kt,[It,l("td",Ct,p(t(i).birthday),1),St,l("td",At,p(t(i).certificateValidityPeriod),1)]),l("tr",Vt,[Dt,l("td",Nt,[e(C,{style:{width:"140px",height:"100px"},"preview-src-list":[t(i).passportDataImg],src:t(i).passportDataImg,fit:"scale-down"},null,8,["preview-src-list","src"]),Tt]),Et,l("td",Ut,[e(C,{style:{width:"210px",height:"100px"},"preview-src-list":[t(i).signature],src:t(i).signature,fit:"scale-down"},null,8,["preview-src-list","src"]),qt])])],64))])])]),_:1},8,["title","modelValue"])])}}}),Yt=we(Bt,[["__scopeId","data-v-c9989a3a"]]);export{Yt as default};
