import{_ as G,B as H,a as W,d as X,r,C as Z,I as ee,e as i,J as B,c as te,o as g,f as e,h as o,K as c,k as n,l as K,D as oe,n as y,N as P,i as w,m as I,A as k}from"./index-BXRoTRPN.js";import{i as ne,b as ae}from"./invite-Csu05Vq-.js";const le={class:"app-container"},re=H({name:"User"}),ie=Object.assign(re,{setup(de){var V,R,D,N;const C=W(),{proxy:u}=X(),x=r([]);r(!1),r(!1);const b=r(!0),$=r(!0);r([]),r(!0),r(!0);const h=r(0);r("");const p=r([]),T=Z({form:{},formIv:{},queryParams:{pageNo:1,pageSize:10,agentId:(R=(V=C.currentRoute.value)==null?void 0:V.query)!=null&&R.id?(N=(D=C.currentRoute.value)==null?void 0:D.query)==null?void 0:N.id:void 0,invitationCode:void 0}}),{queryParams:a,form:se,rules:ue,rulesIv:pe,formIv:ce}=ee(T);function Y(d){C.push({path:"/system/user",query:{invite:d.invitationCode}})}function m(){b.value=!0,ne(u.addDateRange(a.value,p.value)).then(d=>{b.value=!1,x.value=d.data.records,h.value=d.data.total})}function f(){a.value.pageNo=1,m()}function z(){p.value=[],u.resetForm("queryRef"),a.value.agentId=void 0,a.value.invitationCode=void 0,u.$refs.deptTreeRef.setCurrentKey(null),f()}function L(d){const l=d.id;u.$modal.confirm('是否确认删除邀请码"'+d.invitationCode+'"？').then(function(){return ae({id:l})}).then(()=>{m(),u.$modal.msgSuccess("删除成功")}).catch(()=>{})}return m(),(d,l)=>{const S=i("el-input"),_=i("el-form-item"),M=i("el-date-picker"),v=i("el-button"),Q=i("el-form"),s=i("el-table-column"),q=i("el-tooltip"),j=i("el-table"),A=i("pagination"),E=i("el-col"),F=i("el-row"),U=B("hasPermi"),J=B("loading");return g(),te("div",le,[e(F,{gutter:20},{default:o(()=>[e(E,{xs:24},{default:o(()=>[c(e(Q,{model:n(a),ref:"queryRef",inline:!0,"label-width":"68px"},{default:o(()=>[e(_,{label:"代理查询",prop:"agentId"},{default:o(()=>[e(S,{modelValue:n(a).agentId,"onUpdate:modelValue":l[0]||(l[0]=t=>n(a).agentId=t),type:"number",placeholder:"请输入代理id",clearable:"",style:{width:"240px"},onKeyup:K(f,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"邀请码",prop:"invitationCode"},{default:o(()=>[e(S,{modelValue:n(a).invitationCode,"onUpdate:modelValue":l[1]||(l[1]=t=>n(a).invitationCode=t),type:"number",placeholder:"请输入邀请码",clearable:"",style:{width:"240px"},onKeyup:K(f,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"创建时间",style:{width:"308px"}},{default:o(()=>[e(M,{modelValue:n(p),"onUpdate:modelValue":l[2]||(l[2]=t=>oe(p)?p.value=t:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),e(_,null,{default:o(()=>[e(v,{type:"primary",icon:"Search",onClick:f},{default:o(()=>[y("搜索")]),_:1}),e(v,{icon:"Refresh",onClick:z},{default:o(()=>[y("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[P,n($)]]),c((g(),w(j,{border:"",data:n(x)},{default:o(()=>[e(s,{label:"代理ID",align:"center",key:"agentId",prop:"agentId","show-overflow-tooltip":!0},{default:o(t=>[I("span",null,k(t.row.agentId),1)]),_:1}),e(s,{label:"邀请码",align:"center",key:"invitationCode",prop:"invitationCode","show-overflow-tooltip":!0},{default:o(t=>[I("span",null,k(t.row.invitationCode),1)]),_:1}),e(s,{label:"注册会员数",align:"center",key:"spreadCount",prop:"spreadCount","show-overflow-tooltip":!0},{default:o(t=>[I("span",null,k(t.row.spreadCount),1)]),_:1}),e(s,{label:"创建时间",align:"center",key:"createTime",prop:"createTime"}),e(s,{label:"创建人",align:"center",key:"creator",prop:"creator"}),e(s,{label:"操作",align:"center",width:"350","class-name":"small-padding fixed-width"},{default:o(t=>[e(q,{disabled:"true",content:"查看注册会员",placement:"top"},{default:o(()=>[c((g(),w(v,{type:"primary",onClick:O=>Y(t.row)},{default:o(()=>[y("查看注册会员")]),_:2},1032,["onClick"])),[[U,["seeInvitationCodeuser"]]])]),_:2},1024),e(q,{disabled:"true",content:"删除邀请码",placement:"top"},{default:o(()=>[c((g(),w(v,{type:"danger",onClick:O=>L(t.row)},{default:o(()=>[y("删除邀请码")]),_:2},1032,["onClick"])),[[U,["deleteInvitationCode"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[J,n(b)]]),c(e(A,{total:n(h),page:n(a).pageNo,"onUpdate:page":l[3]||(l[3]=t=>n(a).pageNo=t),onPagination:m,limit:n(a).pageSize,"onUpdate:limit":l[4]||(l[4]=t=>n(a).pageSize=t)},null,8,["total","page","limit"]),[[P,n(h)>0]])]),_:1})]),_:1})])}}}),_e=G(ie,[["__scopeId","data-v-90e9e1f6"]]);export{_e as default};
