import{P as B,_ as Ve,B as Ce,a as Se,d as xe,r as _,C as Ie,I as Te,O as De,e as s,J as ae,c as g,o as p,f as e,h as a,K as w,k as o,l as A,D as E,n as m,j as x,A as y,N as oe,i as D,m as K,s as Ne,t as Ue}from"./index-BXRoTRPN.js";import{u as qe}from"./useCopy-CSzW9GjL.js";import{u as Re}from"./useTableColumnWidth-CTSg-whZ.js";function Ae(c){return B({url:"/follow/request/list",method:"post",data:c})}function $e(c){return B({url:"/follow/request/updateStatus",method:"post",data:c,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function Le(c){return B({url:"/follow/request/updateStatusList",method:"post",data:c,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}const M=c=>(Ne("data-v-286117eb"),c=c(),Ue(),c),Ye={class:"app-container"},Ee={key:0,style:{"margin-left":"8px",color:"#409EFF"}},Be={key:0},Ke=M(()=>K("br",null,null,-1)),Me=M(()=>K("br",null,null,-1)),Pe={key:1},je=M(()=>K("br",null,null,-1)),Oe={key:0},ze={key:1,style:{color:"#63a103"}},Fe={key:2,style:{color:"#da0114"}},He=Ce({name:"User"}),Qe=Object.assign(He,{setup(c){var z,F,H,Q,W,J,G,X;const{copyText:ne}=qe(),{tableRef:ue,handleHeaderDragend:re,applyStoredColumnWidths:de}=Re("examine-table"),N=Se(),{proxy:k}=xe(),P=_([]),$=_(!0),se=_(!0),L=_(0),I=_([]),T=_([]),U=_([]),ie=Ie({queryParams:{pageNo:1,pageSize:10,id:void 0,accountType:(F=(z=N.currentRoute.value)==null?void 0:z.query)!=null&&F.accountType?Number((Q=(H=N.currentRoute.value)==null?void 0:H.query)==null?void 0:Q.accountType):void 0,agentId:void 0,descOrAsc:void 0,email:void 0,fundingStatus:void 0,invitationCode:(J=(W=N.currentRoute.value)==null?void 0:W.query)!=null&&J.invite?(X=(G=N.currentRoute.value)==null?void 0:G.query)==null?void 0:X.invite:void 0,loginEnable:void 0,orderBy:void 0,phone:void 0,realAuthStatus:void 0,realName:void 0,searchChildOfAgent:void 0,tradeEnable:void 0}}),{queryParams:r}=Te(ie),pe={0:"每日",1:"7日",2:"16日",3:"38日",4:"108日",5:"180日",6:"360日"};function me(i){U.value=i}function j(i){let l=[];for(let n=0;n<U.value.length;n++)U.value[n].status==0&&l.push(U.value[n].id);if(console.log(l),l.length==0)return k.$modal.msgError("请选择有效数据"),!1;let d={1:"您确定审核通过吗？",2:"您确定要拒绝吗"};k.$modal.confirm(d[i]).then(function(){return console.log(12314),Le({idList:l.join(","),status:i})}).then(()=>{k.$modal.msgSuccess("操作成功"),v()}).catch(function(){})}function v(){$.value=!0,Ae(ce(r.value,I.value,T.value)).then(i=>{$.value=!1,P.value=i.data.records,L.value=i.data.total,de()})}function ce(i,l,d){let n=i;return n.params=typeof n.params=="object"&&n.params!==null&&!Array.isArray(n.params)?n.params:{},l=Array.isArray(l)?l:[],d=Array.isArray(d)?d:[],n.timeStart=l[0]&&l[0]+" 00:00:00",n.timeEnd=l[1]&&l[1]+" 23:59:59",n.operateTimeStart=d[0]&&d[0]+" 00:00:00",n.operateTimeEnd=d[1]&&d[1]+" 23:59:59",n}function V(){r.value.pageNo=1,v()}function fe(){I.value=[],T.value=[],k.resetForm("queryRef"),V()}function O(i,l){let d={1:"您确定审核通过吗？",2:"您确定要拒绝吗"};k.$modal.confirm(d[l]).then(function(){return $e({id:i.id,status:l})}).then(()=>{k.$modal.msgSuccess("操作成功"),v()}).catch(function(){})}const b=_(null);let C=null;const h=_(0);function _e(){C&&(clearInterval(C),C=null),b.value?(h.value=b.value/1e3,C=setInterval(()=>{h.value>0&&h.value--,h.value===0&&(v(),h.value=b.value/1e3)},1e3),v()):h.value=0}return De(()=>{C&&clearInterval(C)}),v(),(i,l)=>{const d=s("el-input"),n=s("el-form-item"),u=s("el-option"),q=s("el-select"),Z=s("el-date-picker"),S=s("el-button"),ye=s("el-form"),Y=s("el-col"),ee=s("el-row"),f=s("el-table-column"),ve=s("CopyDocument"),be=s("el-icon"),he=s("el-tag"),te=s("el-tooltip"),ge=s("el-table"),we=s("pagination"),R=ae("hasPermi"),ke=ae("loading");return p(),g("div",Ye,[e(ee,{gutter:20},{default:a(()=>[e(Y,{xs:24},{default:a(()=>[w(e(ye,{model:o(r),ref:"queryRef",inline:!0},{default:a(()=>[e(n,{label:"记录ID",prop:"id"},{default:a(()=>[e(d,{modelValue:o(r).id,"onUpdate:modelValue":l[0]||(l[0]=t=>o(r).id=t),modelModifiers:{number:!0},type:"number",placeholder:"请输入记录ID",clearable:"",style:{width:"150px"},onKeyup:A(V,["enter"])},null,8,["modelValue"])]),_:1}),e(n,{label:"会员查询",prop:"userId"},{default:a(()=>[e(d,{modelValue:o(r).userId,"onUpdate:modelValue":l[1]||(l[1]=t=>o(r).userId=t),modelModifiers:{number:!0},placeholder:"请输入会员ID",clearable:"",style:{width:"150px"},onKeyup:A(V,["enter"])},null,8,["modelValue"])]),_:1}),e(n,{label:"导师查询",prop:"tutor"},{default:a(()=>[e(d,{modelValue:o(r).tutor,"onUpdate:modelValue":l[2]||(l[2]=t=>o(r).tutor=t),placeholder:"请输入导师ID或导师名称",clearable:"",style:{width:"180px"},onKeyup:A(V,["enter"])},null,8,["modelValue"])]),_:1}),e(n,{label:"公域/私域",prop:"domainType"},{default:a(()=>[e(q,{modelValue:o(r).domainType,"onUpdate:modelValue":l[3]||(l[3]=t=>o(r).domainType=t),style:{width:"150px"},placeholder:"全部"},{default:a(()=>[e(u,{key:"0",label:"全部",value:""}),e(u,{key:"1",label:"公域",value:0}),e(u,{key:"2",label:"私域",value:1})]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"跟投类型",prop:"itemType"},{default:a(()=>[e(q,{modelValue:o(r).itemType,"onUpdate:modelValue":l[4]||(l[4]=t=>o(r).itemType=t),style:{width:"150px"},placeholder:"全部"},{default:a(()=>[e(u,{key:"0",label:"全部",value:""}),e(u,{key:"1",label:"1日跟投",value:0}),e(u,{key:"2",label:"7日跟投",value:1}),e(u,{key:"3",label:"16日跟投",value:2}),e(u,{key:"4",label:"38日跟投",value:3}),e(u,{key:"5",label:"108日跟投",value:4}),e(u,{key:"6",label:"180日跟投",value:5}),e(u,{key:"7",label:"360日跟投",value:6})]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"状态",prop:"status"},{default:a(()=>[e(q,{modelValue:o(r).status,"onUpdate:modelValue":l[5]||(l[5]=t=>o(r).status=t),style:{width:"150px"},placeholder:"全部"},{default:a(()=>[e(u,{key:"0",label:"全部",value:""}),e(u,{key:"1",label:"审核中",value:0}),e(u,{key:"2",label:"通过",value:1}),e(u,{key:"3",label:"已拒绝",value:2})]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"申请时间",style:{width:"308px"}},{default:a(()=>[e(Z,{modelValue:o(I),"onUpdate:modelValue":l[6]||(l[6]=t=>E(I)?I.value=t:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),e(n,{label:"审核时间",style:{width:"308px"}},{default:a(()=>[e(Z,{modelValue:o(T),"onUpdate:modelValue":l[7]||(l[7]=t=>E(T)?T.value=t:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),e(n,{label:"操作人",prop:"operator"},{default:a(()=>[e(d,{modelValue:o(r).operator,"onUpdate:modelValue":l[8]||(l[8]=t=>o(r).operator=t),placeholder:"请输入操作人管理员账号",clearable:"",onKeyup:A(V,["enter"])},null,8,["modelValue"])]),_:1}),e(n,null,{default:a(()=>[e(S,{type:"primary",icon:"Search",onClick:V},{default:a(()=>[m("查询")]),_:1}),e(S,{icon:"Refresh",onClick:fe},{default:a(()=>[m("重置")]),_:1})]),_:1}),e(n,{label:"自动刷新"},{default:a(()=>[e(q,{modelValue:o(b),"onUpdate:modelValue":l[9]||(l[9]=t=>E(b)?b.value=t:null),onChange:_e,style:{width:"120px"},placeholder:"关闭"},{default:a(()=>[e(u,{label:"关闭",value:null}),e(u,{label:"5秒",value:5e3}),e(u,{label:"10秒",value:1e4}),e(u,{label:"30秒",value:3e4}),e(u,{label:"1分钟",value:6e4}),e(u,{label:"3分钟",value:18e4}),e(u,{label:"5分钟",value:3e5})]),_:1},8,["modelValue"]),o(b)?(p(),g("span",Ee,y(o(h))+" 秒后自动刷新",1)):x("",!0)]),_:1})]),_:1},8,["model"]),[[oe,o(se)]]),e(ee,{gutter:10,class:"mb8"},{default:a(()=>[w((p(),D(Y,{span:1.5},{default:a(()=>[e(S,{type:"primary",onClick:l[10]||(l[10]=t=>j(1))},{default:a(()=>[m("批量通过")]),_:1})]),_:1})),[[R,["updateStatus"]]]),w((p(),D(Y,{span:1.5},{default:a(()=>[e(S,{type:"danger",onClick:l[11]||(l[11]=t=>j(2))},{default:a(()=>[m("批量拒绝")]),_:1})]),_:1})),[[R,["updateStatus"]]])]),_:1}),w((p(),D(ge,{border:"",data:o(P),onSelectionChange:me,onHeaderDragend:o(re),ref_key:"tableRef",ref:ue},{default:a(()=>[e(f,{type:"selection",width:"50",align:"center"}),e(f,{label:"记录ID",align:"center",key:"id",prop:"id",width:"80"}),e(f,{label:"用户信息",align:"center",width:"150","show-overflow-tooltip":!0},{default:a(t=>[t.row.userId?(p(),g("span",Be,[m(y(t.row.realName?t.row.realName:t.row.nickname)+" ",1),Ke,m(" "+y(t.row.userId),1),e(be,{style:{cursor:"pointer","margin-left":"4px"},onClick:le=>o(ne)(t.row.userId)},{default:a(()=>[e(ve)]),_:2},1032,["onClick"]),Me,m(" L"+y(t.row.levelId)+"-"+y(t.row.levelName),1)])):(p(),g("span",Pe,"-"))]),_:1}),e(f,{label:"导师信息",align:"center",width:""},{default:a(t=>[m(y(t.row.tutorName)+"（"+y(t.row.tutorId)+"） ",1),je,e(he,{type:"success"},{default:a(()=>[m(y(pe[t.row.itemType]),1)]),_:2},1024)]),_:1}),e(f,{label:"跟投资金",align:"center",key:"amount",prop:"amount"}),e(f,{label:"申请时间",align:"center",key:"requestTime",prop:"requestTime",width:"160"}),e(f,{label:"状态",align:"center"},{default:a(t=>[t.row.status==0?(p(),g("span",Oe,"审核中")):x("",!0),t.row.status==1?(p(),g("span",ze,"通过")):x("",!0),t.row.status==2?(p(),g("span",Fe,"已拒绝")):x("",!0)]),_:1}),e(f,{label:"操作人",align:"center",key:"operator",prop:"operator"}),e(f,{label:"审核时间",align:"center",key:"operateTime",prop:"operateTime",width:"160"}),e(f,{fixed:"right",label:"操作",align:"center",width:"150","class-name":"small-padding fixed-width"},{default:a(t=>[t.row.status==0?w((p(),D(te,{key:0,disabled:"true",content:"通过",placement:"top"},{default:a(()=>[e(S,{type:"primary",onClick:le=>O(t.row,1)},{default:a(()=>[m("通过")]),_:2},1032,["onClick"])]),_:2},1024)),[[R,["updateStatus"]]]):x("",!0),t.row.status==0?w((p(),D(te,{key:1,disabled:"true",content:"拒绝",placement:"top"},{default:a(()=>[e(S,{type:"danger",onClick:le=>O(t.row,2)},{default:a(()=>[m("拒绝")]),_:2},1032,["onClick"])]),_:2},1024)),[[R,["updateStatus"]]]):x("",!0)]),_:1})]),_:1},8,["data","onHeaderDragend"])),[[ke,o($)]]),w(e(we,{total:o(L),onPagination:v,page:o(r).pageNo,"onUpdate:page":l[12]||(l[12]=t=>o(r).pageNo=t),limit:o(r).pageSize,"onUpdate:limit":l[13]||(l[13]=t=>o(r).pageSize=t)},null,8,["total","page","limit"]),[[oe,o(L)>0]])]),_:1})]),_:1})])}}}),Xe=Ve(Qe,[["__scopeId","data-v-286117eb"]]);export{Xe as default};
