import{_ as Q,B as W,a as E,d as F,r,C as J,I as O,e as i,J as G,c as w,o as u,f as l,h as a,K as I,k as e,l as D,D as X,n as x,N as T,i as p,j as _,m as Z,A as $}from"./index-BXRoTRPN.js";import{i as ee}from"./admin-DqibhfnH.js";import{u as te,C as le}from"./useTableColumnVisibility-CzsC5pRe.js";import{u as ae}from"./useTableColumnWidth-CTSg-whZ.js";const oe={class:"app-container"},ne={key:0,class:"red"},se={key:1,class:"green"},re=W({name:"User"}),ie=Object.assign(re,{setup(ue){const{tableRef:R,handleHeaderDragend:S,applyStoredColumnWidths:U}=ae("adminNotice-table"),d=te("adminNotice-table",["userId","title","content","isRead","sendTime"]),A=[{key:"userId",label:"会员ID",prop:"userId"},{key:"title",label:"标题",prop:"title"},{key:"content",label:"内容",prop:"content"},{key:"isRead",label:"发送状态",prop:"isRead"},{key:"sendTime",label:"发送时间",prop:"sendTime"}];d.initializeColumns(A),E();const{proxy:B}=F(),k=r([]);r(!1),r(!1);const y=r(!0),q=r(!0);r([]),r(!0),r(!0);const g=r(0);r("");const c=r([]),z=J({form:{},formIv:{},queryParams:{pageNo:1,pageSize:10,userId:void 0,ip:void 0}}),{queryParams:o,form:de,rules:pe,rulesIv:ce,formIv:me}=O(z);function v(){y.value=!0,ee(K(o.value,c.value)).then(m=>{y.value=!1,k.value=m.data.records,g.value=m.data.total,U()})}function K(m,t,h){let n=m;return n.params=typeof n.params=="object"&&n.params!==null&&!Array.isArray(n.params)?n.params:{},t=Array.isArray(t)?t:[],n.startTime=t[0]&&t[0]+" 00:00:00",n.endTime=t[1]&&t[1]+" 23:59:59",n}function b(){o.value.pageNo=1,v()}function Y(){c.value=[],B.resetForm("queryRef"),o.value.userId=void 0,o.value.ip=void 0,b()}return v(),(m,t)=>{const h=i("el-input"),n=i("el-form-item"),j=i("el-date-picker"),C=i("el-button"),H=i("el-form"),V=i("el-col"),N=i("el-row"),f=i("el-table-column"),M=i("el-table"),P=i("pagination"),L=G("loading");return u(),w("div",oe,[l(N,{gutter:20},{default:a(()=>[l(V,{xs:24},{default:a(()=>[I(l(H,{model:e(o),ref:"queryRef",inline:!0,"label-width":"68px"},{default:a(()=>[l(n,{"label-width":"80",label:"会员查询",prop:"userId"},{default:a(()=>[l(h,{oninput:"if(value.length>6)value=value.slice(0,6)",modelValue:e(o).userId,"onUpdate:modelValue":t[0]||(t[0]=s=>e(o).userId=s),placeholder:"请输入会员id",clearable:"",style:{width:"240px"},onKeyup:D(b,["enter"])},null,8,["modelValue"])]),_:1}),l(n,{"label-width":"80",label:"标题",prop:"title"},{default:a(()=>[l(h,{modelValue:e(o).title,"onUpdate:modelValue":t[1]||(t[1]=s=>e(o).title=s),placeholder:"请输入标题",clearable:"",style:{width:"240px"},onKeyup:D(b,["enter"])},null,8,["modelValue"])]),_:1}),l(n,{label:"发送时间",style:{width:"308px"}},{default:a(()=>[l(j,{modelValue:e(c),"onUpdate:modelValue":t[2]||(t[2]=s=>X(c)?c.value=s:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),l(n,null,{default:a(()=>[l(C,{type:"primary",icon:"Search",onClick:b},{default:a(()=>[x("搜索")]),_:1}),l(C,{icon:"Refresh",onClick:Y},{default:a(()=>[x("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[T,e(q)]]),l(N,{gutter:10,class:"mb8"},{default:a(()=>[l(V,{span:1.5},{default:a(()=>[l(le,{"column-visibility":e(d)},null,8,["column-visibility"])]),_:1})]),_:1}),I((u(),p(M,{border:"",data:e(k),onHeaderDragend:e(S),ref_key:"tableRef",ref:R},{default:a(()=>[e(d).isColumnVisible("userId")?(u(),p(f,{label:"会员ID",width:"100",align:"center",key:"userId",prop:"userId","show-overflow-tooltip":!0},{default:a(s=>[Z("span",null,$(s.row.userId),1)]),_:1})):_("",!0),e(d).isColumnVisible("title")?(u(),p(f,{label:"标题",align:"center",width:"150",key:"title",prop:"title"})):_("",!0),e(d).isColumnVisible("content")?(u(),p(f,{label:"内容",align:"center",key:"content",prop:"content"})):_("",!0),e(d).isColumnVisible("isRead")?(u(),p(f,{label:"发送状态",width:"70",align:"center",key:"loginIp",prop:"loginIp","show-overflow-tooltip":!0},{default:a(s=>[s.row.isRead?(u(),w("span",se,"已读")):(u(),w("span",ne,"未读"))]),_:1})):_("",!0),e(d).isColumnVisible("sendTime")?(u(),p(f,{label:"发送时间",width:"180",align:"center",key:"sendTime",prop:"sendTime"})):_("",!0)]),_:1},8,["data","onHeaderDragend"])),[[L,e(y)]]),I(l(P,{total:e(g),page:e(o).pageNo,"onUpdate:page":t[3]||(t[3]=s=>e(o).pageNo=s),onPagination:v,limit:e(o).pageSize,"onUpdate:limit":t[4]||(t[4]=s=>e(o).pageSize=s)},null,8,["total","page","limit"]),[[T,e(g)>0]])]),_:1})]),_:1})])}}}),ge=Q(ie,[["__scopeId","data-v-997ce9ce"]]);export{ge as default};
