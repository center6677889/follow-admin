import{_ as pe,B as me,a as ce,d as _e,r as u,C as U,H as fe,I as ye,e as d,J as ge,c as f,o as i,f as t,h as n,K as T,k as o,l as q,L as we,M as he,i as V,D as H,n as p,N as B,A as s,m as c,R as be,j as M,s as ve,t as ke}from"./index-BXRoTRPN.js";import{u as Ie}from"./useCopy-CSzW9GjL.js";import{u as Ae}from"./useTableColumnWidth-CTSg-whZ.js";import{e as Ce}from"./money-B5PkZZtV.js";const y=w=>(ve("data-v-ae965070"),w=w(),ke(),w),Te={class:"app-container"},Ve={key:0},De=y(()=>c("br",null,null,-1)),xe=y(()=>c("br",null,null,-1)),Ne={key:1},Se={key:0},Fe=y(()=>c("br",null,null,-1)),Re={key:1},ze={key:0},Le=y(()=>c("br",null,null,-1)),Ue={key:1},qe=y(()=>c("br",null,null,-1)),He={key:0},Be=y(()=>c("br",null,null,-1)),Me=["innerHTML"],Ke=me({name:"User"}),Ye=Object.assign(Ke,{setup(w){var S,F,R,z;const{copyText:K}=Ie(),{tableRef:Y,handleHeaderDragend:P,applyStoredColumnWidths:j}=Ae("moneyLog-table"),D=ce(),{proxy:E}=_e(),x=u([]);u(!1),u(!1);const v=u(!0),Q=u(!0);u([]),u(!0),u(!0);const k=u(0);u("");const g=u([]),W=U(fe().listamtDeType),$=U({form:{},formIv:{},queryParams:{pageNo:1,pageSize:10,userId:(F=(S=D.currentRoute.value)==null?void 0:S.query)!=null&&F.id?(z=(R=D.currentRoute.value)==null?void 0:R.query)==null?void 0:z.id:void 0,ip:void 0}}),{queryParams:a,form:Pe,rules:je,rulesIv:Ee,formIv:Qe}=ye($);function I(){v.value=!0,Ce(O(a.value,g.value)).then(m=>{v.value=!1,x.value=m.data.records,k.value=m.data.total,j()})}function J(m){return console.log(m),m?m.replace(/\n/g,"<br>"):""}function O(m,l,A){let _=m;return l=Array.isArray(l)?l:[],_.startTime=l[0]&&l[0]+" 00:00:00",_.endTime=l[1]&&l[1]+" 23:59:59",_}function h(){a.value.pageNo=1,I()}function G(){g.value=[],E.resetForm("queryRef"),a.value.userId=void 0,a.value.ip=void 0,h()}const b=u(!1),N=u("");function X(m){N.value=J(m),b.value=!0}return I(),(m,l)=>{const A=d("el-input"),_=d("el-form-item"),L=d("el-option"),Z=d("el-select"),ee=d("el-date-picker"),C=d("el-button"),te=d("el-form"),le=d("CopyDocument"),oe=d("el-icon"),r=d("el-table-column"),ne=d("el-table"),ae=d("pagination"),re=d("el-col"),de=d("el-row"),se=d("el-dialog"),ue=ge("loading");return i(),f("div",Te,[t(de,{gutter:20},{default:n(()=>[t(re,{xs:24},{default:n(()=>[T(t(te,{model:o(a),ref:"queryRef",inline:!0,"label-width":"68px"},{default:n(()=>[t(_,{label:"会员查询",prop:"userId"},{default:n(()=>[t(A,{type:"number",oninput:"if(value.length>6)value=value.slice(0,6)",modelValue:o(a).userId,"onUpdate:modelValue":l[0]||(l[0]=e=>o(a).userId=e),placeholder:"请输入会员ID",clearable:"",style:{width:"150px"},onKeyup:q(h,["enter"])},null,8,["modelValue"])]),_:1}),t(_,{label:"所属代理",prop:"agentId"},{default:n(()=>[t(A,{modelValue:o(a).agentId,"onUpdate:modelValue":l[1]||(l[1]=e=>o(a).agentId=e),placeholder:"请输入代理id",clearable:"",style:{width:"150px"},onKeyup:q(h,["enter"])},null,8,["modelValue"])]),_:1}),t(_,{style:{width:"240px"},label:"类型",prop:"deType"},{default:n(()=>[t(Z,{style:{width:"100%"},modelValue:o(a).deType,"onUpdate:modelValue":l[2]||(l[2]=e=>o(a).deType=e),placeholder:"全部"},{default:n(()=>[t(L,{key:"-1",label:"全部",value:""}),(i(!0),f(we,null,he(o(W),e=>(i(),V(L,{key:e.code,label:e.name,value:e.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(_,{label:"变更时间",style:{width:"308px"}},{default:n(()=>[t(ee,{modelValue:o(g),"onUpdate:modelValue":l[3]||(l[3]=e=>H(g)?g.value=e:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),t(_,null,{default:n(()=>[t(C,{type:"primary",icon:"Search",onClick:h},{default:n(()=>[p("搜索")]),_:1}),t(C,{icon:"Refresh",onClick:G},{default:n(()=>[p("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[B,o(Q)]]),T((i(),V(ne,{border:"",data:o(x),onHeaderDragend:o(P),ref_key:"tableRef",ref:Y},{default:n(()=>[t(r,{label:"用户信息",align:"center",width:"150","show-overflow-tooltip":!0},{default:n(e=>[e.row.userId?(i(),f("span",Ve,[p(s(e.row.realName?e.row.realName:e.row.nickname),1),De,p(" "+s(e.row.userId),1),t(oe,{style:{cursor:"pointer","margin-left":"4px"},onClick:ie=>o(K)(e.row.userId)},{default:n(()=>[t(le)]),_:2},1032,["onClick"]),xe,p(" L"+s(e.row.levelId)+"-"+s(e.row.levelName),1)])):(i(),f("span",Ne,"-"))]),_:1}),t(r,{label:"直属代理（ID）",width:"150",align:"center"},{default:n(e=>[e.row.agentId?(i(),f("span",Se,[p(s(e.row.agentName),1),Fe,p("（"+s(e.row.agentId)+"）",1)])):(i(),f("span",Re,"-"))]),_:1}),t(r,{label:"团队总代(ID)",width:"150",align:"center"},{default:n(e=>[e.row.generalAgentId?(i(),f("span",ze,[p(s(e.row.generalAgentName),1),Le,p("（"+s(e.row.generalAgentId)+"）",1)])):(i(),f("span",Ue,"-"))]),_:1}),t(r,{label:"类型",width:"180",align:"center",key:"deTypeName",prop:"deTypeName"}),t(r,{label:"交易币种/汇率",width:"150",align:"center",key:"loginIp",prop:"loginIp","show-overflow-tooltip":!0},{default:n(e=>[c("span",null,s(e.row.currency),1),qe,c("span",null,"1人民币="+s(e.row.exchangeRate)+s(e.row.currency),1)]),_:1}),t(r,{label:"变更金额",width:"150",align:"center",key:"ipAddress",prop:"ipAddress","show-overflow-tooltip":!0},{default:n(e=>[c("span",{class:be(e.row.deCnyAmt>0?"green":"red")},[e.row.deForeignAmt?(i(),f("span",He,[p(s(e.row.currency)+s(e.row.deForeignAmt),1),Be])):M("",!0),p(" ￥"+s(e.row.deCnyAmt),1)],2)]),_:1}),t(r,{label:"变更前可用金额",width:"150",align:"center",key:"beAmt",prop:"beAmt"}),t(r,{label:"变更后可用金额",width:"150",align:"center",key:"afAmt",prop:"afAmt"}),t(r,{label:"变更前冻结资金",width:"150",align:"center",key:"beTradingFrozenAmt",prop:"beTradingFrozenAmt"}),t(r,{label:"变更后冻结资金",width:"150",align:"center",key:"adTradingFrozenAmt",prop:"afTradingFrozenAmt"}),t(r,{label:"交易前跟投资金",width:"150",align:"center",key:"beFollowAmt",prop:"beFollowAmt"}),t(r,{label:"交易后跟投资金",width:"150",align:"center",key:"afFollowAmt",prop:"afFollowAmt"}),t(r,{label:"描述",width:"100",align:"center",key:"deSummary",prop:"deSummary"},{default:n(e=>[e.row.deSummary?(i(),V(C,{key:0,type:"text",onClick:ie=>X(e.row.deSummary)},{default:n(()=>[p("点击查看")]),_:2},1032,["onClick"])):M("",!0)]),_:1}),t(r,{label:"操作人",width:"130",align:"center",key:"operator",prop:"operator"}),t(r,{label:"变更时间",width:"160",align:"center",key:"addTime",prop:"addTime"})]),_:1},8,["data","onHeaderDragend"])),[[ue,o(v)]]),T(t(ae,{total:o(k),page:o(a).pageNo,"onUpdate:page":l[4]||(l[4]=e=>o(a).pageNo=e),onPagination:I,limit:o(a).pageSize,"onUpdate:limit":l[5]||(l[5]=e=>o(a).pageSize=e)},null,8,["total","page","limit"]),[[B,o(k)>0]])]),_:1})]),_:1}),t(se,{modelValue:o(b),"onUpdate:modelValue":l[6]||(l[6]=e=>H(b)?b.value=e:null),title:"描述",width:"500px"},{default:n(()=>[c("div",{innerHTML:o(N)},null,8,Me)]),_:1},8,["modelValue"])])}}}),Ge=pe(Ye,[["__scopeId","data-v-ae965070"]]);export{Ge as default};
