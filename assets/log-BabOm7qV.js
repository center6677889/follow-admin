import{_ as ee,B as oe,a as te,d as le,r as i,C as L,H as ae,I as ne,e as s,J as re,c as h,o as m,f as o,h as a,K as I,k as t,l as k,D as se,L as de,M as ie,i as H,n as _,N as M,A as u,m as c,s as pe,t as ue}from"./index-BXRoTRPN.js";import{u as ce}from"./useTableColumnWidth-CTSg-whZ.js";import{u as me}from"./useCopy-CSzW9GjL.js";import{e as _e}from"./stock-qSVPq5v2.js";const U=w=>(pe("data-v-597067ec"),w=w(),ue(),w),fe={class:"app-container"},ye={key:0},we=U(()=>c("br",null,null,-1)),ge=U(()=>c("br",null,null,-1)),he={key:1},ve={class:"green"},be=["innerHTML"],Ce=["innerHTML"],Ie=oe({name:"User"}),ke=Object.assign(Ie,{setup(w){const{tableRef:A,handleHeaderDragend:P,applyStoredColumnWidths:B}=ce("stock/log-table"),{copyText:T}=me();te();const{proxy:K}=le(),D=i([]);i(!1),i(!1);const v=i(!0),R=i(!0);i([]),i(!0),i(!0);const b=i(0);i("");const f=i([]),q=L(ae().userStockPositionChangeType),Y=L({form:{},formIv:{},queryParams:{pageNo:1,pageSize:10,userId:void 0,ip:void 0,userDataChangeTypeCode:void 0}}),{queryParams:n,form:Te,rules:De,rulesIv:Ve,formIv:xe}=ne(Y);function C(){v.value=!0,_e(z(n.value,f.value)).then(p=>{v.value=!1,D.value=p.data.records,b.value=p.data.total,B()})}function z(p,l,g){let r=p;return r.params=typeof r.params=="object"&&r.params!==null&&!Array.isArray(r.params)?r.params:{},l=Array.isArray(l)?l:[],r.endTime=l[0]&&l[0]+" 00:00:00",r.startTime=l[1]&&l[1]+" 23:59:59",r}function y(){n.value.pageNo=1,C()}function V(p){return console.log(p),p?p.replace(/\n/g,"<br>"):""}function j(){f.value=[],K.resetForm("queryRef"),n.value.userId=void 0,n.value.positionId=void 0,n.value.dataChangeTypeCode=void 0,y()}return C(),(p,l)=>{const g=s("el-input"),r=s("el-form-item"),E=s("el-date-picker"),F=s("el-option"),Q=s("el-select"),x=s("el-button"),W=s("el-form"),d=s("el-table-column"),N=s("CopyDocument"),S=s("el-icon"),$=s("el-table"),J=s("pagination"),O=s("el-col"),G=s("el-row"),X=re("loading");return m(),h("div",fe,[o(G,{gutter:20},{default:a(()=>[o(O,{xs:24},{default:a(()=>[I(o(W,{model:t(n),ref:"queryRef",inline:!0,"label-width":"68px"},{default:a(()=>[o(r,{label:"记录ID",prop:"id"},{default:a(()=>[o(g,{modelValue:t(n).id,"onUpdate:modelValue":l[0]||(l[0]=e=>t(n).id=e),modelModifiers:{number:!0},type:"number",placeholder:"请输入记录ID",clearable:"",style:{width:"150px"},onKeyup:k(y,["enter"])},null,8,["modelValue"])]),_:1}),o(r,{label:"会员查询",prop:"userId"},{default:a(()=>[o(g,{oninput:"if(value.length>6)value=value.slice(0,6)",modelValue:t(n).userId,"onUpdate:modelValue":l[1]||(l[1]=e=>t(n).userId=e),type:"number",placeholder:"请输入会员ID",clearable:"",style:{width:"150px"},onKeyup:k(y,["enter"])},null,8,["modelValue"])]),_:1}),o(r,{label:"持仓ID",prop:"positionId"},{default:a(()=>[o(g,{modelValue:t(n).positionId,"onUpdate:modelValue":l[2]||(l[2]=e=>t(n).positionId=e),placeholder:"请输入持仓ID",clearable:"",style:{width:"150px"},onKeyup:k(y,["enter"])},null,8,["modelValue"])]),_:1}),o(r,{label:"变更时间",style:{width:"308px"}},{default:a(()=>[o(E,{modelValue:t(f),"onUpdate:modelValue":l[3]||(l[3]=e=>se(f)?f.value=e:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),o(r,{style:{width:"240px"},label:"变更类型",prop:"dataChangeTypeCode"},{default:a(()=>[o(Q,{style:{width:"100%"},modelValue:t(n).dataChangeTypeCode,"onUpdate:modelValue":l[4]||(l[4]=e=>t(n).dataChangeTypeCode=e),placeholder:"全部"},{default:a(()=>[(m(!0),h(de,null,ie(t(q),e=>(m(),H(F,{key:e.code,label:e.name,value:e.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(r,null,{default:a(()=>[o(x,{type:"primary",icon:"Search",onClick:y},{default:a(()=>[_("搜索")]),_:1}),o(x,{icon:"Refresh",onClick:j},{default:a(()=>[_("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[M,t(R)]]),I((m(),H($,{border:"",data:t(D),onHeaderDragend:t(P),ref_key:"tableRef",ref:A},{default:a(()=>[o(d,{label:"记录ID",width:"80",align:"center",key:"id",prop:"id","show-overflow-tooltip":!0}),o(d,{label:"用户信息",align:"center",width:"150","show-overflow-tooltip":!0},{default:a(e=>[e.row.userId?(m(),h("span",ye,[_(u(e.row.realName?e.row.realName:e.row.nickname),1),we,_(" "+u(e.row.userId),1),o(S,{style:{cursor:"pointer","margin-left":"4px"},onClick:Z=>t(T)(e.row.userId)},{default:a(()=>[o(N)]),_:2},1032,["onClick"]),ge,_(" L"+u(e.row.levelId)+"-"+u(e.row.levelName),1)])):(m(),h("span",he,"-"))]),_:1}),o(d,{label:"持仓ID",width:"80",align:"center",key:"positionId",prop:"positionId","show-overflow-tooltip":!0},{default:a(e=>[c("span",null,u(e.row.positionId),1),o(S,{style:{cursor:"pointer","margin-left":"4px"},onClick:Z=>t(T)(e.row.positionId)},{default:a(()=>[o(N)]),_:2},1032,["onClick"])]),_:1}),o(d,{label:"股票名称/股票代码",width:"180",align:"center",key:"parentId",prop:"parentId","show-overflow-tooltip":!0},{default:a(e=>[c("span",null,[_(u(e.row.stockName)+"  ",1),c("span",ve,u(e.row.stockCode),1)])]),_:1}),o(d,{label:"变更时间",width:"160",align:"center",key:"createTime",prop:"createTime","show-overflow-tooltip":!0},{default:a(e=>[c("span",null,u(e.row.createTime),1)]),_:1}),o(d,{label:"变更类型",width:"120",align:"center",key:"dataChangeTypeName",prop:"dataChangeTypeName","show-overflow-tooltip":!0},{default:a(e=>[c("span",null,u(e.row.dataChangeTypeName),1)]),_:1}),o(d,{label:"原始值",align:"center",key:"oldContent",prop:"oldContent"},{default:a(e=>[c("div",{innerHTML:V(e.row.oldContent)},null,8,be)]),_:1}),o(d,{label:"变更值",align:"center",key:"newContent",prop:"newContent"},{default:a(e=>[c("div",{innerHTML:V(e.row.newContent)},null,8,Ce)]),_:1}),o(d,{label:"变更人",width:"160",align:"center",key:"operator",prop:"operator"}),o(d,{label:"IP",width:"140",align:"center",key:"ip",prop:"ip"}),o(d,{label:"IP归属",width:"80",align:"center",key:"ipAddress",prop:"ipAddress"})]),_:1},8,["data","onHeaderDragend"])),[[X,t(v)]]),I(o(J,{total:t(b),page:t(n).pageNo,"onUpdate:page":l[5]||(l[5]=e=>t(n).pageNo=e),onPagination:C,limit:t(n).pageSize,"onUpdate:limit":l[6]||(l[6]=e=>t(n).pageSize=e)},null,8,["total","page","limit"]),[[M,t(b)>0]])]),_:1})]),_:1})])}}}),Me=ee(ke,[["__scopeId","data-v-597067ec"]]);export{Me as default};
