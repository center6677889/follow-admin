import{P as ne,_ as re,B as ie,a as se,d as ue,r as g,C as de,I as pe,e as s,J as K,c as _,o as p,f as o,h as t,K as V,k as l,l as I,D as ce,n as i,N as B,i as H,A as r,m,j as h,s as _e,t as me}from"./index-BXRoTRPN.js";import{u as fe}from"./useCopy-CSzW9GjL.js";import{u as we}from"./useTableColumnWidth-CTSg-whZ.js";function ye(b){return ne({url:"/follow/position/list",method:"post",data:b})}const w=b=>(_e("data-v-f7ec1984"),b=b(),me(),b),he={class:"app-container"},be={key:0},ke=w(()=>m("br",null,null,-1)),ve=w(()=>m("br",null,null,-1)),ge={key:1},Ve=w(()=>m("br",null,null,-1)),Ie={key:0},xe=w(()=>m("br",null,null,-1)),Ce={key:1},De=w(()=>m("br",null,null,-1)),Te={key:0},Se=w(()=>m("br",null,null,-1)),Ne={key:1},Pe=w(()=>m("br",null,null,-1)),Re={key:0},Ue=w(()=>m("br",null,null,-1)),$e={key:1},Ke=w(()=>m("br",null,null,-1)),Be={key:0,style:{color:"red"}},He={key:1},qe=ie({name:"User"}),Ae=Object.assign(qe,{setup(b){const{copyText:x}=fe(),{tableRef:q,handleHeaderDragend:A,applyStoredColumnWidths:L}=we("position-table"),M=se(),{proxy:j}=ue(),$=g([]),C=g(!0),Y=g(!0),D=g(0),v=g([]),z=de({queryParams:{pageNo:1,pageSize:10}}),F={0:"每日",1:"7日",2:"16日",3:"38日",4:"108日",5:"180日",6:"360日"},{queryParams:n}=pe(z);function Q(y){M.push({path:"/follow/transaction",query:{positionId:y.id}})}function T(){C.value=!0,ye(W(n.value,v.value)).then(y=>{C.value=!1,$.value=y.data.records,D.value=y.data.total,L()})}function W(y,a){let d=y;return d.params=typeof d.params=="object"&&d.params!==null&&!Array.isArray(d.params)?d.params:{},a=Array.isArray(a)?a:[],d.startTime=a[0]&&a[0]+" 00:00:00",d.endTime=a[1]&&a[1]+" 23:59:59",d}function k(){n.value.pageNo=1,T()}function E(){v.value=[],j.resetForm("queryRef"),k()}return T(),(y,a)=>{const d=s("el-input"),f=s("el-form-item"),u=s("el-option"),S=s("el-select"),J=s("el-date-picker"),N=s("el-button"),O=s("el-form"),P=s("CopyDocument"),R=s("el-icon"),c=s("el-table-column"),G=s("el-tag"),X=s("el-tooltip"),Z=s("el-table"),ee=s("pagination"),oe=s("el-col"),te=s("el-row"),le=K("hasPermi"),ae=K("loading");return p(),_("div",he,[o(te,{gutter:20},{default:t(()=>[o(oe,{xs:24},{default:t(()=>[V(o(O,{model:l(n),ref:"queryRef",inline:!0},{default:t(()=>[o(f,{label:"用户查询",prop:"userId"},{default:t(()=>[o(d,{modelValue:l(n).userId,"onUpdate:modelValue":a[0]||(a[0]=e=>l(n).userId=e),modelModifiers:{number:!0},type:"number",placeholder:"请输入用户ID",clearable:"",style:{width:"150px"},onKeyup:I(k,["enter"])},null,8,["modelValue"])]),_:1}),o(f,{label:"持仓ID",prop:"id"},{default:t(()=>[o(d,{modelValue:l(n).id,"onUpdate:modelValue":a[1]||(a[1]=e=>l(n).id=e),modelModifiers:{number:!0},type:"number",placeholder:"请输入持仓ID",clearable:"",style:{width:"150px"},onKeyup:I(k,["enter"])},null,8,["modelValue"])]),_:1}),o(f,{label:"跟投记录ID",prop:"followRecordId"},{default:t(()=>[o(d,{modelValue:l(n).followRecordId,"onUpdate:modelValue":a[2]||(a[2]=e=>l(n).followRecordId=e),modelModifiers:{number:!0},type:"number",placeholder:"请输入跟投记录ID",clearable:"",style:{width:"150px"},onKeyup:I(k,["enter"])},null,8,["modelValue"])]),_:1}),o(f,{label:"导师查询",prop:"tutor"},{default:t(()=>[o(d,{modelValue:l(n).tutor,"onUpdate:modelValue":a[3]||(a[3]=e=>l(n).tutor=e),placeholder:"请输入导师ID或导师名称",clearable:"",style:{width:"180px"},onKeyup:I(k,["enter"])},null,8,["modelValue"])]),_:1}),o(f,{label:"持仓状态",prop:"positionStatus"},{default:t(()=>[o(S,{modelValue:l(n).positionStatus,"onUpdate:modelValue":a[4]||(a[4]=e=>l(n).positionStatus=e),style:{width:"150px"},placeholder:"全部"},{default:t(()=>[o(u,{key:"0",label:"全部",value:""}),o(u,{key:"1",label:"持仓中",value:0}),o(u,{key:"2",label:"已平仓",value:1})]),_:1},8,["modelValue"])]),_:1}),o(f,{label:"公域/私域",prop:"domainType"},{default:t(()=>[o(S,{modelValue:l(n).domainType,"onUpdate:modelValue":a[5]||(a[5]=e=>l(n).domainType=e),style:{width:"150px"},placeholder:"全部"},{default:t(()=>[o(u,{key:"0",label:"全部",value:""}),o(u,{key:"1",label:"公域",value:0}),o(u,{key:"2",label:"私域",value:1})]),_:1},8,["modelValue"])]),_:1}),o(f,{label:"项目",prop:"itemType"},{default:t(()=>[o(S,{modelValue:l(n).itemType,"onUpdate:modelValue":a[6]||(a[6]=e=>l(n).itemType=e),style:{width:"150px"},placeholder:"全部"},{default:t(()=>[o(u,{key:"0",label:"全部",value:""}),o(u,{key:"1",label:"1日跟投",value:0}),o(u,{key:"2",label:"7日跟投",value:1}),o(u,{key:"3",label:"16日跟投",value:2}),o(u,{key:"4",label:"38日跟投",value:3}),o(u,{key:"5",label:"108日跟投",value:4}),o(u,{key:"6",label:"180日跟投",value:5}),o(u,{key:"7",label:"360日跟投",value:6})]),_:1},8,["modelValue"])]),_:1}),o(f,{label:"建仓时间",style:{width:"308px"}},{default:t(()=>[o(J,{modelValue:l(v),"onUpdate:modelValue":a[7]||(a[7]=e=>ce(v)?v.value=e:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),o(f,null,{default:t(()=>[o(N,{type:"primary",icon:"Search",onClick:k},{default:t(()=>[i("查询")]),_:1}),o(N,{icon:"Refresh",onClick:E},{default:t(()=>[i("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[B,l(Y)]]),V((p(),H(Z,{border:"",data:l($),onHeaderDragend:l(A),ref_key:"tableRef",ref:q},{default:t(()=>[o(c,{label:"用户信息",align:"center",width:"150","show-overflow-tooltip":!0},{default:t(e=>[e.row.userId?(p(),_("span",be,[i(r(e.row.realName?e.row.realName:e.row.nickname),1),ke,i(" "+r(e.row.userId),1),o(R,{style:{cursor:"pointer","margin-left":"4px"},onClick:U=>l(x)(e.row.userId)},{default:t(()=>[o(P)]),_:2},1032,["onClick"]),ve,i(" L"+r(e.row.levelId)+"-"+r(e.row.levelName),1)])):(p(),_("span",ge,"-"))]),_:1}),o(c,{label:"持仓ID",align:"center",key:"id",prop:"id","show-overflow-tooltip":!0,width:"110"},{default:t(e=>[m("span",null,r(e.row.id),1),o(R,{style:{cursor:"pointer","margin-left":"4px"},onClick:U=>l(x)(e.row.id)},{default:t(()=>[o(P)]),_:2},1032,["onClick"])]),_:1}),o(c,{label:"跟投ID",align:"center",key:"followRecordId",prop:"followRecordId","show-overflow-tooltip":!0,width:"90"},{default:t(e=>[m("span",null,r(e.row.followRecordId),1),o(R,{style:{cursor:"pointer","margin-left":"4px"},onClick:U=>l(x)(e.row.followRecordId)},{default:t(()=>[o(P)]),_:2},1032,["onClick"])]),_:1}),o(c,{label:"导师信息",align:"center",width:"150","show-overflow-tooltip":!0},{default:t(e=>[i(r(e.row.tutorName)+"（"+r(e.row.tutorId)+"） ",1),Ve,o(G,{type:"success"},{default:t(()=>[i(r(F[e.row.itemType]),1)]),_:2},1024)]),_:1}),o(c,{label:"跟投股票",align:"center",width:"150","show-overflow-tooltip":!0},{default:t(e=>[i(r(e.row.stockName+"("+e.row.stockCode+")"),1)]),_:1}),o(c,{label:"持仓成本价",align:"center","show-overflow-tooltip":!0},{default:t(e=>[e.row.stockType=="hk"?(p(),_("span",Ie,[i("HK$"+r(e.row.originalBuyingCostPrice),1),xe])):e.row.stockType=="us"?(p(),_("span",Ce,[i("$"+r(e.row.originalBuyingCostPrice),1),De])):h("",!0),i(" ￥"+r(e.row.buyingCostPrice),1)]),_:1}),o(c,{label:"现价",align:"center","show-overflow-tooltip":!0},{default:t(e=>[e.row.stockType=="hk"?(p(),_("span",Te,[i("HK$"+r(e.row.nowPrice),1),Se])):h("",!0),e.row.stockType=="us"?(p(),_("span",Ne,[i("$"+r(e.row.nowPrice),1),Pe])):h("",!0),i(" ￥"+r((e.row.nowPrice/e.row.exchangeRate).toFixed(2)),1)]),_:1}),o(c,{label:"持有股数",align:"center",key:"holdShares",prop:"holdShares","show-overflow-tooltip":!0}),o(c,{label:"总市值",align:"center","show-overflow-tooltip":!0},{default:t(e=>[e.row.stockType=="hk"?(p(),_("span",Re,[i("HK$"+r(e.row.marketValue),1),Ue])):h("",!0),e.row.stockType=="us"?(p(),_("span",$e,[i("$"+r(e.row.marketValue),1),Ke])):h("",!0),i(" ￥"+r((e.row.marketValue/e.row.exchangeRate).toFixed(2)),1)]),_:1}),o(c,{label:"持仓状态",align:"center","show-overflow-tooltip":!0,width:"80"},{default:t(e=>[e.row.positionStatus==0?(p(),_("span",Be,"持仓中")):h("",!0),e.row.positionStatus==1?(p(),_("span",He,"已平仓")):h("",!0)]),_:1}),o(c,{label:"建仓时间",align:"center",key:"creatPositionTime",prop:"creatPositionTime","show-overflow-tooltip":!0,width:"160"}),o(c,{fixed:"right",label:"操作",align:"center",width:"150","class-name":"small-padding fixed-width"},{default:t(e=>[o(X,{disabled:"true",content:"交易详情",placement:"top"},{default:t(()=>[V((p(),H(N,{type:"primary",onClick:U=>Q(e.row)},{default:t(()=>[i("交易详情")]),_:2},1032,["onClick"])),[[le,["transaction"]]])]),_:2},1024)]),_:1})]),_:1},8,["data","onHeaderDragend"])),[[ae,l(C)]]),V(o(ee,{total:l(D),onPagination:T,page:l(n).pageNo,"onUpdate:page":a[8]||(a[8]=e=>l(n).pageNo=e),limit:l(n).pageSize,"onUpdate:limit":a[9]||(a[9]=e=>l(n).pageSize=e)},null,8,["total","page","limit"]),[[B,l(D)>0]])]),_:1})]),_:1})])}}}),Ye=re(Ae,[["__scopeId","data-v-f7ec1984"]]);export{Ye as default};
