import{_ as Ae,B as De,a as Ne,d as $e,r as c,C as re,H as Te,I as Ue,O as je,e as m,J as ue,c as y,o as s,f as e,h as a,K as T,m as v,k as o,l as R,L as qe,M as Fe,i as N,D as U,n as f,j,A as _,N as de,c1 as Ye,s as Re,t as Me}from"./index-BXRoTRPN.js";import{u as Be}from"./useCopy-CSzW9GjL.js";import{u as Ee}from"./useTableColumnWidth-CTSg-whZ.js";import{f as Le,g as Ke,h as Pe}from"./money-B5PkZZtV.js";import{u as z,w as ze}from"./xlsx-Btx5Z9-G.js";const M=q=>(Re("data-v-1b58d25b"),q=q(),Me(),q),He={class:"app-container"},Oe={key:0,style:{"margin-left":"8px",color:"#409EFF"}},Qe={class:"ub ub-h ub-ac",style:{"margin-bottom":"10px"}},We={style:{"font-size":"15px",color:"red","margin-right":"100px"}},Je={style:{"font-size":"15px",color:"red"}},Ze={key:0},Ge=M(()=>v("br",null,null,-1)),Xe=M(()=>v("br",null,null,-1)),et={key:1},tt={key:0},lt=M(()=>v("br",null,null,-1)),at={key:1},ot={key:0},nt=M(()=>v("br",null,null,-1)),rt={key:1},ut={key:0},dt={key:1,style:{color:"#63a103"}},st={key:2,style:{color:"blue"}},it={key:3,style:{color:"#da0114"}},pt=De({name:"User"}),ct=Object.assign(pt,{setup(q){var J,Z,G,X,ee,te;const{copyText:H}=Be(),{tableRef:se,handleHeaderDragend:ie,applyStoredColumnWidths:pe}=Ee("outList-table"),B=Ne(),{proxy:F}=$e(),E=c([]);c(!1),c(!1);const L=c(!0),ce=c(!0);c([]),c(!0),c(!0);const K=c(0);c("");const x=c([]),Y=c([]),me=re(Te().listcashoutType),fe=re({form:{},formIv:{},queryParams:{pageNo:1,pageSize:10,agentId:(Z=(J=B.currentRoute.value)==null?void 0:J.query)!=null&&Z.id?(X=(G=B.currentRoute.value)==null?void 0:G.query)==null?void 0:X.id:void 0,invitationCode:void 0},totalOrderAmount:0,totalFinalAmount:0});function _e(){const r=E.value,l=z.json_to_sheet(r);console.log(l);const d=z.book_new();z.book_append_sheet(d,l,"Sheet1");const n=ze(d,{bookType:"xlsx",type:"binary"});function p(I){const $=new ArrayBuffer(I.length),h=new Uint8Array($);for(let S=0;S!==I.length;++S)h[S]=I.charCodeAt(S)&255;return $}Ye.saveAs(new Blob([p(n)],{type:"application/octet-stream"}),"data.xlsx")}const{queryParams:u,form:mt,rules:ft,rulesIv:_t,formIv:yt,totalOrderAmount:O,totalFinalAmount:Q}=Ue(fe);function w(){L.value=!0,Le(ye(u.value,x.value,Y.value)).then(r=>{L.value=!1,E.value=r.data.page.records,K.value=r.data.page.total,O.value=r.data.totalOrderAmount,Q.value=r.data.totalFinalAmount,pe()})}function ye(r,l,d){let n=r;return n.params=typeof n.params=="object"&&n.params!==null&&!Array.isArray(n.params)?n.params:{},l=Array.isArray(l)?l:[],d=Array.isArray(l)?l:[],n.requestTimeStart=l[0]&&l[0]+" 00:00:00",n.requestTimeEnd=l[1]&&l[1]+" 23:59:59",n.operateTimeStart=d[0]&&d[0]+" 00:00:00",n.operateTimeEnd=d[1]&&d[1]+" 23:59:59",n}function V(){u.value.pageNo=1,w()}function ve(){x.value=[],F.resetForm("queryRef"),u.value.agentId=void 0,u.value.invitationCode=void 0,V()}function he(r){const l=r.id;F.$modal.confirm("是否确定要通过该订单？此操作不可恢复").then(function(){return Ke({id:l})}).then(()=>{w(),F.$modal.msgSuccess("操作成功")}).catch(()=>{})}const C=c(!1),A=c("");let W=null;function be(r){W=r,C.value=!0}function we(){Pe({id:W.id,remark:A.value}).then(()=>{w(),F.$modal.msgSuccess("操作成功"),C.value=!1,A.value=""}).catch(()=>{})}let b=r=>r<10?"0"+r:r;if(((te=(ee=B.currentRoute.value)==null?void 0:ee.query)==null?void 0:te.type)==1){let r=new Date,l=r.getFullYear(),d=r.getMonth()+1,n=r.getDate();r.getHours(),r.getMinutes(),r.getSeconds(),d>12&&(d=d-12),u.value.requestTimeStart=`${l}-${b(d)}-${b(n)} 00:00:00`,u.value.requestTimeEnd=`${l}-${b(d)}-${b(n)} 23:59:59`,x.value=[`${l}-${b(d)}-${b(n)}`,`${l}-${b(d)}-${b(n)}`]}w();const g=c(null);let D=null;const k=c(0);function ge(){D&&(clearInterval(D),D=null),g.value?(k.value=g.value/1e3,D=setInterval(()=>{k.value>0&&k.value--,k.value===0&&(w(),k.value=g.value/1e3)},1e3),w()):k.value=0}return je(()=>{D&&clearInterval(D)}),(r,l)=>{const d=m("el-input"),n=m("el-form-item"),p=m("el-option"),I=m("el-select"),$=m("el-date-picker"),h=m("el-button"),S=m("el-form"),i=m("el-table-column"),le=m("CopyDocument"),ae=m("el-icon"),oe=m("el-tooltip"),ke=m("el-table"),Ie=m("pagination"),Se=m("el-col"),xe=m("el-row"),Ve=m("el-dialog"),ne=ue("hasPermi"),Ce=ue("loading");return s(),y("div",He,[e(xe,{gutter:20},{default:a(()=>[e(Se,{xs:24},{default:a(()=>[T(e(S,{model:o(u),ref:"queryRef",inline:!0,"label-width":"68px"},{default:a(()=>[e(n,{label:"记录ID",prop:"id"},{default:a(()=>[e(d,{oninput:"if(value.length>6)value=value.slice(0,6)",modelValue:o(u).id,"onUpdate:modelValue":l[0]||(l[0]=t=>o(u).id=t),placeholder:"请输入记录ID",clearable:"",style:{width:"150px"},onKeyup:R(V,["enter"])},null,8,["modelValue"])]),_:1}),e(n,{label:"会员查询",prop:"userId"},{default:a(()=>[e(d,{type:"number",oninput:"if(value.length>6)value=value.slice(0,6)",modelValue:o(u).userId,"onUpdate:modelValue":l[1]||(l[1]=t=>o(u).userId=t),placeholder:"请输入会员Id",clearable:"",style:{width:"150px"},onKeyup:R(V,["enter"])},null,8,["modelValue"])]),_:1}),e(n,{label:"所属代理",prop:"agentId"},{default:a(()=>[e(d,{modelValue:o(u).agentId,"onUpdate:modelValue":l[2]||(l[2]=t=>o(u).agentId=t),placeholder:"请输入代理id",clearable:"",style:{width:"150px"},onKeyup:R(V,["enter"])},null,8,["modelValue"])]),_:1}),e(n,{label:"订单号",prop:"orderSn"},{default:a(()=>[e(d,{modelValue:o(u).orderSn,"onUpdate:modelValue":l[3]||(l[3]=t=>o(u).orderSn=t),placeholder:"请输入订单号",clearable:"",style:{width:"190px"},onKeyup:R(V,["enter"])},null,8,["modelValue"])]),_:1}),e(n,{style:{width:"240px"},label:"提现方式",prop:"cashoutTypeCode"},{default:a(()=>[e(I,{style:{width:"100%"},modelValue:o(u).cashoutTypeCode,"onUpdate:modelValue":l[4]||(l[4]=t=>o(u).cashoutTypeCode=t),placeholder:"全部"},{default:a(()=>[e(p,{key:"-1",label:"全部",value:""}),(s(!0),y(qe,null,Fe(o(me),t=>(s(),N(p,{key:t.code,label:t.name,value:t.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"订单状态",prop:"orderStatus"},{default:a(()=>[e(I,{modelValue:o(u).orderStatus,"onUpdate:modelValue":l[5]||(l[5]=t=>o(u).orderStatus=t),style:{width:"150px"},placeholder:"全部"},{default:a(()=>[e(p,{key:"-1",label:"全部",value:""}),e(p,{key:"0",label:"待审核",value:0}),e(p,{key:"1",label:"成功",value:1}),e(p,{key:"2",label:"取消",value:2}),e(p,{key:"2",label:"拒绝",value:2})]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"申请时间",style:{width:"308px"}},{default:a(()=>[e($,{modelValue:o(x),"onUpdate:modelValue":l[6]||(l[6]=t=>U(x)?x.value=t:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),e(n,{label:"审核时间",style:{width:"308px"}},{default:a(()=>[e($,{modelValue:o(Y),"onUpdate:modelValue":l[7]||(l[7]=t=>U(Y)?Y.value=t:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),e(n,null,{default:a(()=>[e(h,{type:"primary",icon:"Search",onClick:V},{default:a(()=>[f("搜索")]),_:1}),e(h,{icon:"Refresh",onClick:ve},{default:a(()=>[f("重置")]),_:1}),e(h,{type:"primary",icon:"Download",onClick:_e},{default:a(()=>[f("导出搜索数据")]),_:1})]),_:1}),e(n,{label:"自动刷新"},{default:a(()=>[e(I,{modelValue:o(g),"onUpdate:modelValue":l[8]||(l[8]=t=>U(g)?g.value=t:null),onChange:ge,style:{width:"120px"},placeholder:"关闭"},{default:a(()=>[e(p,{label:"关闭",value:null}),e(p,{label:"5秒",value:5e3}),e(p,{label:"10秒",value:1e4}),e(p,{label:"30秒",value:3e4}),e(p,{label:"1分钟",value:6e4}),e(p,{label:"3分钟",value:18e4}),e(p,{label:"5分钟",value:3e5})]),_:1},8,["modelValue"]),o(g)?(s(),y("span",Oe,_(o(k))+" 秒后自动刷新",1)):j("",!0)]),_:1})]),_:1},8,["model"]),[[de,o(ce)]]),v("div",Qe,[v("div",We,"申请金额合计:"+_(o(O)),1),v("div",Je,"应转金额合计:"+_(o(Q)),1)]),T((s(),N(ke,{border:"",data:o(E),onHeaderDragend:o(ie),ref_key:"tableRef",ref:se},{default:a(()=>[e(i,{label:"记录ID",width:"90",align:"center",key:"agentId",prop:"agentId","show-overflow-tooltip":!0},{default:a(t=>[v("span",null,_(t.row.id),1)]),_:1}),e(i,{label:"用户信息",align:"center",width:"150","show-overflow-tooltip":!0},{default:a(t=>[t.row.userId?(s(),y("span",Ze,[f(_(t.row.realName?t.row.realName:t.row.nickname),1),Ge,f(" "+_(t.row.userId),1),e(ae,{style:{cursor:"pointer","margin-left":"4px"},onClick:P=>o(H)(t.row.userId)},{default:a(()=>[e(le)]),_:2},1032,["onClick"]),Xe,f(" L"+_(t.row.levelId)+"-"+_(t.row.levelName),1)])):(s(),y("span",et,"-"))]),_:1}),e(i,{label:"直属代理（ID）",width:"150",align:"center",key:"spreadCount",prop:"spreadCount","show-overflow-tooltip":!0},{default:a(t=>[t.row.agentId?(s(),y("span",tt,[f(_(t.row.agentName),1),lt,f("（"+_(t.row.agentId)+"）",1)])):(s(),y("span",at,"-"))]),_:1}),e(i,{label:"团队总代(ID)",width:"150",align:"center"},{default:a(t=>[t.row.generalAgentId?(s(),y("span",ot,[f(_(t.row.generalAgentName),1),nt,f("（"+_(t.row.generalAgentId)+"）",1)])):(s(),y("span",rt,"-"))]),_:1}),e(i,{label:"订单号",width:"210",align:"center",key:"orderSn",prop:"orderSn"},{default:a(t=>[v("span",null,_(t.row.orderSn),1),e(ae,{style:{cursor:"pointer","margin-left":"4px"},onClick:P=>o(H)(t.row.orderSn)},{default:a(()=>[e(le)]),_:2},1032,["onClick"])]),_:1}),e(i,{label:"提现方式",width:"100",align:"center",key:"cashinTypeName",prop:"cashinTypeName","show-overflow-tooltip":!0},{default:a(t=>[v("span",null,_(t.row.cashoutTypeName),1)]),_:1}),e(i,{label:"申请金额",width:"100",align:"center",key:"orderAmount",prop:"orderAmount"}),e(i,{label:"手续费",width:"100",align:"center",key:"fee",prop:"fee"}),e(i,{label:"到账金额",width:"100",align:"center",key:"finalAmount",prop:"finalAmount"}),e(i,{label:"提现银行",width:"130",align:"center",key:"bankName",prop:"bankName"}),e(i,{label:"提现支行",width:"130",align:"center",key:"branchAddress",prop:"branchAddress"}),e(i,{label:"银行卡姓名",width:"100",align:"center",key:"realName",prop:"realName"}),e(i,{label:"银行卡号",width:"150",align:"center",key:"cardNo",prop:"cardNo"}),e(i,{label:"备注",align:"center",key:"remark",prop:"remark"}),e(i,{label:"审核时间",width:"160",align:"center",key:"operateTime",prop:"operateTime"}),e(i,{label:"状态",width:"100",align:"center",key:"orderStatus",prop:"orderStatus"},{default:a(t=>[t.row.orderStatus==0?(s(),y("span",ut,"审核中")):t.row.orderStatus==1?(s(),y("span",dt,"提现成功")):j("",!0),t.row.orderStatus==2?(s(),y("span",st,"已取消")):t.row.orderStatus==3?(s(),y("span",it,"已拒绝")):j("",!0)]),_:1}),e(i,{label:"操作人",width:"150",align:"center",key:"operator",prop:"operator"}),e(i,{label:"操作",fixed:"right",align:"center",width:"160","class-name":"small-padding fixed-width"},{default:a(t=>[t.row.orderStatus==0?(s(),N(oe,{key:0,disabled:"true",content:"通过",placement:"top"},{default:a(()=>[T((s(),N(h,{type:"primary",onClick:P=>he(t.row)},{default:a(()=>[f("通过")]),_:2},1032,["onClick"])),[[ne,["cashoutPass"]]])]),_:2},1024)):j("",!0),t.row.orderStatus==0?(s(),N(oe,{key:1,disabled:"true",content:"拒绝",placement:"top"},{default:a(()=>[T((s(),N(h,{type:"danger",onClick:P=>be(t.row)},{default:a(()=>[f("拒绝")]),_:2},1032,["onClick"])),[[ne,["cashoutReject"]]])]),_:2},1024)):j("",!0)]),_:1})]),_:1},8,["data","onHeaderDragend"])),[[Ce,o(L)]]),T(e(Ie,{total:o(K),page:o(u).pageNo,"onUpdate:page":l[9]||(l[9]=t=>o(u).pageNo=t),onPagination:w,limit:o(u).pageSize,"onUpdate:limit":l[10]||(l[10]=t=>o(u).pageSize=t)},null,8,["total","page","limit"]),[[de,o(K)>0]])]),_:1})]),_:1}),e(Ve,{title:"拒绝订单",modelValue:o(C),"onUpdate:modelValue":l[13]||(l[13]=t=>U(C)?C.value=t:null),width:"400px",onClose:l[14]||(l[14]=t=>A.value="")},{footer:a(()=>[e(h,{onClick:l[12]||(l[12]=t=>C.value=!1)},{default:a(()=>[f("取消")]),_:1}),e(h,{type:"primary",onClick:we},{default:a(()=>[f("确定")]),_:1})]),default:a(()=>[e(S,null,{default:a(()=>[e(n,{label:"备注"},{default:a(()=>[e(d,{type:"textarea",modelValue:o(A),"onUpdate:modelValue":l[11]||(l[11]=t=>U(A)?A.value=t:null),placeholder:"请输入拒绝原因",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),kt=Ae(ct,[["__scopeId","data-v-1b58d25b"]]);export{kt as default};
