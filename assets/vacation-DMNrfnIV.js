import{P as I,B as se,a as pe,d as me,r as s,C as ce,I as fe,e as i,J as z,c as S,o as u,f as e,h as a,K as T,k as t,D as M,n as g,N as F,i as p,j as m,A as _e,m as ge}from"./index-BXRoTRPN.js";import{u as ye,C as ke}from"./useTableColumnVisibility-CzsC5pRe.js";import{u as be}from"./useTableColumnWidth-CTSg-whZ.js";function ve(v){return I({url:"/system/holiday/list",method:"post",data:v})}function he(v){return I({url:"/system/holiday/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"post",data:v})}function De(v){return I({url:"/system/holiday/save",method:"post",data:v})}const we={class:"app-container"},Ve={key:0},Ce={key:1},Te={key:2},Se={class:"dialog-footer"},xe=se({name:"User"}),Ie=Object.assign(xe,{setup(v){const{tableRef:H,handleHeaderDragend:L,applyStoredColumnWidths:O}=be("vacation-table"),c=ye("vacation-table",["id","marketType","gregorianDate","lunarDateString","remark","addTime","operator"]),Q=[{key:"id",label:"记录ID",prop:"id"},{key:"marketType",label:"股市",prop:"marketType"},{key:"gregorianDate",label:"公历日期",prop:"gregorianDate"},{key:"lunarDateString",label:"农历日期",prop:"lunarDateString"},{key:"remark",label:"备注",prop:"remark"},{key:"addTime",label:"添加时间",prop:"addTime"},{key:"operator",label:"操作人",prop:"operator"}];c.initializeColumns(Q),pe();const{proxy:h}=me(),P=s([]),y=s(!1);s(!1);const x=s(!0),W=s(!0),E=s([]);s(!0),s(!0);const N=s(0),U=s(""),w=s([]),J=ce({form:{},queryParams:{pageNo:1,pageSize:10,agentId:void 0,agentName:void 0,generalParentId:void 0,parentId:void 0},rules:{marketType:[{required:!0,message:"股市类型不能为空",trigger:"blur"}],gregorianDate:[{required:!0,message:"请选择公历日期",trigger:"blur"}]}}),{queryParams:f,form:n,rules:K}=fe(J);function V(){x.value=!0,ve(G(f.value,w.value)).then(d=>{x.value=!1,P.value=d.data.records,N.value=d.data.total,O()})}function G(d,l){let r=d;return r.params=typeof r.params=="object"&&r.params!==null&&!Array.isArray(r.params)?r.params:{},l=Array.isArray(l)?l:[],r.startTime=l[0]&&l[0]+" 00:00:00",r.endTime=l[1]&&l[1]+" 23:59:59",r}function Y(){f.value.pageNo=1,V()}function X(){w.value=[],h.resetForm("queryRef"),Y()}function Z(d){const l=d.id;h.$modal.confirm("是否确定删除该条记录？该操作不可撤回").then(function(){return he({id:l})}).then(()=>{V(),h.$modal.msgSuccess("删除成功")}).catch(()=>{})}function A(){n.value={id:void 0,agentName:void 0,parentId:void 0,serviceUrl:void 0},h.resetForm("userRef")}function ee(){y.value=!1,A()}function ae(){A(),y.value=!0,U.value="添加节假日"}function te(d){A(),d.id||E.value,n.value=Object.assign({},d),y.value=!0,U.value="修改节假日"}function le(){h.$refs.userRef.validate(d=>{d&&(n.value.gregorianDate&&(n.value.gregorianDate=n.value.gregorianDate+" 00:00:00"),n.value.lunarDateString&&(n.value.lunarDateString=n.value.lunarDateString+" 00:00:00"),De(n.value).then(l=>{h.$modal.msgSuccess("操作成功"),y.value=!1,V()}))})}return V(),(d,l)=>{const r=i("el-option"),R=i("el-select"),D=i("el-form-item"),q=i("el-date-picker"),k=i("el-button"),$=i("el-form"),b=i("el-col"),C=i("el-row"),_=i("el-table-column"),B=i("el-tooltip"),oe=i("el-table"),ne=i("pagination"),re=i("el-input"),ie=i("el-dialog"),j=z("hasPermi"),ue=z("loading");return u(),S("div",we,[e(C,{gutter:20},{default:a(()=>[e(b,{xs:24},{default:a(()=>[T(e($,{model:t(f),ref:"queryRef",inline:!0,"label-width":"68px"},{default:a(()=>[e(D,{label:"股市类型",prop:"marketType"},{default:a(()=>[e(R,{modelValue:t(f).marketType,"onUpdate:modelValue":l[0]||(l[0]=o=>t(f).marketType=o),style:{width:"150px"},placeholder:"全部"},{default:a(()=>[e(r,{key:"0",label:"全部",value:""}),e(r,{key:"1",label:"A股",value:"a"}),e(r,{key:"2",label:"港股",value:"hk"}),e(r,{key:"3",label:"美股",value:"us"})]),_:1},8,["modelValue"])]),_:1}),e(D,{label:"日期",style:{width:"308px"}},{default:a(()=>[e(q,{modelValue:t(w),"onUpdate:modelValue":l[1]||(l[1]=o=>M(w)?w.value=o:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),e(D,null,{default:a(()=>[e(k,{type:"primary",icon:"Search",onClick:Y},{default:a(()=>[g("查询")]),_:1}),e(k,{icon:"Refresh",onClick:X},{default:a(()=>[g("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[F,t(W)]])]),_:1}),e(b,{xs:24},{default:a(()=>[e(C,{gutter:10,class:"mb8"},{default:a(()=>[e(b,{span:1.5},{default:a(()=>[e(ke,{"column-visibility":t(c)},null,8,["column-visibility"])]),_:1}),e(b,{span:1.5},{default:a(()=>[e(k,{type:"primary",plain:"",icon:"Plus",onClick:ae},{default:a(()=>[g("添加节假日")]),_:1})]),_:1})]),_:1}),T((u(),p(oe,{border:"",data:t(P),onHeaderDragend:t(L),ref_key:"tableRef",ref:H},{default:a(()=>[t(c).isColumnVisible("id")?(u(),p(_,{label:"记录ID",align:"center",key:"id",prop:"id",width:"90"})):m("",!0),t(c).isColumnVisible("marketType")?(u(),p(_,{key:1,label:"股市",align:"center",width:"90"},{default:a(o=>[o.row.marketType=="a"?(u(),S("span",Ve,"A股")):m("",!0),o.row.marketType=="hk"?(u(),S("span",Ce,"港股")):m("",!0),o.row.marketType=="us"?(u(),S("span",Te,"美股")):m("",!0)]),_:1})):m("",!0),t(c).isColumnVisible("gregorianDate")?(u(),p(_,{label:"公历日期",align:"center",key:"gregorianDate",prop:"gregorianDate",width:"130"},{default:a(o=>[g(_e(o.row.gregorianDate.slice(0,10)),1)]),_:1})):m("",!0),t(c).isColumnVisible("lunarDateString")?(u(),p(_,{label:"农历日期",align:"center",key:"lunarDateString",prop:"lunarDateString",width:"220"})):m("",!0),t(c).isColumnVisible("remark")?(u(),p(_,{label:"备注",align:"center",key:"remark",prop:"remark",width:"290","show-overflow-tooltip":!0})):m("",!0),t(c).isColumnVisible("addTime")?(u(),p(_,{label:"添加时间",align:"center",key:"addTime",prop:"addTime",width:"160"})):m("",!0),t(c).isColumnVisible("operator")?(u(),p(_,{label:"操作人",align:"center",key:"operator",prop:"operator",width:"220"})):m("",!0),e(_,{label:"操作",align:"center",width:"160","class-name":"small-padding fixed-width"},{default:a(o=>[e(B,{disabled:"true",content:"编辑",placement:"top"},{default:a(()=>[T((u(),p(k,{type:"primary",onClick:de=>te(o.row)},{default:a(()=>[g("编辑")]),_:2},1032,["onClick"])),[[j,["editVacation"]]])]),_:2},1024),e(B,{disabled:"true",content:"删除",placement:"top"},{default:a(()=>[T((u(),p(k,{type:"danger",onClick:de=>Z(o.row)},{default:a(()=>[g("删除")]),_:2},1032,["onClick"])),[[j,["delVacation"]]])]),_:2},1024)]),_:1})]),_:1},8,["data","onHeaderDragend"])),[[ue,t(x)]]),T(e(ne,{total:t(N),page:t(f).pageNo,"onUpdate:page":l[2]||(l[2]=o=>t(f).pageNo=o),onPagination:V,limit:t(f).pageSize,"onUpdate:limit":l[3]||(l[3]=o=>t(f).pageSize=o)},null,8,["total","page","limit"]),[[F,t(N)>0]])]),_:1})]),_:1}),e(ie,{title:t(U),modelValue:t(y),"onUpdate:modelValue":l[7]||(l[7]=o=>M(y)?y.value=o:null),width:"600px","append-to-body":""},{footer:a(()=>[ge("div",Se,[e(k,{type:"primary",onClick:le},{default:a(()=>[g("确 定")]),_:1}),e(k,{onClick:ee},{default:a(()=>[g("取 消")]),_:1})])]),default:a(()=>[e($,{model:t(n),rules:t(K),ref:"userRef","label-width":"100px"},{default:a(()=>[e(C,null,{default:a(()=>[e(b,{span:24},{default:a(()=>[e(D,{label:"股市类型",prop:"marketType"},{default:a(()=>[e(R,{modelValue:t(n).marketType,"onUpdate:modelValue":l[4]||(l[4]=o=>t(n).marketType=o),placeholder:"请选择"},{default:a(()=>[e(r,{key:"1",label:"A股",value:"a"}),e(r,{key:"2",label:"港股",value:"hk"}),e(r,{key:"3",label:"美股",value:"us"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(C,null,{default:a(()=>[e(b,{span:24},{default:a(()=>[e(D,{label:"公历日期",prop:"gregorianDate"},{default:a(()=>[e(q,{style:{width:"100%"},modelValue:t(n).gregorianDate,"onUpdate:modelValue":l[5]||(l[5]=o=>t(n).gregorianDate=o),"value-format":"YYYY-MM-DD",type:"date",placeholder:"请选择公历日期"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(C,null,{default:a(()=>[e(b,{span:24},{default:a(()=>[e(D,{label:"备注",prop:"content"},{default:a(()=>[e(re,{modelValue:t(n).remark,"onUpdate:modelValue":l[6]||(l[6]=o=>t(n).remark=o),rows:5,type:"textarea",placeholder:"请输入公告内容",maxlength:"250","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{Ie as default};
