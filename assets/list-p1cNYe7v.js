import{_ as ye,B as be,a as ve,d as Pe,r as w,C as H,I as Ie,e as f,J,c as s,o as r,f as t,h as o,K as I,k as l,l as M,D as B,n,N as G,i as y,A as i,m as d,j as c,R as q,s as xe,t as Ce}from"./index-BXRoTRPN.js";import{u as Te}from"./useTableColumnWidth-CTSg-whZ.js";import{u as Ve}from"./useCopy-CSzW9GjL.js";import{_ as $e}from"./index-pTY-mJ8b.js";import{_ as Fe}from"./index-DxhvaFtQ.js";import{s as Ne,a as Se,l as De,b as Re,d as Ae}from"./stock-qSVPq5v2.js";import"./user-Dhl3jA1d.js";const k=N=>(xe("data-v-a6a35d35"),N=N(),Ce(),N),Ue={class:"app-container"},Ke={key:0},Le=k(()=>d("br",null,null,-1)),He=k(()=>d("br",null,null,-1)),Me={key:1},Be={key:0},qe=k(()=>d("br",null,null,-1)),ze={key:1},je={key:0},Ee=k(()=>d("br",null,null,-1)),Oe={key:1},Ye={class:"green"},Qe={key:0,class:"red"},We={key:1,class:"red"},Je={key:2,class:"red"},Ge={key:3,style:{"background-color":"#F5E2C6",border:"1px solid #F59A23",color:"#F59A23"},class:"red"},Xe={key:4,style:{"background-color":"#F0E0FC",border:"1px solid #8400FF",color:"#8400FF"},class:"red"},Ze={key:0,class:"green"},et={key:1,class:"red"},tt={key:0},ot=k(()=>d("br",null,null,-1)),lt={key:1},nt=k(()=>d("br",null,null,-1)),at={key:0},rt=k(()=>d("br",null,null,-1)),it={key:1},st=k(()=>d("br",null,null,-1)),dt={key:0},ut=k(()=>d("br",null,null,-1)),ct={key:1},pt=k(()=>d("br",null,null,-1)),_t={key:0},mt=k(()=>d("br",null,null,-1)),ft={key:1},kt=k(()=>d("br",null,null,-1)),wt={key:0},gt={key:0},ht=k(()=>d("br",null,null,-1)),yt={key:1},bt=k(()=>d("br",null,null,-1)),vt={key:1},Pt={class:"dialog-footer"},It={class:"dialog-footer"},xt=be({name:"User"}),Ct=Object.assign(xt,{setup(N){const{tableRef:X,handleHeaderDragend:Z,applyStoredColumnWidths:ee}=Te("stock/list-table"),{copyText:z}=Ve();ve();const{proxy:g}=Pe(),j=w([]),x=w(!1),C=w(!1),R=w(!0),te=w(!0),oe=w([]);w(!0),w(!0);const A=w(0),E=w(""),V=w([]);H([{label:"实盘",value:0},{label:"模拟",value:1}]),H([{label:"顶级代理",value:0}]);const le=H({form:{isBlockTrading:!0,stockPlate:" ",isShow:!0,isLock:!1},form1:{},queryParams:{pageNo:1,pageSize:10},rules1:{lockInPeriod:[{required:!0,message:"请输入锁仓天数",trigger:"blur"}]},rules:{lockMsg:[{required:!0,message:"请输入锁仓理由",trigger:"blur"}]}}),{queryParams:_,form:b,rules:ne,form1:v,rules1:ae}=Ie(le);function P(){R.value=!0,Ne(re(_.value,V.value)).then(p=>{R.value=!1,j.value=p.data.records,A.value=p.data.total,ee()})}function re(p,a,T){let m=p;return m.params=typeof m.params=="object"&&m.params!==null&&!Array.isArray(m.params)?m.params:{},a=Array.isArray(a)?a:[],m.startTime=a[0]&&a[0]+" 00:00:00",m.endTime=a[1]&&a[1]+" 23:59:59",m}function $(){_.value.pageNo=1,P()}function ie(p){v.value.id=p.id,v.value.lockInPeriod=p.lockInPeriod,C.value=!0}function se(){V.value=[],g.resetForm("queryRef"),$()}function de(p){g.$modal.confirm("是否确定解除锁仓？").then(function(){return Se({id:p.id})}).then(()=>{P(),g.$modal.msgSuccess("操作成功")}).catch(()=>{})}function ue(p){g.$modal.confirm("是否确定要强制平仓？").then(function(){return De({id:p.id})}).then(()=>{P(),g.$modal.msgSuccess("操作成功")}).catch(()=>{})}function O(){b.value={id:void 0,agentName:void 0,parentId:void 0,serviceUrl:void 0,isBlockTrading:!0,stockPlate:" ",isShow:!0,isLock:!1},g.resetForm("userRef")}function ce(){x.value=!1,O()}function pe(){C.value=!1,v.value={}}function _e(p){O(),p.id||oe.value,b.value=Object.assign({},p),x.value=!0,E.value="锁仓"}function me(){g.$refs.userRef.validate(p=>{p&&Re(b.value).then(a=>{g.$modal.msgSuccess("操作成功"),x.value=!1,P()})})}function fe(){g.$refs.userRef1.validate(p=>{p&&Ae(v.value).then(a=>{g.$modal.msgSuccess("操作成功"),C.value=!1,P()})})}return P(),(p,a)=>{const T=f("el-input"),m=f("el-form-item"),ke=f("el-date-picker"),h=f("el-button"),U=f("el-form"),Y=f("CopyDocument"),Q=f("el-icon"),u=f("el-table-column"),S=f("el-tooltip"),we=f("el-table"),ge=f("pagination"),K=f("el-col"),L=f("el-row"),W=f("el-dialog"),D=J("hasPermi"),he=J("loading");return r(),s("div",Ue,[t(L,{gutter:20},{default:o(()=>[t(K,{xs:24},{default:o(()=>[I(t(U,{model:l(_),ref:"queryRef",inline:!0,"label-width":"100"},{default:o(()=>[t(m,{label:"股票查询",prop:"stockCodeOrName"},{default:o(()=>[t(T,{modelValue:l(_).stockCodeOrName,"onUpdate:modelValue":a[0]||(a[0]=e=>l(_).stockCodeOrName=e),placeholder:"请输入股票名称或股票代码",clearable:"",style:{width:"240px"},onKeyup:M($,["enter"])},null,8,["modelValue"])]),_:1}),t(m,{label:"股票类型",prop:"stockType"},{default:o(()=>[t(l(Fe),{style:{width:"200px"},value:l(_).stockType,"onUpdate:value":a[1]||(a[1]=e=>l(_).stockType=e),values:l(b).stockType||0,placeholder:"全部"},null,8,["value","values"])]),_:1}),t(m,{label:"会员查询",prop:"userId"},{default:o(()=>[t(T,{oninput:"if(value.length>6)value=value.slice(0,6)",modelValue:l(_).userId,"onUpdate:modelValue":a[2]||(a[2]=e=>l(_).userId=e),type:"number",placeholder:"请输入会员ID",clearable:"",style:{width:"240px"},onKeyup:M($,["enter"])},null,8,["modelValue"])]),_:1}),t(m,{label:"所属代理",prop:"agentId"},{default:o(()=>[t(l($e),{style:{width:"150px"},value:l(_).agentId,"onUpdate:value":a[3]||(a[3]=e=>l(_).agentId=e),values:l(_).agentId,placeholder:"全部"},null,8,["value","values"])]),_:1}),t(m,{label:"持仓ID",prop:"id"},{default:o(()=>[t(T,{type:"number",modelValue:l(_).id,"onUpdate:modelValue":a[4]||(a[4]=e=>l(_).id=e),placeholder:"请输入持仓ID",clearable:"",style:{width:"240px"},onKeyup:M($,["enter"])},null,8,["modelValue"])]),_:1}),t(m,{label:"建仓时间",style:{width:"308px"}},{default:o(()=>[t(ke,{modelValue:l(V),"onUpdate:modelValue":a[5]||(a[5]=e=>B(V)?V.value=e:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),t(m,null,{default:o(()=>[t(h,{type:"primary",icon:"Search",onClick:$},{default:o(()=>[n("搜索")]),_:1}),t(h,{icon:"Refresh",onClick:se},{default:o(()=>[n("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[G,l(te)]]),I((r(),y(we,{border:"",data:l(j),onHeaderDragend:l(Z),ref_key:"tableRef",ref:X},{default:o(()=>[t(u,{label:"用户信息",align:"center",width:"150","show-overflow-tooltip":!0},{default:o(e=>[e.row.userId?(r(),s("span",Ke,[n(i(e.row.realName?e.row.realName:e.row.nickname)+" ",1),Le,n(" "+i(e.row.userId)+" ",1),t(Q,{style:{cursor:"pointer","margin-left":"4px"},onClick:F=>l(z)(e.row.userId)},{default:o(()=>[t(Y)]),_:2},1032,["onClick"]),He,n(" L"+i(e.row.levelId)+"-"+i(e.row.levelName),1)])):(r(),s("span",Me,"-"))]),_:1}),t(u,{label:"直属代理（ID）",align:"center",width:"150","show-overflow-tooltip":!0},{default:o(e=>[e.row.agentId?(r(),s("span",Be,[n(i(e.row.agentName),1),qe,n("（"+i(e.row.agentId)+"）",1)])):(r(),s("span",ze,"-"))]),_:1}),t(u,{label:"团队总代(ID)",align:"center",width:"150","show-overflow-tooltip":!0},{default:o(e=>[e.row.generalAgentId?(r(),s("span",je,[n(i(e.row.generalAgentName),1),Ee,n("（"+i(e.row.generalAgentId)+"）",1)])):(r(),s("span",Oe,"-"))]),_:1}),t(u,{label:"持仓ID",align:"center",width:"90",key:"id",prop:"id","show-overflow-tooltip":!0},{default:o(e=>[n(i(e.row.id)+" ",1),t(Q,{style:{cursor:"pointer","margin-left":"4px"},onClick:F=>l(z)(e.row.id)},{default:o(()=>[t(Y)]),_:2},1032,["onClick"])]),_:1}),t(u,{label:"股票名称/股票代码",width:"200",align:"center",key:"parentId",prop:"parentId","show-overflow-tooltip":!0},{default:o(e=>[d("span",null,[n(i(e.row.stockName)+"  ",1),d("span",Ye,i(e.row.stockCode),1)])]),_:1}),t(u,{label:"股票类型",width:"80",align:"center",key:"agentName",prop:"agentName","show-overflow-tooltip":!0},{default:o(e=>[e.row.stockType=="sh"?(r(),s("span",Qe,"泸股")):c("",!0),e.row.stockType=="sz"?(r(),s("span",We,"深股")):c("",!0),e.row.stockType=="bj"?(r(),s("span",Je,"北证")):c("",!0),e.row.stockType=="hk"?(r(),s("span",Ge,"港股")):c("",!0),e.row.stockType=="us"?(r(),s("span",Xe,"美股")):c("",!0)]),_:1}),t(u,{label:"账户类型",width:"90",align:"center",key:"positionType",prop:"positionType"},{default:o(e=>[e.row.positionType==0?(r(),s("span",Ze,"正式持仓")):c("",!0),e.row.positionType==1?(r(),s("span",et,"模拟持仓")):c("",!0)]),_:1}),t(u,{label:"买入价",width:"150",align:"center",key:"buyingPrice",prop:"buyingPrice","show-overflow-tooltip":!0},{default:o(e=>[d("span",null,[e.row.stockType=="hk"?(r(),s("span",tt,[n("HK$"+i(e.row.buyingPrice),1),ot])):c("",!0),e.row.stockType=="us"?(r(),s("span",lt,[n("$"+i(e.row.buyingPrice),1),nt])):c("",!0),n(" ￥"+i((e.row.buyingPrice/e.row.exchangeRate).toFixed(2)),1)])]),_:1}),t(u,{label:"现价",width:"150",align:"center",key:"nowPrice",prop:"nowPrice","show-overflow-tooltip":!0},{default:o(e=>[d("span",{class:q(e.row.floatingProfit>0?"reds":e.row.floatingProfit==0?"black":"greens")},[e.row.stockType=="hk"?(r(),s("span",at,[n("HK$"+i(e.row.nowPrice),1),rt])):c("",!0),e.row.stockType=="us"?(r(),s("span",it,[n("$"+i(e.row.nowPrice),1),st])):c("",!0),n(" ￥"+i((e.row.nowPrice/e.row.exchangeRate).toFixed(2)),1)],2)]),_:1}),t(u,{label:"浮动盈亏",width:"150",align:"center",key:"nowPrice",prop:"nowPrice","show-overflow-tooltip":!0},{default:o(e=>[d("span",{class:q(e.row.floatingProfit>0?"reds":e.row.floatingProfit==0?"black":"greens")},[e.row.stockType=="hk"?(r(),s("span",dt,[n("HK$"+i(e.row.floatingProfit),1),ut])):c("",!0),e.row.stockType=="us"?(r(),s("span",ct,[n("$"+i(e.row.floatingProfit),1),pt])):c("",!0),n(" ￥"+i((e.row.floatingProfit/e.row.exchangeRate).toFixed(2)),1)],2)]),_:1}),t(u,{label:"数量（股）",width:"150",align:"center",key:"buyingShares",prop:"buyingShares"}),t(u,{label:"冻结（股）",width:"150",align:"center",key:"unavailableShares",prop:"unavailableShares"}),t(u,{label:"总市值",width:"150",align:"center",key:"marketValue",prop:"marketValue","show-overflow-tooltip":!0},{default:o(e=>[d("span",{class:q(e.row.floatingProfit>0?"reds":e.row.floatingProfit==0?"black":"greens")},[e.row.stockType=="hk"?(r(),s("span",_t,[n("HK$"+i(e.row.marketValue),1),mt])):c("",!0),e.row.stockType=="us"?(r(),s("span",ft,[n("$"+i(e.row.marketValue),1),kt])):c("",!0),n(" ￥"+i((e.row.marketValue/e.row.exchangeRate).toFixed(2)),1)],2)]),_:1}),t(u,{label:"杠杆倍数",width:"90",align:"center",key:"lever",prop:"lever"}),t(u,{label:"锁仓天数（T+N）",width:"130",align:"center",key:"lockInPeriod",prop:"lockInPeriod","show-overflow-tooltip":!0}),t(u,{label:"融资金额",width:"130",align:"center",key:"remainingFinancingAmount"},{default:o(e=>[e.row.remainingFinancingAmount?(r(),s("span",wt,[e.row.stockType=="hk"?(r(),s("span",gt,[n("HK$"+i((e.row.remainingFinancingAmount*e.row.exchangeRate).toFixed(2)),1),ht])):c("",!0),e.row.stockType=="us"?(r(),s("span",yt,[n("$"+i((e.row.remainingFinancingAmount*e.row.exchangeRate).toFixed(2)),1),bt])):c("",!0),n(" ￥"+i(e.row.remainingFinancingAmount.toFixed(2)),1)])):(r(),s("span",vt,"-"))]),_:1}),t(u,{label:"融资年化率",width:"100",align:"center"},{default:o(e=>[n(i(e.row.annualizedInterestRate*100)+"% ",1)]),_:1}),t(u,{label:"锁定原因",width:"150",align:"center",key:"lockMsg",prop:"lockMsg"}),t(u,{label:"建仓时间",width:"160",align:"center",key:"positionTime",prop:"positionTime"}),t(u,{label:"操作",fixed:"right",align:"center",width:"300","class-name":"small-padding fixed-width"},{default:o(e=>[e.row.isLock?c("",!0):(r(),y(S,{key:0,disabled:"true",content:"锁仓",placement:"none"},{default:o(()=>[I((r(),y(h,{type:"danger",onClick:F=>_e(e.row)},{default:o(()=>[n("锁仓")]),_:2},1032,["onClick"])),[[D,["stockPositionLock"]]])]),_:2},1024)),e.row.isLock?(r(),y(S,{key:1,disabled:"true",content:"解锁",placement:"none"},{default:o(()=>[I((r(),y(h,{type:"primary",onClick:F=>de(e.row)},{default:o(()=>[n("解锁")]),_:2},1032,["onClick"])),[[D,["stockPositionUnlock"]]])]),_:2},1024)):c("",!0),e.row.isLock?c("",!0):(r(),y(S,{key:2,disabled:"true",content:"强制平仓",placement:"none"},{default:o(()=>[I((r(),y(h,{type:"primary",onClick:F=>ue(e.row)},{default:o(()=>[n("强制平仓")]),_:2},1032,["onClick"])),[[D,["stockPositionClose"]]])]),_:2},1024)),t(S,{disabled:"true",content:"锁仓天数",placement:"none"},{default:o(()=>[I((r(),y(h,{type:"primary",onClick:F=>ie(e.row)},{default:o(()=>[n("锁仓天数")]),_:2},1032,["onClick"])),[[D,["stockPositionLockInPeriodEdit"]]])]),_:2},1024)]),_:1})]),_:1},8,["data","onHeaderDragend"])),[[he,l(R)]]),I(t(ge,{total:l(A),page:l(_).pageNo,"onUpdate:page":a[6]||(a[6]=e=>l(_).pageNo=e),onPagination:P,limit:l(_).pageSize,"onUpdate:limit":a[7]||(a[7]=e=>l(_).pageSize=e)},null,8,["total","page","limit"]),[[G,l(A)>0]])]),_:1})]),_:1}),t(W,{title:l(E),modelValue:l(x),"onUpdate:modelValue":a[9]||(a[9]=e=>B(x)?x.value=e:null),width:"900px","append-to-body":""},{footer:o(()=>[d("div",Pt,[t(h,{type:"primary",onClick:me},{default:o(()=>[n("确 定")]),_:1}),t(h,{onClick:ce},{default:o(()=>[n("取 消")]),_:1})])]),default:o(()=>[t(U,{model:l(b),rules:l(ne),ref:"userRef","label-width":"80px"},{default:o(()=>[t(L,null,{default:o(()=>[t(K,{span:24},{default:o(()=>[t(m,{"label-width":"110",label:"锁仓理由",prop:"lockMsg"},{default:o(()=>[t(T,{modelValue:l(b).lockMsg,"onUpdate:modelValue":a[8]||(a[8]=e=>l(b).lockMsg=e),type:"text",placeholder:"请输入锁仓理由",maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),t(W,{title:"修改锁仓天数",modelValue:l(C),"onUpdate:modelValue":a[11]||(a[11]=e=>B(C)?C.value=e:null),width:"900px","append-to-body":""},{footer:o(()=>[d("div",It,[t(h,{type:"primary",onClick:fe},{default:o(()=>[n("确 定")]),_:1}),t(h,{onClick:pe},{default:o(()=>[n("取 消")]),_:1})])]),default:o(()=>[t(U,{model:l(v),rules:l(ae),ref:"userRef1","label-width":"80px"},{default:o(()=>[t(L,null,{default:o(()=>[t(K,{span:24},{default:o(()=>[t(m,{"label-width":"110",label:"锁仓天数",prop:"lockInPeriod"},{default:o(()=>[t(T,{modelValue:l(v).lockInPeriod,"onUpdate:modelValue":a[10]||(a[10]=e=>l(v).lockInPeriod=e),type:"number",placeholder:"请输入锁仓天数",maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),Rt=ye(Ct,[["__scopeId","data-v-a6a35d35"]]);export{Rt as default};
