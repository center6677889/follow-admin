import{P,_ as ne,B as re,a as de,d as ie,r as E,C as ue,I as se,e as r,J as B,c as _,o as i,f as e,h as l,K as w,k as a,l as q,n as p,i as C,A as f,j as z,m as v,N as pe,s as ce,t as me}from"./index-BXRoTRPN.js";import{u as _e}from"./useTableColumnWidth-CTSg-whZ.js";import{u as fe}from"./useCopy-CSzW9GjL.js";function ge(m){return P({url:"/agent/list",method:"post",data:m})}function be(m){return P({url:"/agent/updatePromotionEnable",method:"post",data:m,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function ye(m){return P({url:"/agent/updateAgentLoginEnable",method:"post",data:m,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}const V=m=>(ce("data-v-45400a0d"),m=m(),me(),m),he={class:"app-container"},we={key:0},ve=V(()=>v("br",null,null,-1)),ke=V(()=>v("br",null,null,-1)),Ce={key:1},Ve={key:0},xe={key:1},Ie={key:0},Se=V(()=>v("br",null,null,-1)),Ae={key:1},Le={key:0},Ne=V(()=>v("br",null,null,-1)),Ue={key:1},Ee=re({name:"User"}),Pe=Object.assign(Ee,{setup(m){const{tableRef:K,handleHeaderDragend:j,applyStoredColumnWidths:H}=_e("agent/list-table"),{copyText:D}=fe(),M=de(),{proxy:x}=ie(),T=E([]),I=E(!0),S=E(0);function A(d,o){M.push({path:"/agent/team",query:{id:d.id,type:o}})}const Q=ue({queryParams:{pageNo:1,pageSize:10,searchChildOfAgent:void 0}}),{queryParams:n}=se(Q);function b(){I.value=!0,ge(W(n.value)).then(d=>{I.value=!1,T.value=d.data.records,S.value=d.data.total,H()})}function W(d){var y;let o=d;return o.params=typeof o.params=="object"&&o.params!==null&&!Array.isArray(o.params)?o.params:{},o.searchChildOfAgent=(y=o==null?void 0:o.searchChildOfAgentP)!=null&&y.length?o.searchChildOfAgentP[0]==1:!1,o}function k(){n.value.pageNo=1,b()}function F(){x.resetForm("queryRef"),k()}function J(d){be({id:d.id,enable:d.promotionEnable}).then(o=>{x.$modal.msgSuccess("修改成功"),b()})}function G(d){ye({id:d.id,enable:d.agentLoginEnable}).then(o=>{x.$modal.msgSuccess("修改成功"),b()})}return b(),(d,o)=>{const y=r("el-input"),g=r("el-form-item"),u=r("el-option"),L=r("el-select"),X=r("el-checkbox"),Y=r("el-checkbox-group"),h=r("el-button"),Z=r("el-form"),O=r("CopyDocument"),R=r("el-icon"),c=r("el-table-column"),$=r("el-switch"),N=r("el-tooltip"),ee=r("el-table"),te=r("pagination"),le=r("el-col"),oe=r("el-row"),U=B("hasPermi"),ae=B("loading");return i(),_("div",he,[e(oe,{gutter:20},{default:l(()=>[e(le,{xs:24},{default:l(()=>[e(Z,{model:a(n),ref:"queryRef",inline:!0},{default:l(()=>[e(g,{label:"会员查询",prop:"userId"},{default:l(()=>[e(y,{modelValue:a(n).userId,"onUpdate:modelValue":o[0]||(o[0]=t=>a(n).userId=t),modelModifiers:{number:!0},type:"number",placeholder:"请输入会员id",clearable:"",style:{width:"150px"},onKeyup:q(k,["enter"])},null,8,["modelValue"])]),_:1}),e(g,{label:"账户类型",prop:"accountType"},{default:l(()=>[e(L,{modelValue:a(n).accountType,"onUpdate:modelValue":o[1]||(o[1]=t=>a(n).accountType=t),style:{width:"150px"},placeholder:"全部"},{default:l(()=>[e(u,{key:"0",label:"全部",value:""}),e(u,{key:"1",label:"实盘账户",value:0}),e(u,{key:"2",label:"模拟账户",value:1})]),_:1},8,["modelValue"])]),_:1}),e(g,{label:"会员等级",prop:"levelId"},{default:l(()=>[e(L,{modelValue:a(n).levelId,"onUpdate:modelValue":o[2]||(o[2]=t=>a(n).levelId=t),style:{width:"150px"},placeholder:"全部"},{default:l(()=>[e(u,{key:"0",label:"全部",value:""}),e(u,{key:"1",label:"L1-普通会员",value:1}),e(u,{key:"2",label:"L2-银牌",value:2}),e(u,{key:"3",label:"L3-金牌",value:3}),e(u,{key:"4",label:"L4-钻石",value:4}),e(u,{key:"5",label:"L5-皇冠",value:5})]),_:1},8,["modelValue"])]),_:1}),e(g,{label:"所属代理",prop:"agentId"},{default:l(()=>[e(y,{modelValue:a(n).agentId,"onUpdate:modelValue":o[3]||(o[3]=t=>a(n).agentId=t),modelModifiers:{number:!0},type:"number",placeholder:"请输入所属代理id",clearable:"",style:{width:"150px"},onKeyup:q(k,["enter"])},null,8,["modelValue"])]),_:1}),e(g,{label:"",prop:"searchChildOfAgentP"},{default:l(()=>[e(Y,{modelValue:a(n).searchChildOfAgentP,"onUpdate:modelValue":o[4]||(o[4]=t=>a(n).searchChildOfAgentP=t)},{default:l(()=>[e(X,{label:"包含此代理下级用户",value:"1"})]),_:1},8,["modelValue"])]),_:1}),e(g,{label:"是否允许邀请下级",prop:"promotionEnable"},{default:l(()=>[e(L,{modelValue:a(n).promotionEnable,"onUpdate:modelValue":o[5]||(o[5]=t=>a(n).promotionEnable=t),style:{width:"150px"},placeholder:"全部"},{default:l(()=>[e(u,{key:"0",label:"全部",value:""}),e(u,{key:"1",label:"允许",value:!0}),e(u,{key:"2",label:"不允许",value:!1})]),_:1},8,["modelValue"])]),_:1}),e(g,null,{default:l(()=>[e(h,{type:"primary",icon:"Search",onClick:k},{default:l(()=>[p("查询")]),_:1}),e(h,{icon:"Refresh",onClick:F},{default:l(()=>[p("重置")]),_:1})]),_:1})]),_:1},8,["model"]),w((i(),C(ee,{border:"",data:a(T),onHeaderDragend:a(j),ref_key:"tableRef",ref:K},{default:l(()=>[e(c,{label:"用户信息",align:"center",width:"150","show-overflow-tooltip":!0},{default:l(t=>[t.row.id?(i(),_("span",we,[p(f(t.row.realName?t.row.realName:t.row.nickname)+" ",1),ve,p(" "+f(t.row.id),1),e(R,{style:{cursor:"pointer","margin-left":"4px"},onClick:s=>a(D)(t.row.id)},{default:l(()=>[e(O)]),_:2},1032,["onClick"]),ke,p(" L"+f(t.row.levelId)+"-"+f(t.row.levelName),1)])):(i(),_("span",Ce,"-"))]),_:1}),e(c,{label:"账户类型",align:"center"},{default:l(t=>[t.row.accountType==0?(i(),_("span",Ve,"实盘")):z("",!0),t.row.accountType==1?(i(),_("span",xe,"模拟")):z("",!0)]),_:1}),e(c,{label:"直属代理(ID)",align:"center"},{default:l(t=>[t.row.agentId?(i(),_("span",Ie,[p(f(t.row.agentName),1),Se,p("（"+f(t.row.agentId)+"）",1)])):(i(),_("span",Ae,"-"))]),_:1}),e(c,{label:"团队总代(ID)",align:"center"},{default:l(t=>[t.row.generalAgentId?(i(),_("span",Le,[p(f(t.row.generalAgentName),1),Ne,p("（"+f(t.row.generalAgentId)+"）",1)])):(i(),_("span",Ue,"-"))]),_:1}),e(c,{label:"邀请人数",align:"center",key:"inviteesCount",prop:"inviteesCount","show-overflow-tooltip":!0}),e(c,{label:"团队总人数",align:"center",key:"memberCount",prop:"memberCount","show-overflow-tooltip":!0}),e(c,{label:"返佣人数",align:"center",key:"rebateCount",prop:"rebateCount","show-overflow-tooltip":!0}),e(c,{label:"推广码",align:"center",key:"promotionCode",prop:"promotionCode","show-overflow-tooltip":!0},{default:l(t=>[v("span",null,f(t.row.promotionCode),1),e(R,{style:{cursor:"pointer","margin-left":"4px"},onClick:s=>a(D)(t.row.promotionCode)},{default:l(()=>[e(O)]),_:2},1032,["onClick"])]),_:1}),e(c,{label:"允许邀请下级",align:"center"},{default:l(t=>[e($,{size:"large",onChange:s=>J(t.row,s),modelValue:t.row.promotionEnable,"onUpdate:modelValue":s=>t.row.promotionEnable=s},null,8,["onChange","modelValue","onUpdate:modelValue"])]),_:1}),e(c,{label:"允许登录代理后台",align:"center"},{default:l(t=>[e($,{size:"large",onChange:s=>G(t.row,s),modelValue:t.row.agentLoginEnable,"onUpdate:modelValue":s=>t.row.agentLoginEnable=s},null,8,["onChange","modelValue","onUpdate:modelValue"])]),_:1}),e(c,{fixed:"right",label:"操作",align:"center",width:"400","class-name":"small-padding fixed-width"},{default:l(t=>[e(N,{disabled:"true",content:"查看邀请人数",placement:"top"},{default:l(()=>[w((i(),C(h,{type:"primary",onClick:s=>A(t.row,3)},{default:l(()=>[p("查看邀请人数")]),_:2},1032,["onClick"])),[[U,["invite"]]])]),_:2},1024),e(N,{disabled:"true",content:"查看团队成员",placement:"top"},{default:l(()=>[w((i(),C(h,{type:"primary",onClick:s=>A(t.row,2)},{default:l(()=>[p("查看团队成员")]),_:2},1032,["onClick"])),[[U,["team"]]])]),_:2},1024),e(N,{disabled:"true",content:"查看返佣人数",placement:"top"},{default:l(()=>[w((i(),C(h,{type:"primary",onClick:s=>A(t.row,1)},{default:l(()=>[p("查看返佣人数")]),_:2},1032,["onClick"])),[[U,["rakeBack"]]])]),_:2},1024)]),_:1})]),_:1},8,["data","onHeaderDragend"])),[[ae,a(I)]]),w(e(te,{total:a(S),onPagination:b,page:a(n).pageNo,"onUpdate:page":o[6]||(o[6]=t=>a(n).pageNo=t),limit:a(n).pageSize,"onUpdate:limit":o[7]||(o[7]=t=>a(n).pageSize=t)},null,8,["total","page","limit"]),[[pe,a(S)>0]])]),_:1})]),_:1})])}}}),Re=ne(Pe,[["__scopeId","data-v-45400a0d"]]);export{Re as default};
